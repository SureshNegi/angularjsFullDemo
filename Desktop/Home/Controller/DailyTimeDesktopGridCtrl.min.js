angular.module("MyTimeApp").controller("DailyTimeDesktopGridCtrl",["$scope","$filter","uiGridConstants","$http","gridDataService","cepService","projectComponetService","$timeout","loadRevenueMonthsServices","broadcastService","loginService","preferencesService","$rootScope","$state","$modal","$q","$window","dateService","constantService","$locale","$translate","$interval","broadcastMessageServices","activityService","openPopUpWindowFactory","$document","uiGridGridMenuService","designateService","empSharedService","cepSharedService","importCalService","descFavService","activityFavService","$modalStack","gridLayoutService","constantService","futureEntryService","timeEntryNextRevenueService","commonUtilityService","retrieveSharedService",function(e,t,a,n,r,l,o,s,d,c,g,p,u,C,m,h,E,D,y,v,f,T,b,S,w,O,I,M,R,_,P,k,A,L,F,N,H,x,U,B){function G(e){var t=new Date(B.getMonthName(e)+" 1, 2000").getMonth();return isNaN(t)?0:t+1}function J(e){var i=U.getRevStartEndDateBySelDate(t("date")(e,"yyyy-MM-dd"));if(null!=i){re(i.revStartDate);var a=re(i.revEndDate);currentMonth=parseInt(a.getMonth())+1,currentYear=a.getFullYear()}$(".sidebar .yearContainerinner").each(function(){$(this).find("li").each(function(){$(this).text()==currentYear&&$(this).children().addClass("liActive")})}),$(".sidebar .monthContainer").each(function(){$(this).find("li").each(function(){G($(this).text())==currentMonth&&$(this).children().addClass("liActive")})})}function V(e,t,i){var a=new Date(e,t,i);return a.getFullYear()===e&&a.getMonth()===t&&a.getDate()===i}function Y(e,t){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.datedifference");var i=parseInt((e-t)/864e5),a=parseInt(Math.abs(e.getTime()-t.getTime())/6e4%60),n=parseInt(Math.abs(e-t)/36e5%24),r=e.getTime()-t.getTime(),l={};return l.day=i,l.hours=n,l.minutes=a,l.milliSec=r,l}function j(){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.callMonthEndAtInterval"),e.loginDetail=u.GetLoginDetail(!1,!0);var i=JSON.parse(localStorage.getItem("MonthEndCountdownRevenueMonth")),a=null;if(null!=i&&0!=i.length){var n=t("date")(new Date,"yyyy-MM-dd");(new Date).getTimezoneOffset()>0&&(n=t("date")(new Date("sessiontimeout"),"yyyy-MM-dd"));for(var r=0;r<i.length;r++)if(null!=i[r]&&void 0!=i[r]&&void 0!=i[r].STRTDTE&&re(n)>=re(i[r].STRTDTE)&&re(n)<=re(i[r].ENDDTE)){a=i[r];break}}var l=u.GetInitialDetail(!1,!1),o=l.REVM_REC.TECUTTOFF;if(void 0!=a&&null!=a&&0!=a.length){o=a.TECUTTOFF,o=le(o);var s=le(a.STRTDTE),p=le(a.ENDDTE),C=le(l.REVM_REC.ENDDTE),m=ue(C,1),h=new Date,E=new Date;if("1"!=localStorage.getItem("CutOff_Occured")&&(e.monthEndCutOff=""),s.getFullYear()+"-"+s.getMonth()+"-"+s.getDate()==E.getFullYear()+"-"+E.getMonth()+"-"+E.getDate())e.isMonthEndCutOff=!0,e.is24HrsLeft=!0,e.monthEndCutOff=m.monthname+" "+m.year+t("translate")("msg_nwClosed");else if(o.getTime()+1e4>h.getTime()){var D=[];if((D=Y(o,h)).milliSec<0){if(b=ue(C,0),T.cancel(u.callMonthEndAtInterval),u.callMonthEndAtInterval=T(j,6e4),o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()==h.getFullYear()+"-"+h.getMonth()+"-"+h.getDate()){e.isMonthEndCutOff=!0,e.is24HrsLeft=!0,"1"!=localStorage.getItem("CutOff_Occured")&&(e.monthEndCutOff=b.monthname+" "+b.year+t("translate")("msg_nwClosed"));var y=new Date,v=y.getTimezoneOffset();y.setMinutes(y.getMinutes()-v);var f=angular.copy(e.currentDate);f.setHours(0,0,0,0),f>=s&&f<=p&&(e.monthendcheck||(g.retrieveInitialData(e.loginDetail.SESKEY,e.loginDetail.EMPLID).then(function(i){if(0==parseInt(i.RETINIT_OUT_OBJ.RETCD)){localStorage.setItem("CutOff_Occured","1"),void 0!==u.designateOfEmp&&null!==u.designateOfEmp&&"0"!==u.designateOfEmp.EMPLID&&u.designateOfEmp.EMPLID!=u.designateOfEmp.loginEmpId?u.designateOfEmp.initialDetail=JSON.parse(JSON.stringify(i.RETINIT_OUT_OBJ)):localStorage.setItem("Initial_Data",JSON.stringify(i.RETINIT_OUT_OBJ)),c.cutoffBroadcast(o);var a=new Date(e.currentDate.valueOf());a=t("date")(new Date(a.getFullYear(),a.getMonth(),a.getDate()),"yyyy-MM-dd"),d.loadRevenueMonths(e.loginDetail.SESKEY,a,function(t){var i=t.LOADREVM_OUT_OBJ.REVM_ARR;localStorage.setItem("Revenue_Months",JSON.stringify(i)),ge(),e.init()})}}),e.monthendcheck=!0))}T.cancel(u.callMonthEndAtInterval),"1"!=localStorage.getItem("CutOff_Occured")&&(e.monthEndCutOff=b.monthname+" "+b.year+t("translate")("msg_nwClosed"))}else{var b=ue(C,0);D.day<5&&(e.isMonthEndCutOff=!0,1==D.day&&(e.monthEndCutOff=D.day+" "+t("translate")("msg_day")),D.day>1&&(e.monthEndCutOff=D.day+" "+t("translate")("msg_days")),1==D.hours&&(e.monthEndCutOff=e.monthEndCutOff+" "+D.hours+" "+t("translate")("lbl_HrMonthEnd")+" "),D.hours>1&&(e.monthEndCutOff=e.monthEndCutOff+" "+D.hours+" "+t("translate")("lbl_HrsMonthEnd")+" "),0!=D.hours&&0!=D.minutes&&(e.monthEndCutOff=e.monthEndCutOff+t("translate")("lbl_and")),D.milliSec>0?e.monthEndCutOff=e.monthEndCutOff+" "+(D.minutes<=0?1:D.minutes)+(D.minutes>1?t("translate")("msg_minutes"):t("translate")("msg_minute"))+t("translate")("msg_leftCutOff")+b.monthname+" "+b.year:e.monthEndCutOff=e.monthEndCutOff+" "+t("translate")("msg_leftCutOff")+b.monthname+" "+b.year,0==D.day&&D.hours<24&&(e.is24HrsLeft=!0),0==D.day&&D.hours<2&&(T.cancel(u.callMonthEndAtInterval),u.callMonthEndAtInterval=T(j,6e4),D.milliSec<6e4?(T.cancel(u.callMonthEndAtInterval),u.callMonthEndAtInterval=T(j,5e3)):D.milliSec<12e4&&(T.cancel(u.callMonthEndAtInterval),u.callMonthEndAtInterval=T(j,1e4))))}}else o.getTime()<h.getTime()&&(e.isMonthEndCutOff=!0,e.is24HrsLeft=!0,e.monthEndCutOff=m.monthname+" "+m.year+t("translate")("msg_nwClosed"))}}function W(){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.callAtInterval");var i=u.GetLoginDetail(!1,!0),a=y.ENGLISHLANGUAGEKEY;y.CURRENTLANGUAGE==y.FRENCHLANGUAGEKEY&&(a=y.FRENCHLANGUAGEKEYAPISTRING),b.getBroadcastMessage(i.SESKEY,a).then(function(i){if(0==parseInt(i.RETBROAD_OUT_OBJ.RETCD)&&(void 0!=i.RETBROAD_OUT_OBJ.MSG_ARR||0!=i.RETBROAD_OUT_OBJ.MSG_ARR.length)){var a=i.RETBROAD_OUT_OBJ.MSG_ARR;if(a.length>0)for(var n=0;n<a.length;n++){var r=a[n].MSGID,l=a[n].MSG,o={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0},o={message:l,issubmit:!1,isCancelBtnOn:!0,messageid:r,popUpName:"ConfirmBroadcastMessagePopup"};e.openmodalctrl="ConfirmBroadcastMessageDesktop",w.openModalPopUp("Desktop/BroadcastMessage/templates/ConfirmBroadcastMessageDesktop.html","ConfirmBroadcastMessageDesktopCtrl",o)}else if("object"==typeof i.RETBROAD_OUT_OBJ.MSG_ARR&&0!=i.RETBROAD_OUT_OBJ.MSG_ARR.MSG_OBJ.MSGID){var r=i.RETBROAD_OUT_OBJ.MSG_ARR.MSG_OBJ.MSGID,o={message:l=i.RETBROAD_OUT_OBJ.MSG_ARR.MSG_OBJ.MSG,issubmit:!1,isCancelBtnOn:!0,messageid:r,popUpName:"ConfirmBroadcastMessagePopup"};e.openmodalctrl="ConfirmBroadcastMessageDesktop",w.openModalPopUp("Desktop/BroadcastMessage/templates/ConfirmBroadcastMessageDesktop.html","ConfirmBroadcastMessageDesktopCtrl",o)}}})}function K(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.getSummaryData"),void 0!=t&&(e.billableHrsDaily=parseFloat(t.DBILLABLE),e.chargeableHrsDaily=parseFloat(t.DCHARGEABLE),e.nonbillableHrsDaily=parseFloat(t.DNONBILLABLE),e.billableHrsWeekly=parseFloat(t.WBILLABLE),e.chargeableHrsWeekly=parseFloat(t.WCHARGEABLE),e.nonbillableHrsWeekly=parseFloat(t.WNONBILLABLE),e.billableHrsMonthly=parseFloat(t.MBILLABLE),e.chargeableHrsMonthly=parseFloat(t.MCHARGEABLE),e.nonbillableHrsMonthly=parseFloat(t.MNONBILLABLE),e.icDaily=parseFloat(t.DTOTIC),e.icWeekly=parseFloat(t.WTOTIC),e.icMonthly=parseFloat(t.MTOTIC),e.totalDailyHrs=parseFloat(t.DTOTTIME),e.totalWeeklyHrs=parseFloat(t.WTOTTIME),e.totalMonthlyHrs=parseFloat(t.MTOTTIME),e.billableHrsDaily=e.billableHrsDaily.toFixed(2),e.chargeableHrsDaily=e.chargeableHrsDaily.toFixed(2),e.nonbillableHrsDaily=e.nonbillableHrsDaily.toFixed(2),e.billableHrsWeekly=e.billableHrsWeekly.toFixed(2),e.chargeableHrsWeekly=e.chargeableHrsWeekly.toFixed(2),e.nonbillableHrsWeekly=e.nonbillableHrsWeekly.toFixed(2),e.billableHrsMonthly=e.billableHrsMonthly.toFixed(2),e.chargeableHrsMonthly=e.chargeableHrsMonthly.toFixed(2),e.nonbillableHrsMonthly=e.nonbillableHrsMonthly.toFixed(2),e.totalDailyHrs=e.totalDailyHrs.toFixed(2),e.totalWeeklyHrs=e.totalWeeklyHrs.toFixed(2),e.totalMonthlyHrs=e.totalMonthlyHrs.toFixed(2),e.ischartShow=!0)}function z(e,t){var i=new Date("sessiontimeout"),a=B.getCurrentRevenueStartEndDate(),n=e;parseInt(i.getMonth())+1>e&&i.getFullYear()==t&&(n=parseInt(re(a.STRTDTE).getMonth()+1)),i.getFullYear()==t&&(e=parseInt(re(a.STRTDTE).getMonth()+1)),$(".main-area .submitOver .yearContainerinner #submitYearFirst").each(function(){$(this).find("li").each(function(){$(this).text()==t&&$(this).children().addClass("liActive"),parseInt($(this).text())<parseInt(t)&&i.getFullYear()>parseInt($(this).text())&&$(this).children().addClass("liDisabled")})}),$(".main-area .submitOver .monthContainer ul").each(function(){$(this).find("li").each(function(){G($(this).text())==n&&$(this).children().addClass("liActive"),i.getFullYear()==t&&G($(this).text())<e?$(this).children().addClass("liDisabled"):G($(this).text())<parseInt(e)&&i.getFullYear()>parseInt(t)&&$(this).children().addClass("liDisabled")})})}function X(e){var i=u.chekRevDateInLocalStorage(e,t("translate")("msg_invalidSession"),!1);if(null!=i){var a=re(i.ENDDTE);z(parseInt(a.getMonth())+1,a.getFullYear())}else z(parseInt(e.getMonth())+1,e.getFullYear())}function q(e){return{0:t("translate")("lbl_FulWkDy1"),1:t("translate")("lbl_FulWkDy2"),2:t("translate")("lbl_FulWkDy3"),3:t("translate")("lbl_FulWkDy4"),4:t("translate")("lbl_FulWkDy5"),5:t("translate")("lbl_FulWkDy6"),6:t("translate")("lbl_FulWkDy7")}[e]}function Q(e){return u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.convertMonthNumberToName"),{0:t("translate")("lbl_Mnth1"),1:t("translate")("lbl_Mnth2"),2:t("translate")("lbl_Mnth3"),3:t("translate")("lbl_Mnth4"),4:t("translate")("lbl_Mnth5"),5:t("translate")("lbl_Mnth6"),6:t("translate")("lbl_Mnth7"),7:t("translate")("lbl_Mnth8"),8:t("translate")("lbl_Mnth9"),9:t("translate")("lbl_Mnth10"),10:t("translate")("lbl_Mnth11"),11:t("translate")("lbl_Mnth12")}[e]}function Z(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.rowSelectionAfterGrouping"),e.gridApi.grid.treeBase.tree instanceof Array&&e.gridApi.grid.treeBase.tree[0].aggregations.length>0){e.gridApi.selection.selectRowByVisibleIndex(1);var t=e.gridApi.core.getVisibleRows();t.length>1&&1!=t[1].groupHeader?s(function(){e.gridApi.selection.selectRowByVisibleIndex(1)}):s(function(){Z()},500)}}function ee(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.squash");for(var t=[],i=0;i<e.length;i++)-1==t.indexOf(e[i])&&t.push(e[i]);return t}var te={daily:null,weekly:null};e.hourIndexList=[],u.isLineClicked=!0,e.ttlHrs=0,e.ttlHrs=e.ttlHrs.toFixed(2),e.weeklyTtlHours=0,e.weeklyTtlHours=e.weeklyTtlHours.toFixed(2),e.isDesigPanelDisabled=!1,u.isLoginUsrGloCord=!1,e.ChartCtrlActive=!0;angular.element(E).on("beforeunload",function(e){e.preventDefault()}),$("#loadingWidgetDesktop").bind("contextmenu",function(e){return!1});var ie=$(".user-container-inner").width(),ae=parseInt($(".sidebar").width())+parseInt($(".colapse-bar").width()),ne=parseInt(ie)-parseInt(ae)-17;angular.element(E).bind("resize",function(){var t=$(".user-container-inner").width(),i=parseInt($(".sidebar").width())+parseInt($(".colapse-bar").width());ne=parseInt(t)-parseInt(i)-20,"-200px"==$(".sidebar").css("left")&&(ne=parseInt(t)-parseInt(i)-34+parseInt($(".sidebar").width())),$(".main-area").width(ne);var a=$(window).height();$(".mytime-bar").height(a-9),$(".mytime-bar-inner").height(a-50),$(".user-container").height(a-54),$(".user-container-inner").height(a-90),$(".sidebar-inner").height(a-136),$(".sidebarSide").height(a-96),$(".colapse-bar").height(a-96),$(".right-section").height(a-96),$(".main-area").height(a-94),$(".main-area-wrapper").height(a-139),$(".main-area-wrapperInner").height(a-149),$(".main-area-inner").height(a-201),"3px"==$(".right-section").css("right")?"-25px"==$(".colapse-bar").css("right")?$(".main-area").css("width",ne-270):$(".main-area").css("width",ne):"0px"==$(".sidebar").css("left")&&("0px"==$(".sidebarSide").css("left")?$(".main-area").css("width",parseInt(t)-parseInt(i)-34+parseInt($(".sidebar").width())):$(".main-area").css("width",parseInt(t)-parseInt(i)-20)),e.isDailyMode?localStorage.gridViewportHeight=a-("1"==localStorage.FilterFlag?261:235):localStorage.gridViewportHeight=a-("1"==localStorage.FilterFlag?311:285)});var re=function(e){if(void 0!=e){var t=e.split("-"),i=t[2].split(" ");return new Date(t[0],t[1]-1,i[0])}return null},le=function(e){if(void 0!=e&&null!=e){var t=(e=e.trim()).split("-"),i=t[2].split(" "),a=i[1].split(":");return new Date(t[0],t[1]-1,i[0],a[0],a[1],a[2])}return new Date};$(".main-area").width(ne);var oe=$(window).height();$(".mytime-bar").height(oe-9),$(".mytime-bar-inner").height(oe-50),$(".user-container").height(oe-54),$(".user-container-inner").height(oe-90),$(".sidebar-inner").height(oe-136),$(".sidebarSide").height(oe-96),$(".colapse-bar").height(oe-96),$(".right-section").height(oe-96),$(".main-area").height(oe-94),$(".main-area-wrapper").height(oe-139),$(".main-area-wrapperInner").height(oe-149),$(".main-area-inner").height(oe-201),e.isDailyMode?localStorage.gridViewportHeight=oe-235:localStorage.gridViewportHeight=oe-311;O.on("mousemove",function(e){localStorage.pointy=e.pageY,localStorage.pointx=e.pageX}),e.xyPosition=function(e){var t=215;"0px"==$(".sidebarSide").css("left")&&(t=40);var i=parseInt(localStorage.pointx)-t,a=window.innerWidth-i;a<600&&$(".right-section").is("[disabled=disabled]")?i-=325:a<875&&!$(".right-section").is("[disabled=disabled]")&&(i-=325),$(".tooltiptext1").css("cssText","left: "+i+"px !important;"),localStorage.pointy>window.innerHeight-270?$(e.target.children[0]).removeClass("addMargin"):$(e.target.children[0]).addClass("addMargin")},e.lockImgurl="img/submit_lock.png",e.deleteImgurl="img/cross.jpg",e.monthlyTtlHrs=0,u.isNonADLogin=!1,e.refreshGridMain=!1,e.isDraggingFlag=!1,e.clearGrouping=!1,e.getWeeklyDayDate=function(e,i){var a=new Date(e.valueOf());return a.setDate(a.getDate()+i),t("date")(a,"d")},e.getWeeklyDateTooltip=function(e,i){var a=new Date(e.valueOf());return a.setDate(a.getDate()+i),t("date")(a,"MMMM dd, yyyy")},$(".right-section").attr("disabled","disabled"),$(".leftbarBtn").click(function(){$(".leftbarBtn").css("display","block"),"3px"==$(".right-section").css("right")?("23px"==$(".sidebar").css("margin-left")?$(".sidebar").animate({left:"-200px",marginLeft:"0"}):($(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebar").animate({left:"-200px"},300,function(){$(".verticalBar").css("display","block"),$(".sidebarSide").animate({left:"0px"},100)}),$(".main-area").animate({marginLeft:"25px",width:ne-93}),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","hidden")),$(".right-section").removeAttr("disabled")):"-298px"==$(".right-section").css("right")&&("23px"==$(".sidebar").css("margin-left")?$(".sidebar").animate({left:"-200px",marginLeft:"0"}):($(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebar").animate({left:"-200px"},300,function(){$(".verticalBar").css("display","block"),$(".sidebarSide").animate({left:"0px"},100)}),$(".main-area").animate({marginLeft:"25px",width:ne+180}),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","hidden")),$(".right-section").attr("disabled","disabled")),s(function(){e.refreshUIGridMainOnPane(),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","scroll")},500)}),$(".openLeftBar").click(function(){if($(".leftbarBtn").css("display","block"),"3px"==$(".right-section").css("right"))"23px"==$(".sidebar").css("margin-left")?($(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebarSide").css("left","-22px"),$(".main-area").animate({marginLeft:"205px",width:ne-274}),$(".sidebar").animate({left:"3px",marginLeft:"0"})):($(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebar").animate({left:"3px"}),$(".sidebarSide").css("left","-22px"),$(".main-area").animate({marginLeft:"205px",width:ne-274}),s(function(){e.refreshUIGridMainOnPane()},500)),$(".right-section").removeAttr("disabled");else if("-298px"==$(".right-section").css("right")){if("23px"==$(".sidebar").css("margin-left"))$(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebarSide").css("left","-22px"),$(".main-area").animate({marginLeft:"205px",width:ne}),$(".sidebar").animate({left:"3px",marginLeft:"0"});else{var t=$(".user-container-inner").width(),i=parseInt($(".sidebar").width())+parseInt($(".colapse-bar").width());ne=parseInt(t)-parseInt(i)-17,$(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide"),$(".sidebar").animate({left:"3px"}),$(".sidebarSide").css("left","-22px"),$(".main-area").animate({marginLeft:"205px",width:ne}),s(function(){e.refreshUIGridMainOnPane()},500)}$(".right-section").attr("disabled","disabled")}}),$(".verticalBar").click(function(){$(".leftbarBtn").css("display","none"),"-200px"==$(".sidebar").css("left")?($(".sidebar").addClass("slideSide"),$(".verticalBar").addClass("slideSide"),$(".sidebar").animate({left:"0px",marginLeft:"23px"},300,function(){$(".verticalBar.slideSide").hover(function(){"23px"==$(".sidebar").css("margin-left")&&($(".sidebar").css("left","0px"),$(".sidebar").css("margin-left","23px"))}),$(".sidebar.slideSide").hover(function(){"23px"==$(".sidebar").css("margin-left")&&($(".sidebar").css("left","0px"),$(".sidebar").css("margin-left","23px"))},function(){$(".sidebar.slideSide").animate({left:"-200px",marginLeft:"0"},300),$(".sidebar").removeClass("slideSide"),$(".verticalBar").removeClass("slideSide")})})):"0px"==$(".sidebar").css("left")&&$(".sidebar").animate({left:"-200px",marginLeft:"0"},300)}),$(".rightbarBtn").click(function(){$(".right-section").attr("disabled","disabled"),$(".rightbarBtn").css("display","block"),"3px"==$(".sidebar").css("left")?"25px"==$(".right-section").css("margin-right")?$(".right-section").animate({right:"-298px",marginRight:"0"}):($(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".main-area").animate({width:ne},300),$(".right-section").animate({right:"-298px"},300,function(){$(".colapse-bar").animate({right:"0px"},100)}),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","hidden")):"-200px"==$(".sidebar").css("left")&&("25px"==$(".right-section").css("margin-right")?$(".right-section").animate({right:"-298px",marginRight:"0"}):($(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".main-area").animate({width:ne+182},300),$(".right-section").animate({right:"-298px"},300,function(){$(".colapse-bar").animate({right:"0px"},100)}),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","hidden"))),s(function(){e.refreshUIGridMainOnPane(),$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("overflow-y","scroll")},500),angular.element(".helpBtn").focus()}),$(".open-close").click(function(){if(c.notifyrightClickbroadcast(),u.showRightMenuFlag=!1,$(".right-section").removeAttr("disabled"),$(".rightbarBtn").css("display","block"),"3px"==$(".sidebar").css("left"))"25px"==$(".right-section").css("margin-right")?($(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".colapse-bar").css("right","-25px"),$(".main-area").animate({width:ne-274}),$(".right-section").animate({right:"3px",marginRight:"0"}),$(".right-section").removeAttr("disabled")):($(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".right-section").animate({right:"3px"}),$(".colapse-bar").css("right","-25px"),$(".main-area").animate({width:ne-274}),$(".right-section").removeAttr("disabled"));else if("-200px"==$(".sidebar").css("left"))if("25px"==$(".right-section").css("margin-right"))$(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".colapse-bar").css("right","-25px"),$(".main-area").animate({width:ne-93}),$(".right-section").animate({right:"3px",marginRight:"0"}),$(".right-section").removeAttr("disabled");else{var t=$(".user-container-inner").width(),i=parseInt($(".sidebar").width())+parseInt($(".colapse-bar").width());ne=parseInt(t)-parseInt(i)-17,$(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),$(".right-section").animate({right:"3px"}),$(".colapse-bar").css("right","-25px"),$(".main-area").animate({width:ne-93}),$(".right-section").removeAttr("disabled")}s(function(){e.refreshUIGridMainOnPane()},500),angular.element(".helpBtn").focus()}),$(".verticalBarRight").click(function(){$(".right-section").removeAttr("disabled"),$(".rightbarBtn").css("display","none"),"3px"==$(".right-section").css("right")?($(".right-section").animate({right:"-298px",marginRight:"0"},300),angular.element(".helpBtn").focus()):"-298px"==$(".right-section").css("right")&&($(".right-section").addClass("slideSideRight"),$(".verticalBarRight").addClass("slideSideRight"),$(".right-section").animate({right:"3px",marginRight:"25px"},300,function(){$(".right-section").removeAttr("disabled"),$(".right-section.slideSideRight").hover(function(){"25px"==$(".right-section").css("margin-right")&&($(".right-section").css("right","3px"),$(".right-section").css("margin-right","25px"),$(".right-section").removeAttr("disabled"),angular.element(".helpBtn").focus())},function(){$(".right-section.slideSideRight").animate({right:"-298px",marginRight:"0"},300,function(){$(".right-section").attr("disabled","disabled")}),$(".right-section").removeClass("slideSideRight"),$(".verticalBarRight").removeClass("slideSideRight"),angular.element(".helpBtn").focus()}),$(".verticalBarRight.slideSideRight").hover(function(){"25px"==$(".right-section").css("margin-right")&&($(".right-section").css("right","3px"),$(".right-section").css("margin-right","25px"),$(".right-section").removeAttr("disabled"))})})),angular.element(".helpBtn").focus()});var se=parseInt(new Date("sessiontimeout").getFullYear()-1);!function(){for(i=0;i<=2;i++)$(".sidebar .yearContainerinner #firstColYear").append("<li><a href='javascript:void(0)'>"+se+"</a></li>"),se+=1}(),s(function(){J(e.currentDate),$(".sidebar .calendar .btn.btn-default.btn-sm.btn-block.btnPopupCal").click(function(){$(".sidebar .calendarOver").animate({top:"0px"},300),parseInt((new Date).getFullYear()-1),$(".sidebar .monthContainer ul li a").removeClass("liActive"),$(".sidebar .yearContainerinner ul li a").removeClass("liActive"),J(e.currentDate)}),$(".sidebar .calendar .cancelCalPopup").click(function(){$(".sidebar .calendarOver").animate({top:"-212px"},300)}),$(".sidebar .calendar .selectCalDate").click(function(){$(".sidebar .calendarOver").animate({top:"-212px"},300)}),$(".sidebar .monthContainer ul li a").click(function(){$(".sidebar .monthContainer ul li a").removeClass("liActive"),$(this).addClass("liActive")}),$(".sidebar .yearContainerinner ul li a").click(function(){$(".sidebar .yearContainerinner ul li a").removeClass("liActive"),$(this).addClass("liActive")})}),$(".sidebar .yearContainerinner ul li a").click(function(){$(".sidebar .yearContainerinner ul li a").removeClass("liActive"),$(this).addClass("liActive")}),e.selectCalDate=function(){for(var i=$(".sidebar .yearContainerinner .liActive").text(),a=$(".sidebar .monthContainer .liActive").text(),n=angular.copy(e.currentDate);!V(parseInt(i.substring(0,4)),parseInt(G(a))-1,n.getDate());)n.setDate(n.getDate()-1);n=new Date(i.substring(0,4),parseInt(G(a))-1,n.getDate());var r=U.getRevStartEndDateBySelDate(t("date")(n,"yyyy-MM-dd"));if(null!=r)parseInt(re(r.revEndDate).getMonth())!=parseInt(G(a))-1&&n.setDate(re(r.revStartDate).getDate()-1),c.notifyYearUpCalendar(n),J(n);else{var l=t("date")(n,"yyyy-MM-dd"),o=re(l),s=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(s.SESKEY,l,function(e){var t=e.LOADREVM_OUT_OBJ.REVM_ARR,i=null;if(null!=t){for(var r=0;r<t.length;r++)if(null!=t[r]&&void 0!=t[r]&&void 0!=t[r].STRTDTE&&o>=re(t[r].STRTDTE)&&o<=re(t[r].ENDDTE)){i=t[r];break}parseInt(re(i.ENDDTE).getMonth())!=parseInt(G(a))-1&&n.setDate(re(i.STRTDTE).getDate()-1),c.notifyYearUpCalendar(n),J(n)}})}$(".sidebar .yearContainerinner ul li a").click(function(){$(".sidebar .yearContainerinner ul li a").removeClass("liActive"),$(this).addClass("liActive")})};var de=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.bindTabEvent"),$(".favTab").click(function(){$(".favTabDesc").slideUp(),$(".favTab").removeClass("upArrow");var t=$(this).attr("clsName");"none"==$("#"+t).css("display")&&($(this).addClass("upArrow"),$("#"+t).slideDown(function(){"innerTab1"==t&&(0!=e.isCEPFavPaneOn&&void 0!=e.isCEPFavPaneOn||e.$apply(function(){e.isCEPFavPaneOn=!0})),"innerTab2"==t&&(0!=e.isActivityFavPaneOn&&void 0!=e.isActivityFavPaneOn||e.$apply(function(){e.isActivityFavPaneOn=!0})),"innerTab3"==t&&(0!=e.isDescFavPaneOn&&void 0!=e.isDescFavPaneOn||e.$apply(function(){e.isDescFavPaneOn=!0}))})),s(function(){e.refreshUIGridMainOnPane()},500)})};$(".desigName h4").click(function(){$(".desigName h4 span").toggleClass("openDrop")}),$(".bottomPopup ul li span").click(function(){$(".main-area-bottom .bottomPopup ul li span").removeClass("prevActive"),$(".main-area-bottom .bottomPopup ul li span.active").addClass("prevActive"),$(".bottomPopup ul li span").removeClass("active"),$(this).addClass("active")});var ce=function(){$(".bottomPopup ul li span").removeClass("active"),$(".main-area-bottom .bottomPopup ul li span.prevActive").addClass("active")};!function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.bindExpandEvent");var t=$(".sections li .expandableDiv");$(t[0]).addClass("activecont"),$("#acc1").css("display","block"),$(".sections li .expandableDiv").unbind("click"),$(".sections li .expandableDiv").on("click",function(t){var i=t.target.id;if(e.isDesigPanelDisabled&&("designateDiv"==i||"designatePlusBtn"==i))return!1;if(e.isDesigPanelDisabled&&("acc3Cont"==i||"prfBtn"==i))return!1;$(".sections li .expandableDiv").removeClass("activecont"),$(".sections li .listingDesc").slideUp();var a=$(this).attr("clsName");"block"==$("#"+a).css("display")?($(".sections li .listingDesc").slideUp(),$(".sections li .expandableDiv").removeClass("activecont")):("acc3"===a&&e.$apply(function(){e.isPrefGrid=!0,e.isCstmLayoutGrid=!0}),"acc4"===a&&(!1!==e.isCEPFavPaneOn&&void 0!==e.isCEPFavPaneOn||(e.$apply(s(function(){e.isCEPFavPaneOn=!0})),de())),"acc6"===a&&e.$apply(function(){e.isCstmLayoutGrid=!0}),$("#"+a).slideDown(),$(this).addClass("activecont"))})}(),1!=u.isCallBroadcastAtInterval&&(u.callBroadcastAtInterval=T(W,y.intrvlTmng),u.callMonthEndAtInterval=T(j,3e5),u.isCallBroadcastAtInterval=!0),e.is24HrsLeft=!1;var ge=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getPrefBeforeCuttOff"),e.state=e.gridApi.saveState.save(),e.cuttOffColumnDef=!0,e.cuttOffSaveState=!0;var t=1;if(void 0!=e.gridOptions)switch(e.gridOptions.columnDefs[0].headerCellClass){case"monthendClass1":t=1;break;case"monthendClass2":t=2;break;case"monthendClass3":t=3;break;case"monthendClass4":t=4;break;case"monthendClass5":t=5;break;case"monthendClass6":t=6;break;case"monthendClass7":t=7;break;case"monthendClass8":t=8}e.cutoffColumnDefNumber=t,e.cutoffColumnDefNumberDay=e.optionDaily,e.cutoffColumnDefNumberWeek=e.optionWeekly},pe=function(e){return u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getMonthName"),{0:t("translate")("lbl_Mnth1"),1:t("translate")("lbl_Mnth2"),2:t("translate")("lbl_Mnth3"),3:t("translate")("lbl_Mnth4"),4:t("translate")("lbl_Mnth5"),5:t("translate")("lbl_Mnth6"),6:t("translate")("lbl_Mnth7"),7:t("translate")("lbl_Mnth8"),8:t("translate")("lbl_Mnth9"),9:t("translate")("lbl_Mnth10"),10:t("translate")("lbl_Mnth11"),11:t("translate")("lbl_Mnth12")}[e]},ue=function(e,t){var i="",a=e.getFullYear();0!=e.getMonth()?i=parseInt(e.getMonth())-t:(i=1==t?11:0,a=parseInt(a)-t);var n={};return n.monthname=pe(i),n.year=a,n};e.isMonthEndCutOff=!1,e.chartsRenderingFlag=!1,e.filterFlag=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.filterFlag");var t=e.isDailyMode?"gridblankdataDaily":"gridblankdata";return"1"==localStorage.FilterFlag&&(t+=" filterActive"),t},e.showCharts=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showCharts"),u.currentDateForCharts=new Date(e.currentDate.valueOf()),e.chartsSectionVisible=!0,e.chartsRenderingFlag=!0,c.updateMonthlyChart()};var Ce=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getWeekFirstDate");var t=new Date(e.currentDate.valueOf());t.setDate(t.getDate()+1),t.setDate(t.getDate()-7);for(var i=0;i<7&&0!=t.getDay();i++)t.setDate(t.getDate()+1);return t};e.customNumberFilter=function(e){return void 0===e||null===e?e:e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.showSummary=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showSummary"),e.chartsSectionVisible=!1,e.chartsRenderingFlag=!1},e.showSummary(),e.isSubmitIC=!1,e.isShowSubmitMenu=!1,e.isShowSubCal=!1,e.IsshowProjComponent=!1;previousSelectedDates=[];var me=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.showSubmitCalandar");var i=u.GetInitialDetail(!1,!0),a=re(i.COMP_REC.MAXREVMDATE),n=re(i.REVM_REC.STRTDTE);$(".datepick-week").hide();var r=y.CURRENTLANGUAGE;"en"==y.CURRENTLANGUAGE&&(r=""),$("#datepicker").datepicker("option",$.datepick.setDefaults($.datepick.regionalOptions[r])),$("#inlineDatepicker").datepick({onSelect:e.showDate,showOtherMonths:!0,monthsToShow:1,fixedWeeks:!0,dateFormat:"yyyy-mm-dd",showTrigger:"#calImg",selectOtherMonths:!0,renderer:$.datepick.weekOfYearRenderer,firstDay:0,onShow:$.datepick.selectWeek,rangeSelect:!1,multiSelect:3,monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],minDate:n,maxDate:a,prevText:'<i class="fa fa-caret-left"></i>',nextText:'<i class="fa fa-caret-right"></i>',dayNamesMin:[t("translate")("lbl_WkDy1"),t("translate")("lbl_WkDy2"),t("translate")("lbl_WkDy3"),t("translate")("lbl_WkDy4"),t("translate")("lbl_WkDy5"),t("translate")("lbl_WkDy6"),t("translate")("lbl_WkDy7")],showOnFocus:!1})};showSubmitRevampCalendar=function(){var t=$(".datepick #submitDtId .ng-binding").text().split(" ");$(".main-area .monthContainer ul li a").removeClass("liActive"),$(".main-area .yearContainerinner ul li a").removeClass("liActive"),$(".main-area .monthContainer ul li a").removeClass("liDisabled"),$(".main-area .yearContainerinner ul li a").removeClass("liDisabled"),X(new Date(t[1],parseInt(G(t[0]))-1,1)),e.selectSubmitOkClick=!1,$(".calendarOver.submitOver").animate({top:"0px"},300,function(){$(".submitOver .cancelCalPopup").click(function(){$(".calendarOver.submitOver").animate({top:"-229px"},200),e.$apply(function(){s(function(){e.isShowSubmitMenu=!0,e.isShowSubCal=!0})})})}),$(".calendarOver.submitOver").animate({top:"0px"},300,function(){$(".submitOver .selectCalDate").click(function(){$(".calendarOver.submitOver").animate({top:"-229px"},200),e.$apply(function(){s(function(){e.isShowSubmitMenu=!0,e.isShowSubCal=!0})})})})};var he=new Date("sessiontimeout"),Ee=parseInt(he.getFullYear()-parseInt(1));$(".main-area.calendarOver").click(function(){e.$apply(function(){s(function(){e.isShowSubmitMenu=!0,e.isShowSubCal=!0})})}),function(){for(i=0;i<=2;i++)$(".main-area .yearContainerinner #submitYearFirst").append("<li><a href='javascript:void(0)'>"+Ee+"</a></li>"),Ee+=1}(),s(function(){$(".main-area .yearContainerinner ul li a").click(function(){if(!$(this).hasClass("liDisabled")){$(".main-area .yearContainerinner ul li a").removeClass("liActive"),$(this).addClass("liActive");var t=$("#inlineDatepicker").datepick("getDate");if(0==t.length){var i=$(".main-area .yearContainerinner .liActive").text(),a=$(".main-area .monthContainer .liActive").text();t=new Date(i.substring(0,4),parseInt(G(a))-1,1)}$(".main-area .monthContainer ul li a").removeClass("liDisabled"),$(".main-area .monthContainer ul li a").removeClass("liActive"),X(t),e.$apply(function(){s(function(){e.isShowSubmitMenu=!0,e.isShowSubCal=!0})})}}),$(".main-area .monthContainer ul li a").click(function(){$(".main-area .monthContainer ul li a").removeClass("liActive"),$(this).addClass("liActive"),e.$apply(function(){s(function(){e.isShowSubmitMenu=!0,e.isShowSubCal=!0})})})}),selectSubmitCalDate=function(){var t=$(".main-area .yearContainerinner .liActive").text(),i=$(".main-area .monthContainer .liActive").text(),a=$("#inlineDatepicker").datepick("getDate");a=new Date(t.substring(0,4),parseInt(G(i))-1,1),$(".main-area .monthContainer ul li a").removeClass("liActive"),$(".main-area .yearContainerinner ul li a").removeClass("liActive"),$(".main-area .monthContainer ul li a").removeClass("liDisabled"),$(".main-area .yearContainerinner ul li a").removeClass("liDisabled"),X(a),e.selectSubmitOkClick=!0,e.$apply(function(){$("#inlineDatepicker").datepick("showMonth",t,G(i)),e.selectSubmitOkClick=!1})},e.editMenuConfig={isDeletedOff:!1,isEditOff:!1,isCopyOff:!1,isMultiple:!1},e.mainDivClick=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.mainDivClick"),ye()},e.designateDropDownClick=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.designateDropDownClick"),angular.element("#designateSrchInput").focus(),t.stopPropagation(),e.allDesignateOfList.length>0&&(e.designateConfig.showBecomeDesignate=!e.designateConfig.showBecomeDesignate,e.designateConfig.showBecomeDesignate&&(""==e.designateConfig.displayName.trim()&&(e.designateConfig.displayName=""),e.designateConfig.becomeDesignateList.length!=e.allDesignateOfList.length&&De()))};var De=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.bindDesignateDropDown");var t=e.allDesignateOfList.filter(function(t){return t.EMPLID!==e.designateConfig.designateOfEmp.EMPLID});e.designateConfig.becomeDesignateList=t},ye=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.resetDesignateDisplay"),null!=e.designateConfig.designateOfEmp&&void 0!==e.designateConfig.designateOfEmp.UIDISPNAME?e.designateConfig.displayName=e.designateConfig.designateOfEmp.UIDISPNAME.trim():e.designateConfig.displayName="",e.designateConfig.showBecomeDesignate=!1},ve=function(e,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getPopUpDesignateMsg");var a=[],n="",r="";"INACTIVE"===e.initialDetail.EMPL_REC.STATUS&&(n=t("translate")("msg_InActiveDesignateSelected",{DOT:e.initialDetail.EMPL_REC.TERMDTE}),a.push(n),r="- ");var l=i.EMPL_REC.FNAME+" "+i.EMPL_REC.LNAME,o=e.initialDetail.EMPL_REC.FNAME;return void 0!==e.initialDetail.EMPL_REC.MINIT&&null!==e.initialDetail.EMPL_REC.MINIT&&(o=o+" "+e.initialDetail.EMPL_REC.MINIT),void 0!==e.initialDetail.EMPL_REC.LNAME&&null!==e.initialDetail.EMPL_REC.LNAME&&(o=o+" "+e.initialDetail.EMPL_REC.LNAME),n=r+t("translate")("msg_DesignateChange",{name1:l,name2:o}),a.push(n),a.length>1&&(a[0]=r+a[0]),a},fe=function(i,a,n,r,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateDesignateListOnSelectCDAUser");var l=i,o=null;if(e.allDesignateOfList=[],null!=l){if("[object Array]"!=Object.prototype.toString.call(l)){var s=l.DESIG_OBJ;l=[],null!=s&&l.push(s)}l.length>0&&(l.forEach(function(e){e.UIDISPNAME=e.DISPNAME.trim()}),e.allDesignateOfList=l)}o={EMPLID:a,UIDISPNAME:" "+t("translate")("msg_Me")+" - ("+e.loginDetail.loginUsrDisplayName+")"},e.allDesignateOfList.push(o),e.allDesignateOfList=t("orderBy")(e.allDesignateOfList,["UIDISPNAME"])},Te=function(i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateDesignateList");var n=e.loginDetail.empLoggedInId,r=e.allDesignateOfList.filter(function(e){return e.EMPLID===n});if(!0===a&&void 0!==i.initialDetail.EMPL_REC.HASCDA&&"Y"===i.initialDetail.EMPL_REC.HASCDA)M.loadBecomeDesignate(e.loginDetail.SESKEY,i.EMPLID).then(function(t){0===parseInt(t.LOADBECOMEDESIG_OUT_OBJ.RETCD)&&fe(t.LOADBECOMEDESIG_OUT_OBJ.EMPL_ARR,n,e.loginDetail.loginUsrDisplayName)});else{var l=null;0===r.length?(l={EMPLID:n,UIDISPNAME:" "+t("translate")("msg_Me")+" - ("+e.loginDetail.loginUsrDisplayName+")"},e.allDesignateOfList.push(l)):(l=r[0]).UIDISPNAME=" "+t("translate")("msg_Me")+" - ("+e.loginDetail.loginUsrDisplayName+")"}},be=function(e){if(null!==e&&void 0!==e||(e=[]),e.length>0){for(var t=JSON.parse(localStorage.getItem("globalPref")),i=0;i<e.length;i++)e[i].GMODE===N.LAYOUTMODE.Daily?t[0].KEYVAL_ARR[4]={DEF:"N",KEYVAL:"customlayout",KEYVALDESC:e[i].GNAME}:e[i].GMODE===N.LAYOUTMODE.Weekly&&(t[1].KEYVAL_ARR[2]={DEF:"N",KEYVAL:"customlayout",KEYVALDESC:e[i].GNAME});localStorage.setItem("globalPref",JSON.stringify(t))}};e.becomeDesignateOf=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.becomeDesignateOf"),u.columnBlank)a={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0},e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",a);else if(localStorage.removeItem("retrieveTimeEntriesDataSaved"),localStorage.removeItem("savedTimeEntriesRevDates"),localStorage.removeItem("RevMonthDetails"),localStorage.removeItem("ImportData"),localStorage.removeItem("nonADLogin"),localStorage.removeItem("calENCKEY"),"1"==localStorage.getItem("isMainGridLayoutChange")){if(!u.dailyCustomFlag&&"true"==localStorage.isDailyMode||!u.weeklyCustomFlag&&"false"==localStorage.isDailyMode)a={msgList:[t("translate")("msg_cfrmMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"ConfrmSaveMainGrdLayout",methodName:"becomeDesignateOf"};else var a={msgList:[t("translate")("msg_overrideMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"OverrideSaveMainGrdLayout",methodName:"becomeDesignateOf"};localStorage.setItem("designateObj",JSON.stringify(i)),w.openModalPopUp("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",a)}else{u.enableSaveLayout=!1,u.countmove=0,e.monthendcheck=!1,e.is24HrsLeft=!1;var n=JSON.parse(JSON.stringify(i)),r=u.designateOfEmp,l=[];g.retrieveInitialData(e.loginDetail.SESKEY,n.EMPLID).then(function(i){if(0==parseInt(i.RETINIT_OUT_OBJ.RETCD))try{localStorage.setItem("InitialRev_Month",JSON.stringify(i.RETINIT_OUT_OBJ)),be(i.RETINIT_OUT_OBJ.LAYOUT_ARR),gt=[],ct=[],K(i.RETINIT_OUT_OBJ.TIME_SUMM),u.designateOfEmp=JSON.parse(JSON.stringify(n)),u.designateOfEmp.initialDetail=JSON.parse(JSON.stringify(i.RETINIT_OUT_OBJ));var a=new Date(e.currentDate.valueOf());a=t("date")(new Date(a.getFullYear(),a.getMonth(),a.getDate()),"yyyy-MM-dd"),d.loadRevenueMonths(e.loginDetail.SESKEY,a,function(a){var r=a.LOADREVM_OUT_OBJ.REVM_ARR;if(localStorage.setItem("Revenue_Months",JSON.stringify(r)),n.EMPLID===e.loginDetail.empLoggedInId){localStorage.setItem("Initial_Data",JSON.stringify(i.RETINIT_OUT_OBJ));var o=e.loginDetail.empLoggedInId;e.designateConfig.designateOfEmp=n,e.designateConfig.displayName=n.UIDISPNAME.trim(),u.designateOfEmp=n,u.designateOfEmp.initialDetail=e.initialDetail.loginUsrInitialDetail;var d=e.allDesignateOfList.filter(function(e){return e.EMPLID===o});e.allDesignateOfList=e.loginUserAllDesignate.slice(0),e.allDesignateOfList.push({EMPLID:o,UIDISPNAME:d[0].UIDISPNAME}),e.allDesignateOfList=t("orderBy")(e.allDesignateOfList,["UIDISPNAME"]),e.isDesigPanelDisabled=!1,$("#designateLi > div").addClass("expandableDiv"),$("#preferenceContDiv > div").addClass("expandableDiv")}else{var c="Y"===e.initialDetail.loginUsrInitialDetail.EMPL_REC.HASCDA;if(e.designateConfig.designateOfEmp=n,e.designateConfig.displayName=n.UIDISPNAME,u.designateOfEmp=n,u.designateOfEmp.initialDetail=i.RETINIT_OUT_OBJ,n.EMPLID!==e.loginDetail.empLoggedInId){var g=e.initialDetail.loginUsrInitialDetail;l=ve(n,g),Te(u.designateOfEmp,c)}e.allDesignateOfList=t("orderBy")(e.allDesignateOfList,["UIDISPNAME"]),e.isDesigPanelDisabled=!0,$("#designateLi > div").removeClass("expandableDiv"),$("#designateLi > div").removeClass("activecont"),$("#preferenceContDiv > div").removeClass("expandableDiv"),$("#preferenceContDiv > div").removeClass("activecont"),$(".sections li #acc2").slideUp(),$(".sections li #acc3").slideUp(),l.length>0&&s(function(){gi(l)},1e3)}Se(),e.init(),localStorage.setItem("DailyDataCopied",!1),localStorage.setItem("WeeklyDataCopied",!1)})}catch(e){u.designateOfEmp=r}})}};var Se=function(){$("#mychartExcludeWeekend>div").length>0&&$("#mychartExcludeWeekend>div").remove(),$("#mychartBarExcludeWeekend>div").length>0&&$("#mychartBarExcludeWeekend>div").remove(),$("#mychart>div").length>0&&$("#mychart>div").remove(),$("#mychart1>div").length>0&&$("#mychart1>div").remove()};e.checkDesignateInputFocus=function(e){e.stopPropagation()},String.prototype.lTrim=function(){return this.replace(/^\s+/,"")},e.designateInputKeyDown=function(t){if(13==t.keyCode&&e.designateConfig.showBecomeDesignate){var i=$(".designatedropdown li.selected"),a=angular.element(i).attr("id");if(void 0!==a){var n=e.allDesignateOfList.filter(function(e){return e.EMPLID===a});1===n.length&&(e.designateConfig.showBecomeDesignate=!1,e.becomeDesignateOf(n[0]))}}e.designateConfig.becomeDesignateList.length>1&&(40==t.keyCode&&(i=$(".designatedropdown li.selected"),$(".designatedropdown li").removeClass("selected"),0==i.next().length?i.siblings().first().addClass("selected"):i.next().addClass("selected")),38==t.keyCode&&(i=$(".designatedropdown li.selected"),$(".designatedropdown li").removeClass("selected"),0==i.prev().length?i.siblings().last().addClass("selected"):i.prev().addClass("selected")))},e.designateItemMouseOver=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.designateItemMouseOver"),$(".designatedropdown li").removeClass("selected"),$(e.target).addClass("selected")},e.clearDesignateSrch=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.clearDesignateSrch"),e.designateConfig.displayName="",e.designateConfig.showBecomeDesignate=!1,s(function(){angular.element("#designateSrchInput").focus()})},e.checkDesignateInput=function(t){if(e.allDesignateOfList.length>0){e.designateConfig.showBecomeDesignate=!0;var i=[];if(null!==e.designateConfig.displayName&&""!=e.designateConfig.displayName.trim()&&e.allDesignateOfList.length>0){var a=e.designateConfig.displayName.toLowerCase(),n=a.length;i=e.allDesignateOfList.filter(function(t){return t.UIDISPNAME.lTrim().substring(0,n).toLowerCase()==a&&t.EMPLID!==e.designateConfig.designateOfEmp.EMPLID})}e.designateConfig.becomeDesignateList=i,0==i.length&&(e.designateConfig.showBecomeDesignate=!1)}},e.showEditTitle=function(){e.checkRevMonthFlag?e.isDailyMode&&e.isDailyFlag||!e.isDailyMode&&e.isWeeklyFlag?e.pasteMsg=e.pasteCopiedSlctdEntry:e.isDailyMode&&!e.isDailyFlag&&e.WeeklyDataCopied?e.pasteMsg=e.pasteDailyWeekly:e.isDailyMode||e.isWeeklyFlag||!e.DailyDataCopied?e.pasteMsg=e.noPaste:e.pasteMsg=e.pasteWeeklyDaily:e.pasteMsg=e.revClosed},e.showEditMenu=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showEditMenu"),e.showEditTitle(),e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,u.showRightMenuFlag=!1,e.showNewFlag=!1,e.copytoTodayCuttOff=!1,e.afterTecuttOff=!1,checkAfterCuttOff(),e.showEditFlag=!e.showEditFlag,we=e.showEditFlag,e.showEditFlag){e.editMenuConfig.isCopyOff=e.editMenuConfig.isEditOff=e.editMenuConfig.isDeletedOff=!1;var i=e.gridApi.selection.getSelectedRows();i.length>0?i.filter(function(e){return"N"==e.TIMSUB.toUpperCase()}).length<1&&(e.editMenuConfig.isDeletedOff=!0,e.dltdFalseTitle=t("translate")("lbl_entrySubmtd")):(e.editMenuConfig.isCopyOff=e.editMenuConfig.isDeletedOff=e.editMenuConfig.isEditOff=!0,e.dltdFalseTitle=t("translate")("lbl_noSelected")),i.length>1&&(e.editMenuConfig.isEditOff=!0,e.editMenuConfig.isMultiple=!0,e.multiSelected=t("translate")("lbl_notMulEntries"))}},e.showNewMenu=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showNewMenu"),u.showRightMenuFlag=!1,e.showEditFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,e.showNewFlag=!e.showNewFlag,we=e.showNewFlag},e.editEntry=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.editEntry"),u.columnBlank){var i={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",i)}else{u.showRightMenuFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,e.showEditFlag=!1;var a=e.gridApi.selection.getSelectedRows();u.rowIndex=a[0],1==a.length&&(u.showRightMenuFlag=!1,e.editTimeEntry(angular.copy(a[0])))}};var we=!1;e.onMouseEnterToDteSubmit=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.onMouseEnterToDteSubmit"),u.columnBlank){var i={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",i)}else e.checkRevMonthFlag?(e.isShowSubCal=!0,s(function(){$(".datepick-dow-1").focus()}),$(".entryItem .menu #startDateId").css("display","none"),$(".entryItem .menu #endDateId").css("display","none")):(e.isShowSubCal=!1,$(".entryItem .menu #startDateId").css("display","block"),$(".entryItem .menu #endDateId").css("display","block"))},e.toggleSummitMenu=function(){u.showRightMenuFlag=!1,e.showEditFlag=!1,e.showNewFlag=!1,e.showMenuOutsideGrid=!1,me(e),$(".datepick-cmd-today").unbind("click"),$(".datepick-cmd-today").on("click",function(){e.showDate(!0)}),e.isShowSubmitMenu=!e.isShowSubmitMenu,we=e.isShowSubmitMenu},e.submitCalDivClick=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.submitCalDivClick"),we=!0},O.on("click",function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$document.on.click"),"disabled"!=$(t.target).attr("disabled")&&((e.isShowSubmitMenu||e.isShowSubCal||e.showEditFlag||u.showRightMenuFlag||e.showMenuOutsideGrid||e.showNewFlag)&&(we||e.$apply(function(){Oe(),u.showRightMenuFlag=e.showMenuOutsideGrid}),we=!1),$(".searchCep.ng-scope").css("display","none"))}),e.$on("rightClickbroadcast",function(){angular.isDefined(e.gridApi)&&(e.gridApi.selection.getSelectedRows().length>1?(e.editMenuConfig.isMultiple=!0,e.multiSelected=t("translate")("lbl_notMulEntries")):e.editMenuConfig.isMultiple=!1,e.showEditTitle(),e.showEditFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,e.showNewFlag=!1,checkAfterCuttOff())});var Oe=function(){e.isShowSubmitMenu=e.isShowSubCal=e.showEditFlag=e.showNewFlag=!1};e.showDate=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showDate");var i=[];if(!e.selectSubmitOkClick){if(1==t){var a=new Date,n=a.getTimezoneOffset();a.setMinutes(a.getMinutes()-n),i[0]=a}else i=$("#inlineDatepicker").datepick("getDate"),$("#inlineDatepicker").datepick("setDate",[]);e.isShowSubmitMenu=!1,e.submitTimeEntries(i[0])}},e.expandEntry=function(e,t){2==u.cntrExpandCollapse&&(u.cntrExpandCollapse=1),"none"==$("."+e).css("display")||"N"==t?($("."+e).css("display","block"),$(".weekly-details.task-container."+e.replace("exp","")).css("padding-bottom","28px")):($("."+e).css("display","none"),$(".weekly-details.task-container."+e.replace("exp","")).css("padding-bottom","11px"))},e.expandEntryWeekBlock=function(e,t){return"block"==e?$("#week"+t).css("padding-bottom","28px"):$("#week"+t).css("padding-bottom","11px"),e},null!=u.cntrExpandCollapse&&void 0!=u.cntrExpandCollapse||(u.cntrExpandCollapse=0),e.expandEntryToggle=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.expandEntryToggle");var i=!1;if(void 0!=u.expandedEntries.length)for(var a=0;a<u.expandedEntries.length;a++)if(u.expandedEntries.indexOf(t)>-1){i=!0;break}return void 0!=$("."+t).css("display")||i?"none"==$("."+t).css("display")?(u.expandedEntries.indexOf(t)>-1&&u.expandedEntries.splice(u.expandedEntries.indexOf(t),1),u.collapsedEntries.indexOf(t)<0&&u.collapsedEntries.push(t),i=!1):(-1==u.expandedEntries.indexOf(t)&&2!=u.cntrExpandCollapse&&(u.expandedEntries.push(t),u.collapsedEntries.splice(u.collapsedEntries.indexOf(t),1)),i=!0):e.isDefaultExpanded&&-1==u.expandedEntries.indexOf(t)&&2!=u.cntrExpandCollapse&&(u.expandedEntries.push(t),u.collapsedEntries.splice(u.collapsedEntries.indexOf(t),1),i=!0),0==u.cntrExpandCollapse?(e.isDefaultExpanded?(e.expandAllText="Collapse All",e.expandClass="fa fa-minus",$(".weekly-details.task-container").css("padding-bottom","28px")):(e.expandAllText="Expand All",e.expandClass="fa fa-plus",$(".weekly-details.task-container").css("padding-bottom","11px")),2==u.cntrExpandCollapse?u.cntrExpandCollapse=2:u.cntrExpandCollapse=1):2==u.cntrExpandCollapse&&(u.expandedEntries.indexOf(t)<0&&u.collapsedEntries.indexOf(t)<0&&(i=!1,"fa fa-minus"==u.lastExpandClass&&(i=!0)),e.expandAllText=u.lastExpandAllText,e.expandClass=u.lastExpandClass),i},void 0!=u.isCallAtInterval&&u.isCallAtInterval||(W(),u.isCallAtInterval=!0),e.isSbmtOpen=!0,e.prjScopeNoValidMsg=t("translate")("msg_PrjScopNotValid"),e.isPasteClickedExists=!1,void 0!=u.isPasteClicked&&null!=u.isPasteClicked?e.isPasteClickedExists=!0:u.isPasteClicked=!1,e.weeklyMaxTEIDCommon=0,e.isWeeklyMaxTEIDExists=!1,void 0!=u.weeklyMaxTEID&&null!=u.weeklyMaxTEID?e.isWeeklyMaxTEIDExists=!0:u.weeklyMaxTEID=[],localStorage.SelectedCalendardate=null;e.objUsrPreference=new function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.usrPreference"),this.viewPref={isDailymode:!0,isFetch:!1,detail:null}},e.onSubmitMsg="Submitted {xyz} time entries between {sdate} and {edate}.",window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)});var Ie=$(document).height(),Me=$(window).height(),Re=$(".container-fluid").width();$(".navigation").height(Me),$(".overlay").height(Ie),$(".overlay").width(Re);var _e=$(".navigation").width();$(".navigation").css("left",-_e),$(".page_header .menu").click(function(){$(".navigation").animate({left:"0"},500),$(".overlay").fadeIn(500);var e=$(document).height(),t=$(window).height(),i=$(".container-fluid").width();$(".navigation").height(t),$(".overlay").height(e),$(".overlay").width(i);var a=$(".navigation").width();$(".navigation").css("left",-a)}),$(".overlay").click(function(){$(".navigation").animate({left:-_e},500),$(".overlay").fadeOut(500)});var Pe=$(window).width();parseInt(Pe);$(".nav-back").click(function(){$(".navigation").animate({left:-_e},500),$(".overlay").fadeOut(500)}),$(".cal-icon").click(function(){}),$(".well-sm").click(function(){$(".calender-container").css("display","none"),$(".overlay").css("display","none")}),$(".overlay").click(function(){$(".calender-container").css("display","none"),$(".overlay").css("display","none")}),$(".bottom-footer .submit").click(function(){$(".sub_popup").css("display","block"),$(".overlay").css("display","block")}),$(".bottom-footer ul li a").click(function(){$(".bottom-footer ul li a").removeClass("btn-grd2"),$(this).addClass("btn-grd2")}),$(".bottom-footer ul li a").click(function(){$(".bottom-footer ul li a").removeClass("btn-grd2"),$(this).addClass("btn-grd2")}),$(".overlay").click(function(){$(".sub_popup").css("display","none"),$(".overlay").css("display","none"),$(".bottom-footer ul li a").removeClass("btn-grd2")}),$(".okay").click(function(){$(".sub_popup").css("display","none"),$(".overlay").css("display","none"),$(".bottom-footer ul li a").removeClass("btn-grd2")}),$(".cancel_").click(function(){$(".sub_popup").css("display","none"),$(".overlay").css("display","none"),$(".bottom-footer ul li a").removeClass("btn-grd2")}),e.expandCollapseAllClick=function(){$(".expandCollapseAll > .expandCollapse > .fa").attr("class").indexOf("fa-plus")>-1?($(".task-details").css("display","block"),$(".weekly-hours").css("display","block"),$(".top-show-hrs.weekly-hours").css("display","block"),$(".weekly-details.task-container").css("padding-bottom","28px"),e.expandClass="fa fa-minus",u.expandedEntries=[],u.collapsedEntries=[],u.cntrExpandCollapse=1,e.expandAllText="Collapse All"):(u.expandedEntries=[],u.collapsedEntries=[],u.cntrExpandCollapse=1,$(".task-details").css("display","none"),$(".weekly-hours").css("display","none"),$(".weekly-details.task-container").css("padding-bottom","11px"),$(".top-show-hrs.weekly-hours").css("display","block"),e.expandClass="fa fa-plus",e.expandAllText="Expand All")},$(".sub_popup-action .dots").click(function(){u.isPanelOpen=!0,$(".show-dayWeek").css("display","block"),$(".dots").css("display","none"),$(".cancel-cross").css("display","block"),$(".sub_popup-action").removeClass("isCancel")}),$(".sub_popup-action .cancel-cross").click(function(){$(".sub_popup-action").addClass("isCancel"),u.isPanelOpen=!1,$(".show-dayWeek").css("display","none"),$(".dots").css("display","block"),$(".cancel-cross").css("display","none"),e.IsSelectedForAll=!1,e.selectedForDelete=!1,e.$apply()}),$(".sub_popup-action .more").click(function(){$(".show-dayWeek").css("display","none"),$(".expand-footer").css("display","block"),$(".cancel-cross").css("display","none"),$(".sub_popup-action .cancel-cross-left").css("display","block")}),$(".sub_popup-action .cancel-cross-left").click(function(){$(".show-dayWeek").css("display","block"),$(".expand-footer").css("display","none"),$(".cancel-cross").css("display","block"),$(".sub_popup-action .cancel-cross-left").css("display","none")}),u.isPanelOpen&&($(".show-dayWeek").css("display","block"),$(".dots").css("display","none"),$(".cancel-cross").css("display","block")),e.refreshUIGridMainOnPane=function(){$(".grid.ui-grid .ui-grid-render-container-body .ui-grid-viewport").css("width","auto"),e.gridApi.core.handleWindowResize()},e.checkRevMonthFlag=!0,e.loadCalender=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadCalender"),u.lastCurrentDate=t("date")(e.currentDate,"yyyy-MM-dd"),e.open("templates/Calendar.html","calController")};var ke=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getWeekStartDate");var i=new Date,a=null,a=u.chekRevDateInLocalStorage(i,t("translate")("msg_invalidSession"),!0),n=re(a.STRTDTE);if(e.weeklyStartDate.setHours(0,0,0,0)<n.setHours(0,0,0,0)){var r=n.getTimezoneOffset();return n.setMinutes(n.getMinutes()-r),n}return e.weeklyStartDate};e.loadImportCalEntriesRev=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadImportCalEntriesRev"),u.showRightMenuFlag=!1;var i=u.GetInitialDetail(!1,!0),a=e.currentDate;if(e.isDailyMode||(a=ke()),!R.checkTerminationDate(i.EMPL_REC.TERMDTE,a)){var n=t("translate")("msg_InActiveDesignateSelected",{DOT:i.EMPL_REC.TERMDTE});return gi([n]),!1}if(u.columnBlank){var r={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",r)}else{u.importViewed=!1;var l=new Date(e.currentDate.valueOf());l=t("date")(l,"yyyy-MM-dd");var o=JSON.parse(localStorage.getItem("Revenue_Months")),s=null;if(null!=o){var c=new Date(l);c=new Date(c.getTime()+60*c.getTimezoneOffset()*1e3),s=angular.fromJson(o).filter(function(e){if(null!=e&&c>=re(e.STRTDTE)&&c<=re(e.ENDDTE))return!0})}if(null!=s&&void 0!=s&&0!=s.length)e.revStartDate=s[0].STRTDTE,e.revEndDate=s[0].ENDDTE,localStorage.setItem("Revenue_Months_ImportCal",JSON.stringify(o)),e.loadImportCalEntries();else{var g=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(g.SESKEY,l,function(t){var i=t.LOADREVM_OUT_OBJ.REVM_ARR;localStorage.setItem("Revenue_Months_ImportCal",JSON.stringify(i)),e.loadImportCalEntries()})}}},e.loadImportCalEntries=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadImportCalEntries"),Ht()){var i=JSON.parse(localStorage.getItem("Login_Detail")),a=null;if(e.isDailyMode||(a=ke()),"Y"==i.ISNONAD&&null==localStorage.getItem("nonADLogin")){var n={domain:"mercer",currentDate:e.currentDate,isDailyMode:e.isDailyMode,weekCurrentDate:a,weekStartDate:e.weeklyStartDate,lastExpandAllText:e.expandAllText,lastExpandClass:e.expandClass,weekData:e.itemsDataTotal,totalHrs:e.ttlHrs};e.openModalCtrl="importCalDesktopLoginCtrl",w.openModalPopUp("Desktop/CalendarImport/templates/ImportCalDesktopLogin.html","importCalDesktopLoginCtrl",n)}else{var r,l=u.GetLoginDetail(!1,!0);r=null==localStorage.getItem("encKeyNew")?l.ENCKEY:localStorage.getItem("encKeyNew");var o=y.DOMAINNAME,s=u.GetInitialDetail(!1,!0),d=e.currentDate;d.setHours(0,0,0,0);var c=new Date(d.valueOf()),g=t("date")(c,"yyyy-MM-dd HH:mm:ss");null==localStorage.getItem("ImportData")?P.getCalImportEntries(l.SESKEY,r,o,g,g,s.EMPL_REC.EMAIL,s.EMPL_REC.EMAIL).then(function(t){e.loadImportCalEntriesTemp(t),localStorage.setItem("ImportData",JSON.stringify(t))}):e.loadImportCalEntriesTemp(JSON.parse(localStorage.getItem("ImportData")))}}},e.loadImportCalEntriesTemp=function(i){var a=JSON.parse(localStorage.getItem("Login_Detail"));if(2==parseInt(i.RETCALENT_OUT_OBJ.RETCD)&&""!=i.RETCALENT_OUT_OBJ.ERRMSG.trim())d={errorList:[i.RETCALENT_OUT_OBJ.ERRMSG]},e.openModalCtrl="importExchangeErrorCtrl",w.openModalPopUp("Desktop/CalendarImport/templates/ImportExchangeError.html","importExchangeErrorCtrl",d);else{var n=null;e.isDailyMode||(n=ke());var r=new Date(e.currentDate.valueOf());r=t("date")(r,"yyyy-MM-dd");var l=JSON.parse(localStorage.getItem("Revenue_Months_ImportCal")),o=null;if(null!=l){var s=new Date(r);s=new Date(s.getTime()+60*s.getTimezoneOffset()*1e3),o=angular.fromJson(l).filter(function(e){if(null!=e&&s>=re(e.STRTDTE)&&s<=re(e.ENDDTE))return!0})}null!=o&&void 0!=o&&0!=o.length&&(e.revStartDate=o[0].STRTDTE,e.revEndDate=o[0].ENDDTE);var d={currentDate:e.currentDate,isDailyMode:e.isDailyMode,weekCurrentDate:n,weekStartDate:e.weeklyStartDate,flag:"Y"==a.ISNONAD?"Y":"N",encKey:null,revStartDate:e.revStartDate,revEndDate:e.revEndDate,lastExpandAllText:e.expandAllText,lastExpandClass:e.expandClass,weekData:e.itemsDataTotal,totalHrs:e.ttlHrs,popUpName:"importCalPopUp"};e.openModalCtrl="importCalDesktopCtrl",w.openModalPopUp("Desktop/CalendarImport/templates/ImportCalDesktopEntries.html","importCalDesktopCtrl",d)}};var Ae=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.enableDisableSubmitBtn");var i=null,a=e.currentDate;a=re(t("date")(a,"yyyy-MM-dd"));var n=new Date,r={sDte:null,eDte:null};n.setHours(0,0,0,0),n=t("date")(new Date(n.getFullYear(),n.getMonth(),n.getDate()),"yyyy-MM-dd");var l=new Date(n);l=new Date(l.getTime()+60*l.getTimezoneOffset()*1e3),null!=(i=u.chekRevDateInLocalStorage(l,t("translate")("msg_invalidSession"),!1))&&(null!=i&&void 0!=i&&(r.sDte=re(i.STRTDTE),r.eDte=re(i.ENDDTE)),r.sDte>a?e.isSbmtOpen=!1:e.isSbmtOpen=!0)};e.animationsEnabled=!0;e.open=function(t,i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.open"),m.open({animation:e.animationsEnabled,templateUrl:t,controller:i,resolve:{arguments:function(){return a}}}).result.then(function(t){switch(u.errorLogMethod("DailyTimeDesktopGridCtrl.modalInstance.result"),isPasteOnProgress=!1,e.openModalCtrl){case"submitConfirm":var i=e.isSubmitIC;oi(a.sesKey,a.empId,a.selDte,i);break;case"submitAPIConfirm":oi(a.sesKey,a.empId,a.selDte,!0);break;case"pasteAdvanced":e.pasteMultiple(t)}},function(){$(".overlay").css("display","none"),$(".bottom-footer ul li a").removeClass("btn-grd2"),e.openModalCtrl=""})},e.toggleAnimation=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.toggleAnimation"),e.animationsEnabled=!e.animationsEnabled},e.checkRevMonthTime=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.checkRevMonthTime");var i=u.GetInitialDetail(!1,!1);if(void 0!=i&&null!=i){var a=i.REVM_REC.STRTDTE.split("-"),n=i.REVM_REC.ENDDTE.valueOf().split("-"),r=null;void 0!=a&&void 0!=n&&(r=new Date(a[0],a[1]-1,a[2].split(" ")[0]),new Date(n[0],n[1]-1,n[2].split(" ")[0]));var l=new Date(t.valueOf());l.setHours(0,0,0,0),e.checkRevMonthFlag=!(l<r)}},$(".edit-delete").click(function(){$(".sub-overlay").css("display","block")}),$(".sub-overlay").click(function(){$(".sub-overlay").css("display","none")}),e.gridNoEntryMessage=0,e.ttlHrs=0,e.icChrge=0,e.initialDetail="",e.domainURL="",e.stateProv=[];var Le=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.setLocale"),y.CURRENTLANGUAGE==y.FRENCHLANGUAGEKEY?angular.copy(locales.fr,v):angular.copy(locales.en,v)};e.getFavActivities=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.getFavActivities"),S.retrieveActivityFavorites(t.SESKEY,t.EMPLID).then(function(t){if(0==t.RETACTIFAV_OUT_OBJ.RETCD){if("[object Array]"!=Object.prototype.toString.call(t.RETACTIFAV_OUT_OBJ.ACTI_ARR)){var i=t.RETACTIFAV_OUT_OBJ.ACTI_ARR;t.RETACTIFAV_OUT_OBJ.ACTI_ARR=[],null!=i&&null!=i.ACTI_OBJ&&void 0!=i.ACTI_OBJ&&t.RETACTIFAV_OUT_OBJ.ACTI_ARR.push(i.ACTI_OBJ)}var a=t.RETACTIFAV_OUT_OBJ.ACTI_ARR;if(e.ActivityFavList=[],null!=a)for(var n=0;n<a.length;n++)"Y"==a[n].STAT&&(a[n].fav=!0,e.ActivityFavList.push(a[n]));sessionStorage.setItem("FavActivityArray",JSON.stringify(e.ActivityFavList))}})},e.getFavDescription=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.getFavDescription"),l.retrieveDescriptionFavorites(e.SESKEY,e.EMPLID).then(function(e){if(0==e.RETDESCFAV_OUT_OBJ.RETCD){if("[object Array]"!=Object.prototype.toString.call(e.RETDESCFAV_OUT_OBJ.DESTXT_ARR)){var t=e.RETDESCFAV_OUT_OBJ.DESTXT_ARR;e.RETDESCFAV_OUT_OBJ.DESTXT_ARR=[],null!=t&&void 0!=t.VARCHAR2&&e.RETDESCFAV_OUT_OBJ.DESTXT_ARR.push(t.VARCHAR2)}sessionStorage.setItem("DescFav",JSON.stringify(e.RETDESCFAV_OUT_OBJ.DESTXT_ARR))}})},e.currentDate=new Date;var Fe=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateCalDateToCurrentDate");var t=new Date,i=t.getTimezoneOffset();t.setMinutes(t.getMinutes()-i),e.currentDate=t,localStorage.SelectedCalendardate=angular.copy(e.currentDate),c.notifyDateTimeSlider(e.currentDate)},Ne=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.preferenceObj"),this.key=e},$e=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.empCurrentPreference"),this.viewMode=new Ne("INITIAL_TAB"),this.langMode=new Ne("LANG"),this.columnViewDaily=new Ne("COLUMN_VIEW_DAILY"),this.columnViewWeekly=new Ne("COLUMN_VIEW_WEEKLY"),this.policyEmail=new Ne("POLICY_EMAIL_PREFERENCE"),this.feeAdjEmail=new Ne("FEE_ADJ_EMAIL_PREFERENCE")},He=function(e,t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getSelectedMode");var a=null,n=[];if(null!==t&&(n=t.filter(function(t){return t.KEY===e})),n.length>0){var r=i.filter(function(e){return e.KEYVAL==n[0].VAL});a={key:n[0].KEY},void 0!=r[0]&&(a.val=r[0].KEYVALDESC,a.keyVal=r[0].KEYVAL)}else(n=i.filter(function(e){return"Y"==e.DEF})).length>0&&(a={key:e,val:n[0].KEYVALDESC,keyVal:n[0].KEYVAL});return a};e.empCurrentPrefeObj=null,e.prefereceList=[];var xe=function(t,i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateOptionForColumnView");for(var n=0;n<t.length;n++)"time"==t[n].KEYVAL?t[n].order=1:"timeIncl"==t[n].KEYVAL?t[n].order=2:"ic"==t[n].KEYVAL?t[n].order=3:"icIncl"==t[n].KEYVAL?t[n].order=4:"customlayout"==t[n].KEYVAL&&(t[n].order=5),t[n].KEYVAL===i&&(a?e.optionDaily=t[n].order:e.optionWeekly=t[n].order)},Ue=function(a,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.setPreferenceSettings"),e.prefereceList=[],e.empCurrentPrefeObj=new $e;var r=n.map(function(e){return e.KEY});for(i=0;i<r.length;i++)switch(r[i]){case e.empCurrentPrefeObj.columnViewDaily.key:(l=new Ne(r[i])).name=n[i].KEYDESC,l.displayOrder=0,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,xe(l.options,l.keyVal,!0),e.prefereceList.push(l);break;case e.empCurrentPrefeObj.columnViewWeekly.key:(l=new Ne(r[i])).name=n[i].KEYDESC,l.displayOrder=1,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,xe(l.options,l.keyVal,!1),e.prefereceList.push(l);break;case e.empCurrentPrefeObj.feeAdjEmail.key:(l=new Ne(r[i])).name=n[i].KEYDESC,l.displayOrder=2,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,e.prefereceList.push(l);break;case e.empCurrentPrefeObj.langMode.key:(l=new Ne(r[i])).name=n[i].KEYDESC,l.displayOrder=3,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,e.prefereceList.push(l),l.currentLanguage=l.keyVal,l.keyVal;break;case e.empCurrentPrefeObj.policyEmail.key:(l=new Ne(r[i])).name=n[i].KEYDESC,l.displayOrder=4,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,e.prefereceList.push(l);break;case e.empCurrentPrefeObj.viewMode.key:var l=new Ne(r[i]);l.name=n[i].KEYDESC,l.displayOrder=5,l.options=n[i].KEYVAL_ARR,l.selected=He(r[i],a,n[i].KEYVAL_ARR),l.value=l.selected.val,l.keyVal=l.selected.keyVal,"DAILY"==angular.uppercase(l.keyVal)?e.empCurrentPrefeObj.viewMode.isDailymode=!0:e.empCurrentPrefeObj.viewMode.isDailymode=!1,e.prefereceList.push(l)}e.prefereceList=t("orderBy")(e.prefereceList,["displayOrder"]),e.gridPrefOptions.data=e.prefereceList},Be=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getPreferenceSettings");try{if(void 0!==e.PREF_ARR&&null!==e.PREF_ARR&&"[object Array]"!=Object.prototype.toString.call(e.PREF_ARR)){var t=e.PREF_ARR;e.PREF_ARR=[],e.PREF_ARR.push({KEY:t.PREF_OBJ.KEY,VAL:t.PREF_OBJ.VAL})}var i=JSON.parse(localStorage.getItem("globalPref"));null!==i&&Ue(e.PREF_ARR,i)}catch(e){console.log("Error on getPreferenceSettings="+e.message)}},Ge=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.checkCstmLayoutVisible"),u.dailyCustomFlag?$("#spnClmDailyViewCustomLayout").show():(delete e.prefereceList[0].options[4],$("#spnClmDailyViewCustomLayout").hide()),u.weeklyCustomFlag?$("#spnClmWeeklyViewCustomLayout").show():(delete e.prefereceList[1].options[2],$("#spnClmWeeklyViewCustomLayout").hide())},Je=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getCstmLayout");try{layOutNameList={Daily:"",Weekly:""},localStorage.removeItem("searchLayout");var i=F.getCustomLayout();if(null!==i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR&&void 0!==i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR&&i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR.length>0){for(var a="0",n=0;n<i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR.length;n++)"1"===(a=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n].GMODE)?(te.daily=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n],te.daily.parentColumnViewId=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n].GPARENTCOLUMNVIEWID,e.dailyViewCustomLayout=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n].GNAME,u.dailyCustomFlag=!0):"2"===a?(te.weekly=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n],te.weekly.parentColumnViewId=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n].GPARENTCOLUMNVIEWID,e.weeklyViewCustomLayout=i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n].GNAME,u.weeklyCustomFlag=!0):"3"===a&&localStorage.setItem("searchLayout",JSON.stringify(i.LOADCUSTOMLAYOUT_OBJ.LAYOUT_ARR[n]));e.gridDatacstm=[],""!=e.dailyViewCustomLayout&&(layOutNameList.Daily=e.dailyViewCustomLayout,e.gridDatacstm.push({layoutMode:N.LAYOUTMODE.Daily,Layoutname:e.dailyViewCustomLayout,mode:"("+t("translate")("lbl_Daily")+")"})),""!=e.weeklyViewCustomLayout&&(layOutNameList.Weekly=e.weeklyViewCustomLayout,e.gridDatacstm.push({layoutMode:N.LAYOUTMODE.Weekly,Layoutname:e.weeklyViewCustomLayout,mode:"("+t("translate")("lbl_Weekly")+")"})),e.gridCstmLayoutOptions.data=e.gridDatacstm}else e.gridCstmLayoutOptions.data=[];Ge()}catch(e){console.log("Error on custom Layout"+e.message)}},Ve=[{field:"name",maxWidth:300,name:"displayText",suppressRemoveSort:!0,sort:{direction:a.ASC,priority:0},width:"50%",groupingShowAggregationMenu:!1,enableColumnMenu:!0,visible:!0,displayName:t("translate")("lbl_Name"),enableCellEdit:!1,allowCellFocus:!0,enableColumnResizing:!0},{field:"value",name:"value",enableSorting:!1,width:"60%",groupingShowAggregationMenu:!1,enableColumnMenu:!0,visible:!0,displayName:t("translate")("lbl_Value"),enableCellEdit:!0,enableColumnResizing:!0,cellTemplate:'<div class="prefVal">{{COL_FIELD}}</div>',editableCellTemplate:'<div class="prefeSection select-input-container dropdownContainer"><input ng-readonly="true" class="hideIEClearBtn select-input" style="width:100% !important; height:20px;" type="INPUT_TYPE"  ui-grid-editor ng-model="MODEL_COL_FIELD" ng-click="grid.appScope.showHidePrefOption($event)" ng-keydown="grid.appScope.prefInputKeyDown($event)" /><strong  class="clickIcon" ng-mousedown="grid.appScope.showHidePrefOption($event)"></strong> <ul ng-show="grid.appScope.isPrefDropDownOn" class="ul-select dropdownList reportingDropdown"><li  ng-mouseover="grid.appScope.prefItemMouseOver($event)" ng-repeat="item in row.entity.options" ng-mousedown="grid.appScope.inlineEditPref(row.entity,item)" key="{{item.KEYVAL}}"  ng-class="{\'selected\': $first}" value="{{item.KEYVALDESC}}">{{item.KEYVALDESC}}</li></ul></div>'}],Ye=[{field:"Delete",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableColumnResizing:!1,enableFiltering:!1,width:"30",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,cellTemplate:'<div class="icon-edit ui-grid-cell-contents" title="{{grid.appScope.dltTitle}}"><input class="entry-delete" ng-click="grid.appScope.deleteCstmLayout(row.entity)" type="image" id="imgGridDeleteEdit" /></div>'},{suppressRemoveSort:!0,field:"Layoutname",name:"Layoutname",groupingShowAggregationMenu:!1,enableColumnMenu:!1,displayName:t("translate")("lbl_Layout"),enableCellEdit:!1,width:"254",cellTemplate:'<div class="ui-grid-cell">{{(row.entity.Layoutname)}} {{(row.entity.mode)}}</div>',allowCellFocus:!0}],je=function(){"0"!=e.designateConfig.designateOfEmp.EMPLID&&e.designateConfig.designateOfEmp.EMPLID!==e.loginDetail.empLoggedInId||g.retrieveInitialData(e.loginDetail.SESKEY,e.loginDetail.empLoggedInId).then(function(e){0==parseInt(e.RETINIT_OUT_OBJ.RETCD)&&localStorage.setItem("Initial_Data",JSON.stringify(e.RETINIT_OUT_OBJ))})};e.showHidePrefOption=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showHidePrefOption"),t.stopPropagation(),e.isPrefDropDownOn=!e.isPrefDropDownOn};var We=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateLayoutNameListOnDelete"),e==N.LAYOUTMODE.Daily?layOutNameList.Daily="":e==N.LAYOUTMODE.Weekly&&(layOutNameList.Weekly="")};e.deleteCstmLayout=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.deleteCstmLayout"),u.columnBlank){var a={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",a)}else{e.gridDatacstm=[];var n=i.layoutMode;F.removeGridLayout(e.loginDetail.SESKEY,e.loginDetail.EMPLID,n).then(function(a){"0"===a.REMOVEGRIDLAYOUT_OUT_OBJ.RETCD&&(We(n),i.mode=="("+t("translate")("lbl_Weekly")+")"?(e.weeklyViewCustomLayout="",u.weeklyCustomFlag=!1,e.overrideFlag=!0,e.prefereceList[1].keyVal="time",e.prefereceList[1].value="Time",delete e.prefereceList[1].options[2],$("#spnClmWeeklyViewCustomLayout").hide()):(e.dailyViewCustomLayout="",u.dailyCustomFlag=!1,e.overrideFlag=!0,e.prefereceList[0].keyVal="time",e.prefereceList[0].value="Time",delete e.prefereceList[0].options[4],$("#spnClmDailyViewCustomLayout").hide()),""!=e.dailyViewCustomLayout&&e.gridDatacstm.push({layoutMode:N.LAYOUTMODE.Daily,Layoutname:e.dailyViewCustomLayout,mode:"("+t("translate")("lbl_Daily")+")"}),""!=e.weeklyViewCustomLayout&&e.gridDatacstm.push({layoutMode:N.LAYOUTMODE.Weekly,Layoutname:e.weeklyViewCustomLayout,mode:"("+t("translate")("lbl_Weekly")+")"}),s(function(){e.gridCstmLayoutOptions.data=e.gridDatacstm,e.gridPrefOptions.data=e.prefereceList,i.layoutMode!=N.LAYOUTMODE.Weekly||e.isDailyMode?i.layoutMode==N.LAYOUTMODE.Weekly&&e.isDailyMode?5==e.optionWeekly&&(e.optionWeekly=1):i.layoutMode==N.LAYOUTMODE.Daily&&e.isDailyMode?5==e.optionDaily&&(localStorage.setItem("isMainGridLayoutChange",0),e.optionDaily=1,e.colPrefMenuTemp(e.optionDaily)):i.layoutMode!=N.LAYOUTMODE.Daily||e.isDailyMode||5==e.optionDaily&&(e.optionDaily=1):5==e.optionWeekly&&(localStorage.setItem("isMainGridLayoutChange",0),e.optionWeekly=1,e.colPrefMenuTemp(e.optionWeekly))}))})}};var Ke=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.savePreferences");var i=t("translate")("msg_PrefSaveExLang"),a=[];e.prefereceList.forEach(function(e){3==e.displayOrder&&e.currentLanguage!==e.keyVal&&(i=t("translate")("msg_PrefSave")),a.push({KEY:e.key,VAL:e.keyVal})});var n={PREF_OBJ:a},r=JSON.stringify(n);p.savePreferences(e.loginDetail.SESKEY,r,e.loginDetail.EMPLID).then(function(t){0==parseInt(t.SAVPREF_OUT_OBJ.RETCD)&&(gi([i]),je(),e.prefereceList[3].currentLanguage=e.prefereceList[3].keyVal)})};e.btnSavePreferenece=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.btnSavePreferenece"),Ke()};var ze=null;e.isPrefGrid=!1,e.isCstmLayoutGrid=!1,e.gridPrefOptions={enableColumnMoving:!1,enableColumnMenus:!1,disCardCellNavigateOnEnterKey:!0,rowHeight:22,showHeader:!0,enableGridMenu:!1,enableVerticalScrollbar:0,enableHorizontalScrollbar:0,enableCellSelection:!1,enableCellEditOnFocus:!0,enableFiltering:!1,enableRowSelection:!1,treeRowHeaderAlwaysVisible:!1,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!0,canSelectRows:!1,columnDefs:Ve,onRegisterApi:function(t){e.gridPrefApi=t,t.edit.on.beginCellEdit(e,function(t,i){e.isPrefDropDownOn=!0,ze=t}),t.edit.on.afterCellEdit(e,function(e,t,i,a){})}},e.gridCstmLayoutOptions={enableColumnMoving:!1,enableColumnMenus:!1,disCardCellNavigateOnEnterKey:!0,rowHeight:22,showHeader:!0,enableGridMenu:!1,enableVerticalScrollbar:0,enableHorizontalScrollbar:0,enableCellSelection:!1,enableCellEditOnFocus:!0,enableFiltering:!1,enableRowSelection:!1,treeRowHeaderAlwaysVisible:!1,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!0,canSelectRows:!1,columnDefs:Ye,onRegisterApi:function(t){e.gridPrefApi=t,t.edit.on.beginCellEdit(e,function(t,i){e.isPrefDropDownOn=!0,ze=t}),t.edit.on.afterCellEdit(e,function(e,t,i,a){})}},e.inlineEditPref=function(e,t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.inlineEditPref"),e.value=t.KEYVALDESC,e.keyVal=t.KEYVAL,s(function(){$("#prefGrid").focus()})},e.prefItemMouseOver=function(e){$(".dropdownList li").removeClass("selected"),$(e.target).addClass("selected")},e.prefInputKeyDown=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.prefInputKeyDown");var i="#prefGrid .dropdownList li.selected",a="#prefGrid .dropdownList li";if(13==t.keyCode){var n=$(i),r=angular.element(n).attr("key");if(void 0!==r&&void 0!==ze){var l=ze.options.filter(function(e){return e.KEYVAL===r});l.length>0&&e.inlineEditPref(ze,l[0])}}40==t.keyCode&&(n=$(i),$(a).removeClass("selected"),0==n.next().length?n.siblings().first().addClass("selected"):n.next().addClass("selected")),38==t.keyCode&&(n=$(i),$(a).removeClass("selected"),0==n.prev().length?n.siblings().last().addClass("selected"):n.prev().addClass("selected"))};var Xe=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.translateScopeVariables");try{e.prjScopeNoValidMsg=t("translate")("msg_PrjScopNotValid"),e.newTitle=t("translate")("lbl_NewEntryTitle"),e.newTitle2=t("translate")("lbl_NewEntry"),e.revClosedTitle=t("translate")("lbl_revClosed"),e.timeEntryTitle=t("translate")("lbl_timeEntry"),e.calTimeEntryTitle=t("translate")("lbl_calTimeEntry"),e.editTitle=t("translate")("lbl_editEntry"),e.editTitle2=t("translate")("lbl_editSelectedEntry"),e.noSelected=t("translate")("lbl_noSelected"),e.EditSelected=t("translate")("lbl_editSelectedEntry"),e.copySelected=t("translate")("lbl_copySelectedEntry"),e.pasteCopiedEntry=t("translate")("lbl_pasteCopiedEntry"),e.pasteCopiedSlctdEntry=t("translate")("lbl_pasteCopiedSlctdEntry"),e.noPaste=t("translate")("lbl_noPaste"),e.revClosed=t("translate")("lbl_revClosed"),e.cpyPstClnSlcted=t("translate")("lbl_cpyPstClnSlcted"),e.dltSlctdTitle=t("translate")("lbl_dltSlctd"),e.copyTodayTitle=t("translate")("lbl_copyTo",{copyTo:e.copyWeekTodayDate}),e.sbmtTimeICuptoTitle=t("translate")("msg_sbmtTimeICupto",{sbmtTimeICupto:t("date")(e.currentDate,"dd-MMM-yyyy")}),e.copyWeekTitle=t("translate")("msg_copyWeekTitle",{copyWeekTodayDateVar:e.copyWeekTodayDate}),e.sbmtDateTimeICuptoTitle=t("translate")("msg_sbmtDateTimeICupto"),e.chckbxICTitle=t("translate")("msg_chckbxIC"),e.submitEntry=t("translate")("msg_submitEntryTitle"),e.submitEntry2=t("translate")("msg_submitEntryTitle2"),e.rptNotSlctd=t("translate")("msg_rptNotSlctd"),e.srchEmpl=t("translate")("msg_srchEmpl"),e.srchByNameID=t("translate")("msg_srchByNameID")}catch(e){}},qe=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.clearSessionStorage"),sessionStorage.setItem("allICItems",""),sessionStorage.setItem("DescFav",null),sessionStorage.removeItem("FavActivityArray")},Qe=!0;e.init=function(){try{u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.init"),e.msgEr=[],e.msgFutureTime=[],u.summaryGridValue=[],e.dailyViewCustomLayout="",e.weeklyViewCustomLayout="",u.dailyCustomFlag=!1,u.weeklyCustomFlag=!1,localStorage.setItem("isMainGridLayoutChange",0),u.enableSaveLayout=!1,e.langType="true"==e.isEnglishLang?"EN":"FR",e.isDailyFlag=!1,e.isWeeklyFlag=!1,e.loginDetail=u.GetLoginDetail(!1,!0),e.isDescriptionPopupLoad=!1,e.cepfavourite=!1,e.isNegativeAllowed=!1,e.isGridFocus=!1,u.showRightMenuFlag=!1,e.showMenuOutsideGrid=!1,e.showEditFlag=!1,e.isPastebyDrag=!1,u.ctrlFlag=!1,u.shiftFlag=!1,u.columnBlank=!1,u.popupload=!1,e.beginEdit=!1,e.isSearchGrid=!1,e.isProjectTask=null,e.maskTest=String("?*?*?*?*?*?*?-?9?9?9?-?9?9?9"),e.renewalMessage=[],e.expandAllText="Collapse All",e.isDefaultExpanded=!0;var i=u.GetInitialDetail(!1,!0);if(Be(i),e.pasteMsg=e.noPaste,qe(),Qe=!0,Je(),void 0===e.designateConfig?(e.designateConfig={becomeDesignateList:[],showBecomeDesignate:!1,displayName:"",placeHolderVal:t("translate")("msg_notDsgnt")},e.designateConfig.designateOfEmp={EMPLID:"0",DISPNAME:""}):(Fe(),s(function(){c.updateDataSource(y.BroadCastUpdate.updateAll)},500)),void 0===e.allDesignateOfList&&(e.allDesignateOfList=[],Ze(e.loginDetail.SESKEY,e.loginDetail.EMPLID,!0)),e.initialDetail=u.GetInitialDetail(!1,!0),e.DOCURL=e.initialDetail.COMP_REC.DOCURL,e.GOCURL=e.initialDetail.COMP_REC.GOCURL,e.HLPURL=e.initialDetail.COMP_REC.HELPURL,void 0!==e.initialDetail.loginUsrInitialDetail.EMPL_REC.HASGCRL&&"Y"===e.initialDetail.loginUsrInitialDetail.EMPL_REC.HASGCRL&&(u.isLoginUsrGloCord=!0),null!=u.$stateParams.currentDate&&""!=u.$stateParams.currentDate){var a=parseInt(t("date")(u.$stateParams.currentDate,"yyyy")),n=parseInt(t("date")(u.$stateParams.currentDate,"MM")),r=parseInt(t("date")(u.$stateParams.currentDate,"dd")),l=new Date(a,n-1,r);e.currentDate=new Date(l.valueOf()),localStorage.removeItem("currentDate"),localStorage.removeItem("startDate"),localStorage.removeItem("isDailyMode")}else{var o=localStorage.currentDate;if(null!=o)u.$stateParams.currentDate=o,u.$stateParams.loadDate=localStorage.startDate,u.$stateParams.isDailyMode="true"==localStorage.isDailyMode,localStorage.removeItem("currentDate"),localStorage.removeItem("startDate"),localStorage.removeItem("isDailyMode"),l=new Date(u.$stateParams.currentDate),e.currentDate=new Date(l.valueOf());else{Le();var g=JSON.parse(localStorage.getItem("InitialRev_Month")),p=le(g.REVM_REC.STRTDTE),C=le(g.REVM_REC.ENDDTE),m=new Date;if(m.getTimezoneOffset()>0&&(m=new Date("sessiontimeout")),m.setHours(0,0,0,0),m>=p&&m<=C){var h=new Date,E=h.getTimezoneOffset();h.setMinutes(h.getMinutes()-E),e.currentDate=h}else e.currentDate=p;u.currentSelectedDate=angular.copy(e.currentDate)}}u.lastCurrentDate!=t("date")(e.currentDate,"yyyy-MM-dd")&&(u.expandedEntries=[],u.collapsedEntries=[],u.cntrExpandCollapse=0);try{e.isDailyMode=e.empCurrentPrefeObj.viewMode.isDailymode}catch(t){e.isDailyMode=!0}!0===e.cuttOffColumnDef&&(e.cuttOffColumnDef=!1,e.cutoffColumnDefNumber>4&&7!=e.cutoffColumnDefNumber||8==e.cutoffColumnDefNumber?(e.isDailyMode=!1,5==e.cutoffColumnDefNumber?e.cutoffColumnDefNumber=1:8==e.cutoffColumnDefNumber?e.cutoffColumnDefNumber=5:e.cutoffColumnDefNumber=2,e.optionDaily=e.cutoffColumnDefNumberDay,e.optionWeekly=e.cutoffColumnDefNumber):(7==e.cutoffColumnDefNumber&&(e.cutoffColumnDefNumber=5),e.optionDaily=e.cutoffColumnDefNumber,e.optionWeekly=e.cutoffColumnDefNumberWeek,e.isDailyMode=!0)),localStorage.isDailyMode=e.isDailyMode,e.weekDayToggle(!0,e.isDailyMode,"N"),e.WeeklyDataCopied=!1,e.DailyDataCopied=!1,void 0!=localStorage.getItem("DailyDataCopied")&&null!==localStorage.getItem("DailyDataCopied")&&(e.DailyDataCopied=!0),void 0!=localStorage.getItem("WeeklyDataCopied")&&null!==localStorage.getItem("WeeklyDataCopied")&&(e.WeeklyDataCopied=!0),e.selectedForDelete=!1,e.IsSelectedForAll=!1,e.IsTodayCopied=!1,e.IsWeekCopied=!1,e.IsClone=!1,e.IspasteAdvance=!1;try{e.isDailyMode?e.isDailyMode:$(".week_").click(),$(".day_").click()}catch(e){}var D=void 0,v=new Date,f=new Date(e.currentDate.valueOf());f=t("date")(new Date(f.getFullYear(),f.getMonth(),f.getDate()),"yyyy-MM-dd");var T=["January","February","March","April","May","June","July","August","September","October","November","December"],b=null,S=t("date")(e.currentDate.valueOf(),"yyyy-MM-dd"),w=new Date(e.currentDate.valueOf());if(S=re(S),null!=(b=u.chekRevDateInLocalStorage(S,t("translate")("msg_invalidSession"),!0)))si(b,v,T,w);else{var O=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(O.SESKEY,f,function(e){if(void 0!=(D=e.LOADREVM_OUT_OBJ.REVM_ARR)&&"undefined"!=D)for(var t=0;t<D.length;t++)if(null!=D[t]&&void 0!=D[t]&&void 0!=D[t].STRTDTE&&S>=re(D[t].STRTDTE)&&S<=re(D[t].ENDDTE)){b=D[t];break}null!=b&&si(b,v,T,w)})}}catch(e){$(".my-cloak").removeClass("my-cloak"),console.log("init"+e),console.log(e.message)}j(),s(function(){j()},2e3)};var Ze=function(i,a,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getBecomeDesignateList"),e.allDesignateOfList=[];var r=[];M.loadBecomeDesignate(i,a).then(function(i){if(0===parseInt(i.LOADBECOMEDESIG_OUT_OBJ.RETCD)){if(null!=(r=i.LOADBECOMEDESIG_OUT_OBJ.EMPL_ARR)&&"[object Array]"!=Object.prototype.toString.call(r)){var a=r.DESIG_OBJ;r=[],null!=a&&r.push(a)}if(null!==r&&r.length>0){var l=-1,o=-1;r.forEach(function(t){l++,t.EMPLID!=e.loginDetail.empLoggedInId?t.UIDISPNAME=t.DISPNAME.trim():o=l}),e.designateConfig.placeHolderVal=t("translate")("msg_DsgntPlcHldr"),o>-1&&r.splice(o,1),r=t("orderBy")(r,["UIDISPNAME"]),n?(e.loginUserAllDesignate=JSON.parse(JSON.stringify(r)),e.allDesignateOfList=JSON.parse(JSON.stringify(r))):e.allDesignateOfList=r}}else n?(e.loginUserAllDesignate=r,e.allDesignateOfList=r):e.allDesignateOfList=r;e.designateConfig.becomeDesignateList=r})};e.$on("updateUiGrid",function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.updateUiGrid"),void 0!=e.gridApi&&"1"==localStorage.clearGroupingDateChanged&&(e.clearGrouping=!0,localStorage.clearGroupingDateChanged="0"),e.currentDate=new Date(i.value.valueOf());var a=new Date(i.value.valueOf());a.setDate(a.getDate()+1),a.setDate(a.getDate()-7);for(var n=0;n<7&&0!=a.getDay();n++)a.setDate(a.getDate()+1);e.weeklyStartDate=new Date(a.valueOf()),"true"==localStorage.isDailyMode?e.isDailyMode=!0:"false"==localStorage.isDailyMode&&(e.isDailyMode=!1),e.isDailyMode?e.GetData(e.isDailyMode,i.value.valueOf()):e.GetData(e.isDailyMode,a.valueOf()),angular.element("#divdatepicker").focus()}),e.isDailyMode=!0;var et=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.showHideTab"),u.pastedRecords=!1,u.rowIndex=void 0,$(".tab1").css("display","block"),i){e.pasteDailyWeekly=t("translate")("lbl_pasteDailyWeekly"),1!=e.countDay&&localStorage.setItem("AllcolumnHidden",-1);try{void 0!=e.optionDaily?e.bottomColPrefMenu(e.optionDaily):e.bottomColPrefMenu(1)}catch(e){}}else{e.pasteWeeklyDaily=t("translate")("lbl_pasteWeeklyDaily"),1!=e.countWeek&&localStorage.setItem("AllcolumnHidden",-1);try{void 0!=e.optionWeekly?e.bottomColPrefMenu(e.optionWeekly):e.bottomColPrefMenu(1)}catch(e){}}};e.weekDayToggle=function(i,a,n,r){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.weekDayToggle"),"1"==localStorage.getItem("isMainGridLayoutChange"))l=!u.dailyCustomFlag&&"true"==localStorage.isDailyMode||!u.weeklyCustomFlag&&"false"==localStorage.isDailyMode?{msgList:[t("translate")("msg_cfrmMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"ConfrmSaveMainGrdLayout",methodName:"wkDayToggle"}:{msgList:[t("translate")("msg_overrideMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"OverrideSaveMainGrdLayout",methodName:"wkDayToggle"},w.openModalPopUp("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",l);else{if(e.multiSelectFlag=!1,r&&(e.showEditFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,u.showRightMenuFlag=!1,e.showNewFlag=!1),a==e.isDailyMode&&!i)return;if(u.columnBlank){var l={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",l)}else if(e.refreshGridMain=!0,"Y"==n&&(u.expandedEntries=[],u.collapsedEntries=[],u.cntrExpandCollapse=0),e.gridData=[],e.itemsDataFinal1=[],e.isDailyMode=a,localStorage.isDailyMode=a,et(a),e.isDailyMode=a,localStorage.isDailyMode=e.isDailyMode,a)$(".showInDay").css("display","inline-block"),$(".showInWeek").css("display","none"),$(".week_.ui-gradient").css("display","block"),$(".day_.ui-gradient").css("display","none");else{e.initialDetail=u.GetInitialDetail(!1,!0);var o=new Date(e.currentDate.valueOf());o.setDate(o.getDate()+1),o.setDate(o.getDate()-7);for(var s=0;s<7&&0!=o.getDay();s++)o.setDate(o.getDate()+1);e.weeklyStartDate=new Date(o.valueOf()),$(".showInDay").css("display","none"),$(".showInWeek").css("display","inline-block"),"block"==$(".expand-footer").css("display")&&($(".expand-footer").css("display","none"),$(".show-dayWeek").css("display","block"),$(".sub_popup-action .cancel-cross-left").css("display","none"),$(".sub_popup-action .cancel-cross").css("display","block")),$(".week_.ui-gradient").css("display","none"),$(".day_.ui-gradient").css("display","block")}r&&(u.countmove=0)}},e.showCEPFavourites=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showCEPFavourites"),$(".searchCep.ng-scope").css("display","none"),e.cepfavourite=!0,t.entity.CEP_REC.CLIENO;var i={sessionKey:e.loginDetail.SESKEY,empId:e.loginDetail.EMPLID,cepCode:"",reordPerPage:50,popUpName:"CEPFavPopUp",isSearchMode:!1,companyId:e.initialDetail.COMP_REC.COMPID,domainURL:e.domainURL,isBroadcast:!0,rowDetail:t.entity};w.openModalPopUp("Desktop/NewEntry/templates/CEPCodeFavorites.html","CEPCodeFavDesktopCtrl",i)},u.ctrlFlag=!1,e.showProjComponentPopup=function(i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.showProjComponentPopup"),!e.IsshowProjComponent){e.saveOnCancelPopUp=e.isRowEdit,u.columnBlank&&(i=null),e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity!=e.selctProjCmp&&e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity!=t("translate")("activity_Title")&&(u.columnBlank=!1);var n={components:e.projectListData,isSelected:a,defaultDesc:null!=i?i.CTDESC:"",isEditMode:!1,timeEntery:i,isBroadcast:!0};e.IsshowProjComponent=!0,e.openModalCtrl="ProjectComponentCtrl",e.open("Desktop/NewEntry/templates/ComponentTask.html","ProjectComponentCtrl",n),e.saveFlag=!1}},e.gridActComplete=function(e,t){},e.loadActivity=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadActivity"),!e.IsshowProjComponent){e.saveOnCancelPopUp=e.isRowEdit,e.isSameCompany=!1,(null!=e.cepObj.selected?e.cepObj.selected.COMPID==e.initialDetail.COMP_REC.COMPID:t.COMPID==e.initialDetail.COMP_REC.COMPID)&&(e.isSameCompany=!0);var i={isSameCompany:e.isSameCompany,cepCompId:null==e.cepObj.selected?null:e.cepObj.selected.COMPID,isCepValid:!0,compRecCompId:e.initialDetail.COMP_REC.COMPID,isBroadcast:!0};e.IsshowProjComponent=!0,e.openModalCtrl="ActivityCtrl",e.open("Desktop/NewEntry/templates/Activity.html","ActivityDesktopCtrl",i),e.saveFlag=!1}},e.$on("loadDesktopActivityProject",function(t,i){e.loadDesktopActivityProject(e.row,!0)}),e.loadDesktopActivityProject=function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadDesktopActivityProject"),e.cepObj.selected=angular.copy(e.cepObj.selectedBegin),e.isProjectTask=e.isProjectTaskBegin,e.isScopeReq=!1;var a=null,n=!1;void 0!=t&&void 0!=t.entity&&(a={CMPTID:t.entity.CMPTID,TSKID:t.entity.TSKID,CTDESC:t.entity.CTDESC},null!=t.entity.SCOID&&0!=t.entity.SCOID&&""!=t.entity.SCOID&&(a.SCOPID=t.entity.SCOID)),void 0!=e.row&&(t=e.row),void 0!=t&&void 0!=t.entity?e.cepObj.selected=t.entity.CEP_REC:void 0!=t&&(e.cellNavigate||e.cepfavourite)&&(e.cepObj.selected=angular.copy(t)),null!=e.cepObj.selected&&void 0!==e.cepObj.selected.CATID&&(e.initialDetail=u.GetInitialDetail(!1,!0),parseInt(e.cepObj.selected.CATID)>0?(e.IsActivity=!1,o.searchPRCCode(e.loginDetail.SESKEY,e.cepObj.selected.CATID,e.cepObj.selected.PRJID).then(function(t){if(0==parseInt(t.LOADPCOMTSK_OUT_OBJ.RETCD)){"[object Array]"!=Object.prototype.toString.call(t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM)&&(o=t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM,t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM=[],t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM.push(o.PCOM_OBJ)),t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM.sort(function(e,t){return e.ORD-t.ORD});var r=[];e.projectListData=t.LOADPCOMTSK_OUT_OBJ.PCAT_ARR;for(var l=0;l<e.projectListData.PCAT_OBJ.ARR_PCOM.length;l++){var o={CMPTID:e.projectListData.PCAT_OBJ.ARR_PCOM[l].CMPTID,CMPTCD:e.projectListData.PCAT_OBJ.ARR_PCOM[l].CMPTCD,DES:e.projectListData.PCAT_OBJ.ARR_PCOM[l].DES,ACTIVE:e.projectListData.PCAT_OBJ.ARR_PCOM[l].ACTIVE,DESREQ:e.projectListData.PCAT_OBJ.ARR_PCOM[l].DESREQ,DEFDES:e.projectListData.PCAT_OBJ.ARR_PCOM[l].DEFDES,ACTICD:e.projectListData.PCAT_OBJ.ARR_PCOM[l].ACTICD,ORD:e.projectListData.PCAT_OBJ.ARR_PCOM[l].ORD,ARR_PTSK:e.projectListData.PCAT_OBJ.ARR_PCOM[l].ARR_PTSK};r.push(o)}e.projectListData.PCAT_OBJ.ARR_PCOM=r,e.projectListData.PCAT_OBJ.ARR_PCOM.sort(function(e,t){return e.ORD-t.ORD});var s=e.cepObj.selected.CLIENO.toString()+"-"+e.cepObj.selected.ENGNO.toString()+"-"+e.cepObj.selected.PRJNO.toString();e.oldCepEntry==s&&(n=!0),(e.cellNavigate||i||e.cepfavourite)&&(e.beginEdit=!1,e.showProjComponentPopup(a,n))}})):(e.IsActivity=!0,(e.cellNavigate||i||e.cepfavourite)&&(e.beginEdit=!1,e.loadActivity(t))))},e.cepObj={selected:null},e.cpeList=function(t){return u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.cpeList"),e.cpecodeList},e.mrefreshResults=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.mrefreshResults"),u.$stateParams.IsEditMode&&(e.timeEntry=JSON.parse(localStorage.getItem("Time_Entry")),void 0!==typeof e.timeEntry.CEP_REC&&(t.search=e.timeEntry.CEP_REC.CLIENO.toString()+"-"+e.timeEntry.CEP_REC.ENGNO.toString()+"-"+e.timeEntry.CEP_REC.PRJNO.toString())),e.select=t.search,e.activity.activityListData=[];var i=t.search;i.length>0?(e.IsSearchDropdown&&(e.PageNumber=1),l.searchCEPCode(e.loginDetail.SESKEY,e.loginDetail.EMPLID,i,e.PageNumber,e.DataPerPage,"",e.initialDetail.COMP_REC.COMPID,e.domainURL).then(function(i){if(0==parseInt(i.LOOKCEP_OUT_OBJ.RETCD)){var a=i.LOOKCEP_OUT_OBJ.CEP_ARR.length;i.LOOKCEP_OUT_OBJ.CEP_ARR.splice(a-1,1),void 0!==a&&(e.cpeListData=[],e.cpeListData=i.LOOKCEP_OUT_OBJ.CEP_ARR,e.TotalPages=parseInt(parseInt(i.LOOKCEP_OUT_OBJ.TOTAVAIL)/e.DataPerPage),t.items=e.cpeListData,u.$stateParams.IsEditMode&&e.EditMode())}})):u.$stateParams.IsSearch||(e.cpeListData=[],t.items=e.cpeListData)},e.closeSearchGridCep=function(t){$(".searchCep.ng-scope").css("display","none"),e.beginEdit=!1,e.cellNavigate=!0,e.loadDesktopActivityProject(t.CEP_REC,!0)},e.searchGridCep=function(t){return!(!(t.isSelected&&e.beginEdit&&e.isSearchGrid)||"CEP_REC.CLIENO"!=e.colDefName&&"data.CEP_REC.CLIENO"!=e.colDefName)},e.gridCepComplete=function(i,a,n){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.gridCepComplete"),Rt)return!1;void 0!=e.cepEditCodeWithoutMask&&e.cepEditCodeWithoutMask.toLowerCase()!==i.CEP_REC.CLIENO.replace(/-/g,"").toLowerCase()&&null!==a&&(e.cepMasking="?*?*?*?*?*?*?-?9?9?9?-?9?9?9"),e.isCepFavSet=!1,void 0!=n&&(u.gridrow=n);var r="",o="";e.getCurrentFocus(),e.isProjectTaskBegin=null,e.PageNumber=1,e.DataPerPage=10;var s=i.CEP_REC.CLIENO.toUpperCase().trim();12==i.CEP_REC.CLIENO.length?(s=i.CEP_REC.CLIENO.substring(0,6)+"-"+i.CEP_REC.CLIENO.substring(6,9)+"-"+i.CEP_REC.CLIENO.substring(9,12),i.CEP_REC.CLIENO=s.toUpperCase().trim()):(""!=(o=i.CEP_REC.CLIENO.toUpperCase().trim().split("-"))&&void 0!=o&&o.length>2?(o=o[0].toString()+o[1].toString()+o[2].toString()).length>8&&(r=_.isExcepCepCode(o)):s.length>8&&(r=_.isExcepCepCode(s)),r.isExpCep?s=r.cepWithMask:e.cnt=1),s.length<8&&null!=a&&(e.cnt=1),(14==s.length||""!=r&&r.isExpCep)&&(e.cnt=null,l.searchCEPCode(e.loginDetail.SESKEY,e.loginDetail.EMPLID,s,e.PageNumber,e.DataPerPage,"",e.initialDetail.COMP_REC.COMPID,y.DOMAINURL).then(function(i){if(0==parseInt(i.LOOKCEP_OUT_OBJ.RETCD)){if(e.gridOptions.data[e.currentFocused.rowIndex].CEP_REC.CHARBASIS=i.LOOKCEP_OUT_OBJ.CEP_ARR[0].CHARBASIS,void 0!==i.LOOKCEP_OUT_OBJ.CEP_ARR.length&&(e.cepListDetails=i.LOOKCEP_OUT_OBJ.CEP_ARR,e.cepListDetails=e.cepListDetails.filter(function(e){return"000000"!==e.CLIENO})),"[object Array]"!=Object.prototype.toString.call(i.LOOKCEP_OUT_OBJ.CEP_ARR)){var r=i.LOOKCEP_OUT_OBJ.CEP_ARR;i.LOOKCEP_OUT_OBJ.CEP_ARR=[],i.LOOKCEP_OUT_OBJ.CEP_ARR.push(r.CEP_DET_OBJ)}for(var o=0;o<i.LOOKCEP_OUT_OBJ.CEP_ARR.length;o++)0==i.LOOKCEP_OUT_OBJ.CEP_ARR[o].CLIEID&&(i.LOOKCEP_OUT_OBJ.CEP_ARR.splice(o,1),o--);void 0!=i.LOOKCEP_OUT_OBJ.CEP_ARR[0]?("Y"==i.LOOKCEP_OUT_OBJ.CEP_ARR[0].CEPFAV?(e.ISINLINECEPFAV=!0,e.isCepFavSet=!0):(e.ISINLINECEPFAV=!1,e.isCepFavSet=!0),l.loadCEPDetail(e.loginDetail.SESKEY,i.LOOKCEP_OUT_OBJ.CEP_ARR[0].CLIEID,i.LOOKCEP_OUT_OBJ.CEP_ARR[0].ENGID,i.LOOKCEP_OUT_OBJ.CEP_ARR[0].PRJID,e.domainURL).then(function(t){0==parseInt(t.LOADCEP_OUT_OBJ.RETCD)&&(e.gridOptions.data[e.currentFocused.rowIndex].CEP_REC.CHARBASIS=t.LOADCEP_OUT_OBJ.CEP_REC.CHARBASIS,e.cpeListData=[],e.cpeListData.push(t.LOADCEP_OUT_OBJ.CEP_REC),e.row=t.LOADCEP_OUT_OBJ.CEP_REC,e.cepObj.selectedBegin=e.cpeListData[0],null!=a&&(e.isSearchGrid=!0,e.loadDesktopActivityProject(n,"")),t.LOADCEP_OUT_OBJ.CEP_REC.CATID>0?e.isProjectTaskBegin=!0:e.isProjectTaskBegin=!1)})):void 0!=n&&(e.cepObj.selectedBegin=n.CEP_REC)}0==i.LOOKCEP_OUT_OBJ.CEP_ARR.length&&null==e.cnt&&null!=a&&($.growl({title:"Message",message:t("translate")("msg_noMatch")}),e.cnt=1)}))},e.rightClickObj="",e.pasteByCtrlClick=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteByCtrlClick");try{var i=e.gridApi.selection.getSelectedRows();e.checkRevMonthFlag?e.isDailyMode&&!e.isDailyFlag&&e.WeeklyDataCopied&&0!=i.length&&e.isNegativeAllowed?gi([t("translate")("lbl_pasteDailyWeekly")],"Message",!0):!e.isWeeklyFlag&&!e.isDailyMode&&e.DailyDataCopied&&0!=i.length&&e.isNegativeAllowed?gi([t("translate")("lbl_pasteWeeklyDaily")],"Message",!0):e.isDailyMode&&"true"==localStorage.getItem("DailyDataCopied")||!e.isDailyMode&&"true"==localStorage.getItem("WeeklyDataCopied")&&e.isNegativeAllowed?isPasteOnProgress||(isPasteOnProgress=!0,e.pasteRecords(e.isDailyMode,1)):gi([e.noPaste],"Message",!0):gi([t("translate")("lbl_revClosed")],"Message",!0),u.showRightMenuFlag=!1}catch(e){isPasteOnProgress=!1}},e.deleteByRightClick=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.deleteByRightClick"),e.selectedRows=[];var t=!0,i=e.gridApi.selection.getSelectedRows(),a=angular.copy(i);a.filter(function(e){return"N"==e.TIMSUB.toUpperCase()}).length<1&&(t=!1);var n="",r=0,l=0;if(t){for(g=0;g<a.length;g++)e.selectedRows.push(a[g]);if(null!=e.selectedRows&&0!=e.selectedRows.length||e.selectedRows.push(e.rightClickObj),null!=e.selectedRows){var o=[],s=!1,d=null;if(!e.isDailyMode){var c=new Date(e.weeklyStartDate.valueOf());c.setHours(0,0,0,0),d=U.getWkDayOnOpenCloseRevStatus(c)}for(var g=0;g<e.selectedRows.length;g++)if(e.isDailyMode)r++,"Y"!=e.selectedRows[g].TIMSUB.toUpperCase()?o.push(parseFloat(e.selectedRows[g].TEID)):l++;else if("Y"!=e.selectedRows[g].data.TIMSUB.toUpperCase()){var p=e.selectedRows[g],C=U.getDeleteTeIdObj(p,d);s=!!s||C.isTEInOpenREVWeekExist,n+=(""==n?"":",")+C.tEIdsStr,l+=C.invalidCount,r+=U.countNoOfTimeEntry(p)}else{var p=e.selectedRows[g],m=U.countNoOfTimeEntry(p);r+=m,l+=m}e.deleteTimeEntries(e.isDailyMode,e.isDailyMode?o:n.split(","),l,r,s)}u.showRightMenuFlag=!1}},e.pasteAdvancedDatePicker=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteAdvancedDatePicker"),u.showRightMenuFlag=!1,$("#pasteAdv").css("display","block")},e.keyUpGrid=function(e){u.ctrlFlag=!1,u.shiftFlag=!1};var tt={menuWidth:218,leftSecWidth:240,menuHeight:66};e.rightClick=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.rightClick"),tt.leftSecWidth=240,e.showEditTitle(),e.showNewFlag=!1,e.showEditFlag=!1,e.copytoTodayCuttOff=!1,e.afterTecuttOff=!1,checkAfterCuttOff(),e.rightClickObj=t.target,e.showEditFlag=!1,e.isShowSubmitMenu=!1,u.showRightMenuFlag=!1,$(".edit_MenuOutsideGrid").css("display","block"),tt.mainGridWidth=parseInt($(".main-area").width()),tt.mainGridHeight=parseInt($(".main-area").height()),"0px"==$(".sidebarSide").css("left")&&(tt.leftSecWidth=60);var i=t.pageX-tt.leftSecWidth+10,a=e.isDailyMode?150:120,n=t.pageY-a,r=tt.mainGridWidth-tt.menuWidth;i>r&&(i-=tt.menuWidth),n>=(r=tt.mainGridHeight-tt.menuHeight)&&(n-=tt.menuHeight),$(".edit_MenuOutsideGrid").css({left:i+"px",top:n+"px"}),e.showMenuOutsideGrid=!0,t.preventDefault(),t.stopPropagation()},e.checkClick=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.checkClick"),e.showColViewMenu=!1,u.showRightMenuFlag=!1,e.showMenuOutsideGrid=!1,$("#pasteAdv").css("display","none"),e.isShowSubmitMenu,$(".edit_Menu.submitMainMenu").css("display","block"),e.isShowSubmitMenu=!1},e.colViewVar=1,e.colprefBtnText="Column View: Time";var it=function(t,i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.showHideGridColumns");var n=!1;("3px"==$(".right-section").css("right")&&"3px"==$(".sidebar").css("left")||window.innerWidth<950)&&(n=!0);for(var r=0;r<t.length;r++)0!=t[r].enableHiding&&(i.indexOf(a+t[r].name.toLowerCase()+a)>-1?t[r].visible=!0:t[r].visible=!1,t[r].visible&&"ProjectActivity"==t[r].name&&n&&!e.isDailyMode&&(t[r].width="2%"))},at=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateColWidthOnSelectCustomLayout");var t=!1;if(("3px"==$(".right-section").css("right")&&"3px"==$(".sidebar").css("left")||window.innerWidth<950)&&(t=!0),t)for(var i=0;i<e.length;i++)if(e[i].visible&&"ProjectActivity"==e[i].name){e[i].width="2%";break}};e.colPrefMenuTemp=function(i){switch(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.colPrefMenuTemp"),i){case 1:$(".main-area-bottom .bottomPopup ul li span").removeClass("active"),e.colprefBtnText=t("translate")("lbl_colView")+t("translate")("lbl_Time"),e.isDailyMode?(e.countDay=3,e.optionDaily=1,it(pt,"#cep_rec.charbasis#projectactivity#hrs#des#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=pt})):(it(Tt,"#data.cep_rec.charbasis#projectactivity#hrs1#hrs2#hrs3#hrs4#hrs5#hrs6#hrs7#hrstotal#des#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=Tt}),e.colViewType="Time",e.countWeek=3,e.optionWeekly=1,e.calTotalView(3)),$("#spnClmDailyViewTime").addClass("active");break;case 2:$(".main-area-bottom .bottomPopup ul li span").removeClass("active"),e.colprefBtnText=t("translate")("lbl_colView")+t("translate")("lbl_TimeIncCT"),e.isDailyMode?(e.countDay=4,e.optionDaily=2,it(st,"#cep_rec.charbasis#component#task#scope#hrs#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=st})):(it(bt,"#data.cep_rec.charbasis#component#task#scope#hrs1#hrs2#hrs3#hrs4#hrs5#hrs6#hrs7#hrstotal#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=bt}),e.colViewType="TimeCT",e.countWeek=5,e.optionWeekly=2,e.calTotalView(5)),$("#spnClmDailyViewTimeIC").addClass("active");break;case 3:$(".main-area-bottom .bottomPopup ul li span").removeClass("active"),e.colprefBtnText=t("translate")("lbl_colView")+t("translate")("lbl_IC"),e.countDay=4,e.optionDaily=3,it(Nt,"#cep_rec.charbasis#projectactivity#icdesc#icchrge#des#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=Nt}),$("#spnClmDailyViewIC").addClass("active");break;case 4:$(".main-area-bottom .bottomPopup ul li span").removeClass("active"),e.colprefBtnText=t("translate")("lbl_colView")+t("translate")("lbl_ICIncCT"),e.countDay=5,e.optionDaily=4,it($t,"#cep_rec.charbasis#component#task#scope#icdesc#icchrge#","#"),e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=$t}),$("#spnClmDailyViewICNCT").addClass("active");break;case 5:if($(".main-area-bottom .bottomPopup ul li span").removeClass("active"),e.isDailyMode){e.optionDaily=5,e.colprefBtnText=t("translate")("lbl_colView")+e.dailyViewCustomLayout,0===ct.length&&(l=JSON.parse(JSON.stringify(pt)),"2"===te.daily.parentColumnViewId?l=JSON.parse(JSON.stringify(st)):"3"===te.daily.parentColumnViewId?l=JSON.parse(JSON.stringify(Nt)):"4"===te.daily.parentColumnViewId&&(l=JSON.parse(JSON.stringify($t))),(ct=F.getColumnDef(l,te.daily.GCOLUMNS))[0].cellClass="gridMainGrid",ct[0].headerCellClass="monthendClass7",e.countDay=u.countColumn);for(var n=[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],r=0;r<ct.length;r++)ct[r].menuItems=n;e.gridOptions.columnDefs=[],s(function(){e.gridOptions.columnDefs=ct}),$("#spnClmDailyViewCustomLayout").addClass("active")}else{if(e.optionWeekly=5,e.colprefBtnText=t("translate")("lbl_colView")+e.weeklyViewCustomLayout,0===gt.length){var l=JSON.parse(JSON.stringify(Tt));"2"===te.weekly.parentColumnViewId&&(l=JSON.parse(JSON.stringify(bt))),(gt=F.getColumnDef(l,te.weekly.GCOLUMNS))[0].cellClass="gridMainGrid",gt[0].headerCellClass="monthendClass8",e.countWeek=u.countColumn}for(var o=[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],r=0;r<gt.length;r++)gt[r].menuItems=o;e.gridOptions.columnDefs=[],at(gt),s(function(){e.gridOptions.columnDefs=gt}),$("#spnClmWeeklyViewCustomLayout").addClass("active")}}1!=e.countDay&&localStorage.setItem("AllcolumnHidden",-1),e.showColViewMenu=!1,localStorage.removeItem("retrieveTimeEntriesDataSaved"),localStorage.removeItem("savedTimeEntriesRevDates"),e.gridApi.core.notifyDataChange(a.dataChange.ALL),e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate)},e.colPrefMenu=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.colPrefMenu"),u.columnBlank)i={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0},e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",i);else if("true"==localStorage.isDailyMode?(u.dailyCustomFlag?e.colViewVarTemp=5:e.colViewVarTemp=4,void 0!=e.optionDaily&&(e.colViewVar=e.optionDaily),e.colViewVar==e.colViewVarTemp?e.colViewVar=1:e.colViewVar+=1):(void 0!=e.optionWeekly&&(e.colViewVar=e.optionWeekly),4==e.colViewVar&&(e.colViewVar=1),u.weeklyCustomFlag?5==e.colViewVar?e.colViewVar=1:2==e.colViewVar?e.colViewVar=5:e.colViewVar+=1:2==e.colViewVar?e.colViewVar=1:e.colViewVar+=1),"1"==localStorage.getItem("isMainGridLayoutChange")){if(!u.dailyCustomFlag&&"true"==localStorage.isDailyMode||!u.weeklyCustomFlag&&"false"==localStorage.isDailyMode)i={msgList:[t("translate")("msg_cfrmMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"ConfrmSaveMainGrdLayout",methodName:"colViewToggle",option:e.colViewVar};else var i={msgList:[t("translate")("msg_overrideMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"OverrideSaveMainGrdLayout",methodName:"colViewToggle",option:e.colViewVar};w.openModalPopUp("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",i)}else e.colPrefMenuTemp(e.colViewVar)},e.showColViewMenu=!1,e.colPrefShowMenu=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.colPrefShowMenu"),u.columnBlank){var i={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",i)}else e.showColViewMenu=!e.showColViewMenu,e.showColViewMenu?angular.element("#changedMenu").addClass("bgActive"):angular.element("#changedMenu").removeClass("bgActive")};var nt=t("translate")("lbl_item"),rt=t("translate")("lbl_items");e.getHeader=function(e){var t=e.treeNode.aggregations[0].groupVal;return"Component"!=e.treeNode.aggregations[0].col.name&&"ICCHRGE"!=e.treeNode.aggregations[0].col.name&&"ICDESC"!=e.treeNode.aggregations[0].col.name||""!=e.treeNode.aggregations[0].groupVal.trim()||(t="Null"),e.treeNode.aggregations[0].col.displayName+": "+t+" ("+e.treeNode.aggregations[0].value+(e.treeNode.aggregations[0].value>1?" "+rt+")":" "+nt+")")},e.colViewType="",e.bottomColPrefMenu=function(i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.bottomColPrefMenu"),a&&("true"==localStorage.isDailyMode?e.optionDaily:e.optionWeekly)===i)e.showColViewMenu=!1;else if(angular.element("#changedMenu").removeClass("bgActive"),void 0==e.countDay&&(e.countDay=3),"1"==localStorage.getItem("isMainGridLayoutChange")){if(!u.dailyCustomFlag&&"true"==localStorage.isDailyMode||!u.weeklyCustomFlag&&"false"==localStorage.isDailyMode)n={msgList:[t("translate")("msg_cfrmMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"ConfrmSaveMainGrdLayout",methodName:"colViewToggle",option:i};else var n={msgList:[t("translate")("msg_overrideMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"OverrideSaveMainGrdLayout",methodName:"colViewToggle",option:i};w.openModalPopUp("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",n)}else e.colPrefMenuTemp(i)},e.onFocusCep=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.onFocusCep"),e.oldCep=t.CEP_REC.CLIENO},e.items={name:"Alabama",abbreviation:"AL"},e.refreshResults=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.refreshResults"),e.select=t.replace("-"," ").trim(),(t=(t=t).replace("-"," ").trim()).length>0?(e.IsSearchDropdown&&(e.PageNumber=1),l.searchCEPCode(e.loginDetail.SESKEY,e.loginDetail.EMPLID,t,e.PageNumber,e.DataPerPage,"",e.initialDetail.COMP_REC.COMPID,e.domainURL).then(function(t){0==parseInt(t.LOOKCEP_OUT_OBJ.RETCD)&&void 0!==t.LOOKCEP_OUT_OBJ.CEP_ARR.length&&(e.cpeListData=t.LOOKCEP_OUT_OBJ.CEP_ARR,e.cpeListData=e.cpeListData.filter(function(e){return"000000"!==e.CLIENO}),e.TotalPages=parseInt(parseInt(t.LOOKCEP_OUT_OBJ.TOTAVAIL)/e.DataPerPage),e.childDataTransfer())})):u.$stateParams.IsSearch||(e.cpeListData=[])},e.name="",e.onItemSelected=function(){},e.openEntryTitle=t("translate")("lbl_openEntry"),e.dltTitle=t("translate")("btn_Delete"),e.sbmtdTitle=t("translate")("lbl_entrySubmtd"),e.nonBill="Non "+t("translate")("lbl_entrySubmtd")+"able",e.addFavActInline=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.addFavActInline"),e.searchText="";var i={VARCHAR2:[t.ACTICD]},a=JSON.stringify(i);S.addActivityFavorites(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(e){0==e.ADDACTIFAV_OUT_OBJ.RETCD&&A.updateFavActLclStorage(!0,[t],1)})},e.removeFavActInline=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.removeFavActInline");var i={VARCHAR2:[]};null!=t&&(i.VARCHAR2=[t.ACTICD]);var a=JSON.stringify(i);S.removeActivityFavorites(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(e){0==e.REMACTIFAV_OUT_OBJ.RETCD&&A.updateFavActLclStorage(!1,[t],1)})},e.isFavDescription=function(t,i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.isFavDescription"),void 0==i&&(i=JSON.parse(sessionStorage.getItem("DescFav"))),t.length>0){var a=k.isDescInFavList(t,i);e.IsInlineDescFav=!!a}},e.addFavDescInline=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.addFavDescInline"),t.trim().length>0){t=t.replace(/\t/g," ");var i=JSON.parse(sessionStorage.getItem("DescFav"));if(k.isDescInFavList(t,i))return;l.addDescriptionFavorite(e.loginDetail.SESKEY,e.loginDetail.EMPLID,JSON.stringify(t)).then(function(e){if(0==e.ADDDESCFAV_OUT_OBJ.RETCD){var t=e.ADDDESCFAV_OUT_OBJ.DESCOUT;k.updateFavDescLocalStorage(!0,[t],!1,2)}})}},e.removeFavDescInline=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.removeFavDescInline"),t.trim().length>0){JSON.parse(sessionStorage.getItem("DescFav"));var i={VARCHAR2:[t]},a=JSON.stringify(i);l.removeDescriptionFavorites(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(e){0==e.REMDESCFAV_OUT_OBJ.RETCD&&k.updateFavDescLocalStorage(!1,[t],!1,2)})}},e.removeCepInlineFav=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.removeCepInlineFav");var i={NUMBER:[t.entity.CEP_REC.PRJID]},a=JSON.stringify(i);l.removeCEPFavorites(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(t){0==parseInt(t.REMCEPFAV_OUT_OBJ.RETCD)&&(c.updateDataSource(y.BroadCastUpdate.updateFavCep),e.ISINLINECEPFAV=!1)})},e.addCepInlineFav=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.addCepInlineFav");var i={NUMBER:[t.entity.CEP_REC.PRJID]},a=JSON.stringify(i);l.addCEPFavorites(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(t){0==parseInt(t.ADDCEPFAV_OUT_OBJ.RETCD)&&(e.ISINLINECEPFAV=!0,c.updateDataSource(y.BroadCastUpdate.updateFavCep))})};var lt='<div class="editShow" ng-repeat="c in grid.appScope.cepListDetails">  <section class="cep-heading"><strong class="cepCodeH">{{c.CLIENO + "-" + (c.ENGNO.length==1?"00":(c.ENGNO.length==2?"0":"")) + c.ENGNO + "-" + (c.PRJNO.length==1?"00":(c.PRJNO.length==2?"0":"")) + c.PRJNO}}</strong> {{" " + c.OCOMP + " " + (c.CHARBASIS=="N"?Billable:"Billable") + " -" + c.CHARBASIS}}</section>  <section class="cep-category">        <ul class="cep-subcategoryLeft">    <li><b>{{::grid.appScope.RMTitle}}</b> <span> {{c.RMGR}}</span></li> <li><b>{{::grid.appScope.EMTitle}}</b> <span> {{c.ENGCON}}</span></li> <li><b>{{::grid.appScope.PMTitle}}</b> <span> {{c.PRJM}}</span></li> </ul> <ul class="cep-subcategoryRight"> <li><b>{{ ::"lbl_client" | translate }}</b> <span> {{c.CLIENAME}}</span></li> <li><b>{{ ::"lbl_engmnt" | translate }}</b> <span> {{c.ENGNAME}}</span></li>  <li><b>{{ ::"lbl_Project" | translate }}</b> <span> {{c.PRJNAME}}</span></li> </ul> </section></div>',ot="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus " col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'" title="{{grid.appScope.chrgBsTitle}}">{{ col.displayName CUSTOM_FILTERS }}</span> <span class="hideSortArrow"  ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',st=[{name:"Delete",cellClass:"gridMainGrid",headerCellClass:"monthendClass2",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1.5%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" value={{row.entity}} class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{field:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1.5%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents" title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{name:"TYPE",suppressRemoveSort:!0,displayName:t("translate")("lbl_type"),enableHiding:!0,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!1,enableColumnResizing:!1,width:"*",enableCellEdit:!1,enableColumnResizing:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.TYPE}}"><span ng-if="!row.groupHeader">{{row.entity.TYPE}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{field:"CEP_REC.CLIENO",width:120,enableHiding:!1,enableAgg:!1,sort:{direction:a.ASC,priority:0},groupingShowAggregationMenu:!1,enableColumnResizing:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellTooltip:function(e,t){return e.entity.CEP_REC.CLIENO},cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'T\') > -1" >{{::grid.appScope.BillableVar}}</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate }}:</span> <span class="flRight">{{row.entity.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity, \'txtgridcep\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\"></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"CEP_REC.CHARBASIS",width:47,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEdit:!1,enableColumnResizing:!1,headerCellTemplate:ot,cellTemplate:'<div class="ui-grid-cell" style="width:100%;height:100%"><span ng-if="!row.groupHeader">{{row.entity.CEP_REC.CHARBASIS}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:"23%",suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridact\' + row.entity.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true\' ><i class=\'fa fa-star\'></i></button><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i>\x3c!--<img ng-click="grid.appScope.loadDesktopActivityProject(row,true)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridcomponent\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridtask\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i> \x3c!--<img ng-click="grid.appScope.loadDesktopActivityProject(row,true)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader" >{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridscope\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"HRS",width:65,suppressRemoveSort:!0,displayName:t("translate")("lbl_HrsFull"),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,type:"number",cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellTemplate:'<div  class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" class="rightAligRightPaddng" ng-if="!row.groupHeader" >{{row.entity.HRS |decimal}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICDESC",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcItem"),width:"*",groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-cell" ng-attr-title="{{row.entity.ICDESC == \' \'?\'\':row.entity.ICDESC}}" style="width:100%;height:100"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader" >{{row.entity.ICDESC}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridicdesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadICItems()" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",suppressRemoveSort:!0,displayName:"Description",groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.DES}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgriddesc\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addFavDescInline(row.entity.DES.trim())' ng-show='row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true' ><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeFavDescInline(row.entity.DES.trim())' ng-show='row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.loadDescription(row.entity)\" ></i></div>",cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}];e.filterValue=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.filterValue"),isNaN(String.fromCharCode(e.keyCode))&&45!=e.keyCode&&46!=e.keyCode&&e.preventDefault()};var dt=t("translate")("lbl_entrySubmtd");e.RMTitle=t("translate")("msg_RMTitle"),e.EMTitle=t("translate")("msg_EMTitle"),e.PMTitle=t("translate")("msg_PMTitle"),e.initialDetail=u.GetInitialDetail(!1,!0),e.BillableVar=t("translate")("msg_BillableVar"),e.chrgBsTitle=t("translate")("lbl_chrgBs2");var ct=[],gt=[],pt=[{name:"Delete",cellClass:"gridMainGrid",headerCellClass:"monthendClass1",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1.5%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" value={{row.entity}} class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{field:"Edit",name:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1.5%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents" title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{name:"TYPE",suppressRemoveSort:!0,displayName:t("translate")("lbl_type"),enableHiding:!0,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!1,enableColumnResizing:!1,width:"*",enableCellEdit:!1,enableColumnResizing:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.TYPE}}"><span ng-if="!row.groupHeader">{{row.entity.TYPE}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"TEID",displayName:"TEID",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableColumnResizing:!1,allowCellFocus:!1},{name:"CEP_REC",displayName:"CEP_REC",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"ACTI_REC",displayName:"ACTI_REC",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"CMPTID",displayName:"CMPTID",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"TSKID",displayName:"TSKID",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"SCOID",displayName:"SCOID",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"REGFLAG",displayName:"REGFLAG",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"CEP_REC.CLIENO",field:"CEP_REC.CLIENO",minWidth:120,width:120,enableHiding:!1,enableAgg:!1,sort:{direction:a.ASC,priority:0},groupingShowAggregationMenu:!1,headerCellClass:"cep_hover",enableColumnResizing:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'T\') > -1" >{{::grid.appScope.BillableVar}}</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate   }}:</span> <span class="flRight">{{row.entity.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav" style="width:100%;height:100%"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor  ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity, \'txtgridcep\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\" ></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"CEP_REC.CHARBASIS",width:47,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEdit:!1,enableColumnResizing:!1,headerCellTemplate:ot,cellTemplate:'<div class="ui-grid-cell-nav" style="width:100%;height:100%"><span ng-if="!row.groupHeader">{{row.entity.CEP_REC.CHARBASIS}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:"23%",suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader"  >{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input class="favSpace" style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridact\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true' ><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.loadDesktopActivityProject(row,true)\"></i></div>",cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader" >{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridcomponent\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader" >{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridtask\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,allowCellFocus:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader" >{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"/><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"HRS",width:65,suppressRemoveSort:!0,displayName:t("translate")("lbl_HrsFull"),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,type:"number",cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellTemplate:'<div  class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" class="rightAligRightPaddng" ng-if="!row.groupHeader" >{{row.entity.HRS |decimal}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICDESC",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcItem"),width:"*",groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-cell" style="width:100%;height:100" ng-attr-title="{{row.entity.ICDESC == \' \'?\'\':row.entity.ICDESC}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ICDESC}}</div></div>',allowCellFocus:!0,editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridicdesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadICItems()" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",width:"*",suppressRemoveSort:!0,displayName:"Description",groupingShowAggregationMenu:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader"  >{{row.entity.DES}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-change=\'grid.appScope.isFavDescription(row.entity.DES.trim())\' ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgriddesc\' + row.entity.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true\' ><i class=\'fa fa-star\'></i></button><i ng-click="grid.appScope.loadDescription(row.entity)" class="glyphicon glyphicon-triangle-bottom"></i>\x3c!--<img ng-click="grid.appScope.showInfo(row)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}],ut="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small class="blankSpaceWeekNonHours" ng-bind=" "></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',Ct="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small class="blankSpaceWeekNonHours" ng-bind=" "></small></span></span> <span class="hideSortArrow" ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',mt="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 0)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 0)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',ht="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 1)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 1)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',Et="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 2)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 2)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',Dt="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 3)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 3)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',yt="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 4)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 4)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',vt="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 5)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 5)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',ft="<div role=\"columnheader\" ng-class=\"{ 'sortable': sortable, 'sortActive' :(col.footerCellClass=='removeSortClass'?false:(col.sort.direction == asc?true:(col.sort.direction == desc?true:false))) }\" ui-grid-one-bind-aria-labelledby-grid=\"col.uid + '-header-text '+col.uid + '-sortdir-text'\" aria-sort=\"{{col.sort.direction == asc ? 'ascending' : ( col.sort.direction == desc ? 'descending' : (!col.sort.direction ? 'none' : 'other'))}}\">"+'<div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus textAlignCenter" col-index="renderIndex" title="{{grid.appScope.getWeeklyDateTooltip(grid.appScope.weeklyStartDate, 6)}}"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'"><span>{{ col.displayName CUSTOM_FILTERS }}<small ng-bind="grid.appScope.getWeeklyDayDate(grid.appScope.weeklyStartDate, 6)"></small></span></span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>',Tt=[{name:"Delete",isWeek:!0,cellClass:"gridMainGrid",headerCellClass:"monthendClass5",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{field:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents"  title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{name:"TEID",displayName:"TEID",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"CEP_REC",displayName:"CEP_REC",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"ACTI_REC",displayName:"ACTI_REC",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"CMPTID",displayName:"CMPTID",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"TSKID",displayName:"TSKID",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"SCOID",displayName:"SCOID",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{name:"REGFLAG",displayName:"REGFLAG",width:0,enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1,allowCellFocus:!1},{field:"data.CEP_REC.CLIENO",minWidth:120,width:120,enableColumnResizing:!1,enableHiding:!1,enableAgg:!1,sort:{direction:a.ASC,priority:0},headerCellTemplate:ut,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.data.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.data.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.data.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'T\') > -1" >{{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate }}:</span> <span class="flRight">{{row.entity.data.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.data.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav"><input style="width:1000%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.data.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity.data, \'txtgridcep\' + row.entity.data.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button> <i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\" ></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"data.CEP_REC.CHARBASIS",minWidth:30,width:47,headerCellTemplate:Ct,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEditOnFocus:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div style="width:100%;height:100%"><span ng-if="!row.groupHeader">{{row.entity.data.CEP_REC.CHARBASIS}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:140,suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridact\' + row.entity.data.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true\' ><i class=\'fa fa-star\'></i></button><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)"></i>\x3c!--<img ng-model="MODEL_COL_FIELD" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridcomponent\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridtask\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridscope\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs1",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy1").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:mt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig" ><div ng-click="grid.appScope.stopEditOnCtrlClick($event,0)" class="rightAligRightPaddng" ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs1==null?row.entity.Hrs1:(row.entity.Hrs1|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs1\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+0),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs2",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy2").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:ht,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig" ><div ng-click="grid.appScope.stopEditOnCtrlClick($event,1)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs2==null?row.entity.Hrs2:(row.entity.Hrs2|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs2\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+1),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs3",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy3").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:Et,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,2)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs3==null?row.entity.Hrs3:(row.entity.Hrs3|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs3\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+2),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs4",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy4").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:Dt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,3)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs4==null?row.entity.Hrs4:(row.entity.Hrs4|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs4\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+3),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs5",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy5").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:yt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,4)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs5==null?row.entity.Hrs5:(row.entity.Hrs5|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs5\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+4),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs6",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy6").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:vt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,5)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs6==null?row.entity.Hrs6:(row.entity.Hrs6|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs6\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+5),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs7",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy7").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:ft,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,6)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs7==null?row.entity.Hrs7:(row.entity.Hrs7|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs7\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+6),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"HrsTotal",width:52,suppressRemoveSort:!0,displayName:t("translate")("lbl_Total"),enableHiding:!1,headerCellTemplate:ut,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!1,enableCellEditOnFocus:!1,enableColumnResizing:!1,type:"number",allowCellFocus:!1,cellTemplate:'<div class="ui-grid-cell rightAlig"><span class="ctrlReadOnly rightAligRightPaddng" ng-if="!row.groupHeader">{{grid.appScope.weekHrsTotal(row.entity)}}</span></div>',cellClass:function(e,t,i,a,n){return e.getCellValue(t,i)<0?"grid-cell-negative":"grid-cell-nonnegative"},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",width:"*",suppressRemoveSort:!0,displayName:"Description",headerCellTemplate:ut,groupingShowAggregationMenu:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.DES}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addFavDescInline(row.entity.DES.trim())' ng-show='row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true' ><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeFavDescInline(row.entity.DES.trim())' ng-show='row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true' ><i class='fa fa-star'></i></button><i ng-click=\"grid.appScope.loadDescription(row.entity)\" class=\"glyphicon glyphicon-triangle-bottom\"></i></div>",cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}],bt=[{allowCellFocus:!1,name:"Delete",isWeek:!0,cellClass:"gridMainGrid",headerCellClass:"monthendClass6",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1.5%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader"  class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>'},{allowCellFocus:!1,field:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1.5%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents"  title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>'},{name:"TEID",displayName:"TEID",width:"*",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"CEP_REC",displayName:"CEP_REC",width:"20%",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"ACTI_REC",displayName:"ACTI_REC",width:"20%",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"CMPTID",displayName:"CMPTID",width:"20%",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"TSKID",displayName:"TSKID",width:"*",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"SCOID",displayName:"SCOID",width:"*",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{name:"REGFLAG",displayName:"REGFLAG",width:"*",enableHiding:!1,groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!1,enableColumnResizing:!1},{field:"data.CEP_REC.CLIENO",width:120,enableHiding:!1,enableAgg:!1,sort:{direction:a.ASC,priority:0},headerCellTemplate:ut,groupingShowAggregationMenu:!1,enableColumnResizing:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.data.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.data.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.data.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'T\') > -1" >{{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.data.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate }}:</span> <span class="flRight">{{row.entity.data.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.data.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.data.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity.data, \'txtgridcep\' + row.entity.data.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\" ></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"data.CEP_REC.CHARBASIS",minWidth:30,width:47,headerCellTemplate:Ct,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div class="ui-grid-cell" style="width:100%;height:100%"><span ng-if="!row.groupHeader">{{row.entity.data.CEP_REC.CHARBASIS}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:140,suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridact\' + row.entity.data.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavActInline(row.entity.ACTI_REC)\' ng-show=\'grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true\' ><i class=\'fa fa-star\'></i></button><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)"></i>\x3c!--<img ng-model="MODEL_COL_FIELD" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridcomponent\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridtask\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",width:"*",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),headerCellTemplate:ut,groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgridscope\' + row.entity.data.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs1",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy1").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:mt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig" ><div ng-click="grid.appScope.stopEditOnCtrlClick($event,0)" class="rightAligRightPaddng" ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs1==null?row.entity.Hrs1:(row.entity.Hrs1|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs1\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+0),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs2",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy2").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:ht,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,1)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs2==null?row.entity.Hrs2:(row.entity.Hrs2|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs2\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+1),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs3",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy3").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:Et,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,2)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs3==null?row.entity.Hrs3:(row.entity.Hrs3|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs3\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+2),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs4",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy4").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:Dt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,3)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs4==null?row.entity.Hrs4:(row.entity.Hrs4|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs4\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+3),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs5",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy5").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:yt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig" ><div ng-click="grid.appScope.stopEditOnCtrlClick($event,4)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs5==null?row.entity.Hrs5:(row.entity.Hrs5|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs5\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+4),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs6",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy6").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:vt,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><div ng-click="grid.appScope.stopEditOnCtrlClick($event,5)" class="rightAligRightPaddng"  ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs6==null?row.entity.Hrs6:(row.entity.Hrs6|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs6\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+5),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Hrs7",width:45,suppressRemoveSort:!0,displayName:t("translate")("lbl_FulWkDy7").substring(0,3),enableHiding:!1,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,enableColumnResizing:!1,headerCellTemplate:ft,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig" ><div ng-click="grid.appScope.stopEditOnCtrlClick($event,6)" class="rightAligRightPaddng" ng-if="!row.groupHeader">&nbsp;{{row.entity.Hrs7==null?row.entity.Hrs7:(row.entity.Hrs7|decimal)}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs7\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellClass:function(e,t,i,a,n){var r=e.getCellValue(t,i);return r>=-200&&r<0?"grid-cell-negative":"grid-cell-nonnegative"},cellEditableCondition:function(e){if("Y"==e.row.entity.TIMSUB)return 0;if(void 0!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&null!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE&&""!==e.grid.appScope.initialDetail.EMPL_REC.TERMDTE.trim()){var t=new Date(e.grid.appScope.weeklyStartDate.valueOf());if(t.setDate(t.getDate()+6),!Qt(e.grid.appScope.initialDetail.EMPL_REC.TERMDTE,t))return 0}return 1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"HrsTotal",width:52,suppressRemoveSort:!0,displayName:t("translate")("lbl_Total"),enableHiding:!1,headerCellTemplate:ut,groupingShowAggregationMenu:!1,aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,enableCellEdit:!1,enableCellEditOnFocus:!0,enableColumnResizing:!1,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig"><span class="rightAligRightPaddng" ng-if="!row.groupHeader">{{grid.appScope.weekHrsTotal(row.entity)}}</span></div>',allowCellFocus:!1,cellClass:function(e,t,i,a,n){return e.getCellValue(t,i)<0?"grid-cell-negative":"grid-cell-nonnegative"},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",width:"*",suppressRemoveSort:!0,displayName:"Description",headerCellTemplate:ut,groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.data.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity.data, \'txtgriddesc\' + row.entity.data.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true\' ><i class=\'fa fa-star\'></i></button><i ng-click="grid.appScope.loadDescription(row.entity)" class="glyphicon glyphicon-triangle-bottom"></i>\x3c!--<img ng-click="grid.appScope.showInfo(row)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.DES}}</div></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}];e.calTotalView=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.calTotalView"),1==t&&localStorage.setItem("AllcolumnHidden",1);var i,a=e.colWidth,n=parseInt($(".ui-grid-header-cell-wrapper").css("width"));2==t&&(e.visibleflag1=!1,e.visibleflag2=!1,e.visibleflag3=!1,e.visibleflag4=!0,i=.0653*n,$(".bottomWeeklyCalcTotal").width(i),$(".bottomWeeklyCalcEmptyTotal").width(a)),4==t?(e.visibleflag1=!0,e.visibleflag2=!1,e.visibleflag3=!1,e.visibleflag4=!1,i=.06141*n,$(".bottomWeeklyCalcTotal").width(i),$(".bottomWeeklyCalcEmptyTotal").width(a)):5==t?(e.visibleflag1=!0,e.visibleflag2=!0,e.visibleflag3=!1,e.visibleflag4=!1,i=.05731*n,$(".bottomWeeklyCalcTotal").width(i),$(".bottomWeeklyCalcEmptyTotal").width(a)):6==t?(e.visibleflag1=!0,e.visibleflag2=!0,e.visibleflag3=!0,e.visibleflag4=!1,i=.0522*n,$(".bottomWeeklyCalcTotal").width(i),$(".bottomWeeklyCalcEmptyTotal").width(a)):3==t&&(e.visibleflag1=!1,e.visibleflag2=!1,e.visibleflag3=!1,e.visibleflag4=!1,i=.0736*n,$(".bottomWeeklyCalcTotal").width(i),$(".bottomWeeklyCalcEmptyTotal").width(a))},e.visibleflag1,e.visibleflag2,e.visibleflag3=!1,e.visibleflag4=!1,e.dataTemp="",e.$on("columnVisibilityChangedNew",function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.columnVisibilityChangedNew"),localStorage.setItem("AllcolumnHidden",-1),"true"==localStorage.isDailyMode?e.countDay+=1:"false"==localStorage.isDailyMode&&(e.countWeek+=1,s(function(){e.colWidth=$(".ui-grid-col"+i).css("min-width")},100),e.calTotalView(e.countWeek))}),e.$on("columnHiddenDay",function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.columnHiddenDay"),1!=e.countDay&&(e.countDay-=1,localStorage.setItem("AllcolumnHidden",-1)),1==e.countDay&&localStorage.setItem("AllcolumnHidden",1)}),e.$on("columnHiddenWeek",function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.columnHiddenWeek"),e.countWeek>=1&&(e.countWeek-=1,localStorage.setItem("AllcolumnHidden",-1)),s(function(){e.colWidth=$(".ui-grid-col"+i).css("min-width")},100),e.calTotalView(e.countWeek)});var St="",wt=function(e,t){return-1!==e.options.prevEiditedRow&&e.options.prevEiditedRow!==t},Ot=null;e.onGridRowMouseUp=function(t,i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.onGridRowMouseUp"),wt(i,t.entity.rowId))return Ot&&s.cancel(Ot),Ot=s(function(){"number"==angular.element(window.document.activeElement).attr("type")&&$("#loadingWidgetDesktop").hide(),i.options.prevEiditedRow=-1},1e3),e.isRowEdit&&$("#loadingWidgetDesktop").show(),!1;if(!0!==t.groupHeader){var n=a.ctrlKey,r=i.api.selection.getSelectedRows();0==a.shiftKey&&0==n&&e.selectedRows>0&&(3!=a.which||3==a.which&&1!=t.isSelected)&&i.api.selection.clearSelectedRows(),void 0!==t.groupHeader||e.isDraggingFlag||0!=n||3==a.which||(t.isSelected=!0),r.length>1?e.multiSelectFlag=!0:e.multiSelectFlag=!1,e.isDraggingFlag=!1,u.shiftFlag=a.shiftKey,"SPAN"==a.target.nodeName&&(e.itemSel=t,0==t.isSelected&&s(function(){e.itemSel.isSelected=!1}))}else r=i.api.selection.getSelectedRows(),T(function(){try{e.gridApi.selection.selectRow(e.gridOptions.data[e.gridOptions.data.indexOf(r[0])])}catch(e){}},0,1)},e.stopEditOnCtrlClick=function(t,i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.stopEditOnCtrlClick"),t.ctrlKey||t.shiftKey)t.preventDefault(),t.stopPropagation(),$(t.currentTarget).focus();else if(void 0!==i&&void 0!==e.initialDetail.EMPL_REC.TERMDTE&&null!==e.initialDetail.EMPL_REC.TERMDTE&&""!==e.initialDetail.EMPL_REC.TERMDTE.trim()){var a=new Date(e.weeklyStartDate.valueOf());if(a.setDate(a.getDate()+i),!Qt(e.initialDetail.EMPL_REC.TERMDTE,a))return!1}},e.onGridRowMouseDown=function(t,i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.onGridRowMouseDown"),e.gridApi.grid.options.curretnRowClick=t.entity.rowId,!wt(i,t.entity.rowId)&&(i.options.prevEiditedRow=t.entity.rowId,!0!==t.groupHeader)){for(var n=e.gridApi.core.getVisibleRows(),r=[],l=0;l<n.length;l++)1==n[l].groupHeader?r.push(null):r.push(n[l].entity);Oe();var o=a.ctrlKey,s=i.api.selection.getSelectedRows();s.length>1?e.multiSelectFlag=!0:e.multiSelectFlag=!1;var d=r.indexOf(s[0]),c=r.indexOf(t.entity);if(d>c&&(d=r.indexOf(s[s.length-1])),e.selectedRows=i.api.selection.getSelectedRows().length,1!=t.isSelected&&0==o&&e.selectedRows>0&&3!=a.which&&i.api.selection.clearSelectedRows(),1==o&&e.selectedRows>1&&1==t.isSelected&&3!=a.which?t.isSelected=!1:void 0===t.groupHeader&&3!=a.which&&(t.isSelected=!0),e.selectedRows=i.api.selection.getSelectedRows().length,a.shiftKey)if(i.api.selection.clearSelectedRows(),d<c)for(g=d;g<=c;g++)e.gridApi.selection.selectRowByVisibleIndex(g);else for(var g=d;g>=c;g--)e.gridApi.selection.selectRowByVisibleIndex(g);e.selectedRowsOnMouseDown=i.api.selection.getSelectedRows(),3==a.which&&(e.selectedRowsOnMouseDown.filter(function(e){return"N"==e.TIMSUB.toUpperCase()}).length<1?u.isDeletedRightClickOff=!0:u.isDeletedRightClickOff=!1)}};var It=function(e){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.getHoursIndex");var t=-1;return"HRS"==e||"Hrs1"===e?t=0:"Hrs2"===e?t=1:"Hrs3"===e?t=2:"Hrs4"===e?t=3:"Hrs5"===e?t=4:"Hrs6"===e?t=5:"Hrs7"===e&&(t=6),t},Mt=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.isDesignateEmployee");var e=!1;return"0"!==u.designateOfEmp.EMPLID&&u.designateOfEmp.EMPLID!=u.designateOfEmp.loginEmpId&&(e=!0),e},Rt=!1,_t=function(e){Rt=e,$("#loadingWidgetDesktop").show()},Pt=function(){e.isRowEdit=!1,Rt=!1,$("#loadingWidgetDesktop").hide()};e.gridOptions1={rowHeight:19,excessRows:100,gridName:"MainGrid",rowEditWaitInterval:200,dicardTabNavigation:!1,showHeader:!0,showGridFooter:!1,showColumnFooter:!0,enableGridMenu:!0,enableCellSelection:!0,enableCellEditOnFocus:!0,enableFiltering:!1,enableRowSelection:!0,treeRowHeaderAlwaysVisible:!1,enableRowHeaderSelection:!1,multiSelect:!0,noUnselect:!0,excessColumns:100,modifierKeysToMultiSelect:!0,columnDefs:pt,canSelectRows:!1,rowTemplate:'<div  ng-mousedown="grid.appScope.onGridRowMouseDown(row,grid,$event)" ng-mouseup="grid.appScope.onGridRowMouseUp(row,grid,$event)" ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" ui-grid-cell ></div>',enableHorizontalScrollbar:a.scrollbars.NEVER,onRegisterApi:function(i){e.maskTest=String("?*?*?*-?9?9?9?-?9?9?9"),e.gridApi=i,i.rowEdit.on.saveRow(e,function(t){var a=h.defer();if(Rt)return e.gridApi.rowEdit.setSavePromise(t,a.promise),a.resolve(),unlockGrid(),!1;if(u.pastedRecords=!1,u.rowIndex=t,u.rowIndexTemp=e.gridOptions.data.indexOf(t),e.gridOptions.dicardTabNavigation=!0,e.isRowEdit&&!u.columnBlank){_t(!0),e.isRowEditTemp=e.isRowEdit,e.isRowEdit=!1;var n=angular.copy(e.hourIndexList),r=angular.copy(e.time_record);e.saveInlineEntry(r,i,n)}e.hourIndexList=[],e.gridApi.rowEdit.setSavePromise(t,a.promise),a.resolve()}),i.grouping.on.groupingChanged(e,function(){e.gridApi.grouping.getGrouping().grouping.length>0&&e.gridApi.grid.rows.length>0&&u.hideUiGridOnGridGrouping("#grid1")}),i.colMovable.on.columnPositionChanged(e,function(t,i,a){Mt()||i==a||(localStorage.setItem("isMainGridLayoutChange",1),u.enableSaveLayout=!0),e.gridApi.grid.getColumn("ProjectActivity").width="*",e.gridApi.grid.getColumn("Component").width="*",e.gridApi.grid.getColumn("Task").width="*",e.gridApi.grid.getColumn("Scope").width="*",e.gridApi.grid.options.columnDefs[0].isWeek||(e.gridApi.grid.getColumn("TYPE").width="*")}),i.core.on.columnVisibilityChanged(e,function(t){Mt()||(localStorage.setItem("isMainGridLayoutChange",1),u.enableSaveLayout=!0),e.gridApi.grid.getColumn("ProjectActivity").width="*",e.gridApi.grid.getColumn("Component").width="*",e.gridApi.grid.getColumn("Task").width="*",e.gridApi.grid.getColumn("Scope").width="*",e.gridApi.grid.options.columnDefs[0].isWeek||(e.gridApi.grid.getColumn("TYPE").width="*")}),i.core.on.rowsRendered(e,function(){!0===e.cuttOffSaveState&&(e.cuttOffSaveState=!1,e.gridApi.saveState.restore(e,e.state)),e.gridApi.grid.treeBase.tree instanceof Array&&(s(function(){var e=$("#tab1List .ui-grid-render-container-body .ui-grid-viewport").height();$("#tab1List .ui-grid-pinned-container .ui-grid-viewport").height(e-2)}),e.isAutoGroup&&(e.isAutoGroup=!1,e.gridApi.grouping.groupColumn("TYPE"),localStorage.GroupingCalled="1"),"1"==localStorage.GroupingCalled&&(e.gridApi.treeBase.expandAllRows(),s(function(){u.showUiGridAfterGrouping("#grid1"),e.bindGridEvents(),localStorage.GroupingCalled="0"},100)))}),i.edit.on.afterCellEdit(e,function(n,r,l,o){if(e.gridApi.grid.isRowSet=!1,e.cepObj.selected=angular.copy(e.cepObj.selectedBegin),e.isProjectTask=e.isProjectTaskBegin,r.name==St&&(e.gridApi.grid.options.prevEiditedRow=-1),St="",u.pastedRecords=!1,$("#txtgridcep"+n.TEID).parent().hide(),e.isCepFavSet=!1,e.isSameCompny=!1,l!==o){if(e.isValiddata&&e.beginCellEditFlag){e.isDescriptionPopupLoad?e.saveFlag=!1:e.saveFlag=!0;var s=0;s=It(r.name);var d=n.HRS,g=n.TEID;if(e.isDailyMode||(d=[n.Hrs1,n.Hrs2,n.Hrs3,n.Hrs4,n.Hrs5,n.Hrs6,n.Hrs7],(g=new Array(7))[0]=void 0!==n.TEID1?n.TEID1:0,g[1]=void 0!==n.TEID2?n.TEID2:0,g[2]=void 0!==n.TEID3?n.TEID3:0,g[3]=void 0!==n.TEID4?n.TEID4:0,g[4]=void 0!==n.TEID5?n.TEID5:0,g[5]=void 0!==n.TEID6?n.TEID6:0,g[6]=void 0!==n.TEID7?n.TEID7:0),""==n.DES&&(n.DES=e.previousData.DES),e.isDailyMode){if(e.time_record={teId:g,cepCode:n.CEP_REC.CLIENO.toUpperCase().trim(),hrs:d,description:n.DES,cepRec:n.CEP_REC,actRec:n.ACTI_REC,cmptId:n.CMPTID,tskId:n.TSKID,scopId:n.SCOID,regFlag:n.REGFLAG,stateCode:n.PRSTCD,icrtcd:n.ICRTCD,icdesc:n.ICDESC,icchrge:n.ICCHRGE,CTDESC:n.CTDESC},"hrs"==r.name.substring(0,3).toLowerCase()){var p=new Date(e.currentDate.valueOf()),C={DTE:p=t("date")(p,"yyyy-MM-dd"),HRS:e.time_record.hrs,CEP_REC:{CHARBASIS:n.CEP_REC.CHARBASIS}};(D=qt(C))&&(e.time_record.hrs=o,e.gridOptions.data[e.gridOptions.data.indexOf(n)].HRS=o,e.msgFutureTime.push(t("translate")("msg_FutureTimeEntry")))}else if("CEP_REC.CLIENO"==r.name||"data.CEP_REC.CLIENO"==r.name){var p=new Date(e.currentDate.valueOf()),C={DTE:p=t("date")(p,"yyyy-MM-dd"),HRS:e.time_record.hrs,CEP_REC:{CHARBASIS:null!=e.cepObj.selected&&void 0!=e.cepObj.selected?e.cepObj.selected.CHARBASIS:u.gridrow.CEP_REC.CHARBASIS}};(D=qt(C))&&(e.saveFlag=!1,e.time_record.hrs=0,e.gridOptions.data[e.gridOptions.data.indexOf(n)].HRS=0)}}else if(e.time_record={rowId:n.rowId,teId:g,cepCode:n.CEP_REC.CLIENO.toUpperCase().trim(),hrs:d,description:n.DES,cepRec:n.CEP_REC,actRec:n.ACTI_REC,cmptId:n.CMPTID,tskId:n.TSKID,scopId:n.SCOID,regFlag:n.data.REGFLAG,stateCode:n.data.PRSTCD,icrtcd:n.ICRTCD,icdesc:n.ICDESC,icchrge:n.ICCHRGE,CTDESC:n.CTDESC},"hrs"==r.name.substring(0,3).toLowerCase()){var m=(h=new Date(e.weeklyStartDate.valueOf())).setDate(h.getDate()+s),C={DTE:m=t("date")(m,"yyyy-MM-dd"),HRS:e.time_record.hrs[s],CEP_REC:{CHARBASIS:n.CEP_REC.CHARBASIS}};(D=qt(C))&&(e.time_record.hrs[s]=o,e.gridOptions.data[e.gridOptions.data.indexOf(n)]["Hrs"+(s+1)]=o,e.msgFutureTime.push(t("translate")("msg_FutureTimeEntry")))}else if("CEP_REC.CLIENO"==r.name||"data.CEP_REC.CLIENO"==r.name)for(var h=new Date(e.weeklyStartDate.valueOf()),E=0;E<d.length;E++){var m=h.setDate(h.getDate()+E),C={DTE:m=t("date")(m,"yyyy-MM-dd"),HRS:e.time_record.hrs[E],CEP_REC:{CHARBASIS:e.cepObj.selected.CHARBASIS}},D=qt(C);D&&null!=e.time_record.hrs[E]&&(e.saveFlag=!1,e.time_record.hrs[E]=0)}if(u.popupload||"hrs"==r.name.substring(0,3).toLowerCase()||"DES"==r.name||"ICCHRGE"==r.name){if("hrs"==r.name.substring(0,3).toLowerCase()||"DES"==r.name||"ICCHRGE"==r.name)e.isRowEdit=!0,-1!=s&&e.hourIndexList.indexOf(s)<0&&(e.isValidHour=zt(e.time_record,s),e.hourIndexList.push(s));else{e.isRowEdit=!1;var y=angular.copy(e.hourIndexList);e.hourIndexList=[],e.saveInlineEntry(e.time_record,i,y)}"ICCHRGE"==r.name&&e.isDailyMode&&null!=n.ICRTCD&&""!=n.ICRTCD.trim()&&(null!==n.ICCHRGE&&void 0!==n.ICCHRGE||(n.ICCHRGE=e.oldEntry,e.isRowEdit=!1))}else e.isRowEdit=!1,null==e.cnt?null!=n.CEP_REC.CLIENO.trim()&&""!=n.CEP_REC.CLIENO.trim()?null!=e.isProjectTask&&(e.isProjectTask?c.notifyGridFocus("ProjectComponent"):c.notifyGridFocus("Activity")):("CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].CEP_REC.CLIENO=e.oldEntry),"data.CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].data.CEP_REC.CLIENO=e.oldEntry)):("CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].CEP_REC.CLIENO=e.oldEntry),"data.CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].data.CEP_REC.CLIENO=e.oldEntry),e.oldCepEntry=angular.copy(e.oldEntry));if(6==e.time_record.cepRec.CLIENO.length&&(e.time_record.cepRec.CLIENO=e.time_record.cepRec.CLIENO+"-"+("0"+e.time_record.cepRec.ENGNO).slice(-3).toString()+"-"+("0"+e.time_record.cepRec.PRJNO).slice(-3).toString()),e.time_record.cepRec.CLIENO.length>8){var v=_.isExcepCepCode(e.time_record.cepRec.CLIENO);v.isExpCep&&(e.time_record.cepRec.CLIENO=v.cepWithMask.toUpperCase().trim())}(e.isContinue||void 0==e.isContinue)&&(u.popupload||e.isSearchGrid||e.isRowEdit&&!1!==e.isValidHour)||(e.gridOptions.data[e.gridOptions.data.indexOf(n)][r.name]=e.oldEntry,e.gridApi.selection.selectRow(e.gridOptions.data[e.gridOptions.data.indexOf(n)]),"CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].CEP_REC.CLIENO=e.oldEntry),"data.CEP_REC.CLIENO"==r.name&&(e.gridOptions.data[e.gridOptions.data.indexOf(n)].data.CEP_REC.CLIENO=e.oldEntry)),e.isGridFocus=!1}i.core.notifyDataChange(a.dataChange.COLUMN)}$("#loadingWidgetDesktop").hide(),u.rowIndex=n}),e.startSelectedRowIndex=0,e.selctProjCmp=t("translate")("msg_selctProjCmp"),i.edit.on.beginCellEdit(e,function(a,n){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.beginCellEdit"),e.lastRowEntry=angular.copy(a),e.gridApi.selection.clearSelectedRows(),e.gridApi.selection.selectRow(e.gridOptions.data[e.gridOptions.data.indexOf(a)]),"CEP_REC.CLIENO"!=n.name&&"data.CEP_REC.CLIENO"!=n.name||$("#txtgridcep"+a.TEID).parent().show(),e.renewalMessage=[],e.IsInlineActFav=!1,e.isSameCompny=!1,"DES"==n.name)e.isFavDescription(a.DES);else if("ProjectActivity"==n.name&&a.CEP_REC.CATID<=0){var r=a.ProjectActivity,l=r!=t("translate")("activity_Title");if(l&&(l=r!=t("translate")("msg_selctProjCmp")),a.CEP_REC.COMPID==e.initialDetail.COMP_REC.COMPID&&l&&"Y"==a.ACTI_REC.STAT){e.isSameCompny=!0;var o=JSON.parse(sessionStorage.getItem("FavActivityArray"));e.IsInlineActFav=A.isActivityInFavList(a.ACTI_REC,o)}}if(e.isCepFavSet=!1,e.colDefname=n.name,e.beginCellEditFlag=!0,i.selection.getSelectedRows(),e.cellNavigate=!1,void 0!=e.previousData&&""!=e.previousData||(e.isDailyMode,e.previousData=angular.copy(a)),("Component"==n.name||"Task"==n.name||"Scope"==n.name)&&parseInt(a.CEP_REC.CATID)<=0)return gi([t("translate")("lbl_CEPAssPCT")],"Message",!0),void(e.oldEntry="");if(!("ICDESC"!=n.name&&"ICCHRGE"!=n.name||null!=a.ICRTCD&&""!=a.ICRTCD.trim()))return gi([t("translate")("lbl_ICModify")],"Message",!0),void(e.oldEntry="");if(null!=a.ICRTCD&&""!=a.ICRTCD.trim()&&"hrs"==n.name.substring(0,3).toLowerCase())return gi([t("translate")("lbl_ICcantModify")],"Message",!0),void(e.oldEntry="");if(e.cnt=null,void 0!=e.oldRowEntry&&""!=e.oldRowEntry||(e.isDailyMode?e.oldRowEntry=a.HRS:e.oldRowEntry=[a.Hrs1,a.Hrs2,a.Hrs3,a.Hrs4,a.Hrs5,a.Hrs6,a.Hrs7]),e.oldEntry="",u.columnBlank&&("ProjectActivity"!=n.name&&u.columnBlankTEID==a.TEID||u.columnBlankTEID!=a.TEID)){var s={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",s),e.isValiddata=!1}else e.isValiddata=!0,"CEP_REC.CLIENO"!=n.name&&void 0!=e.oldCepEntry&&""!=e.oldCepEntry&&"data.CEP_REC.CLIENO"!=n.name||(e.isDailyMode?e.oldCepEntry=a.CEP_REC.CLIENO.toUpperCase().trim():e.oldCepEntry=a.data.CEP_REC.CLIENO.toUpperCase().trim()),e.oldEntry=a[n.name],"CEP_REC.CLIENO"==n.name&&(e.oldEntry=a.CEP_REC.CLIENO),"data.CEP_REC.CLIENO"==n.name&&(e.oldEntry=a.data.CEP_REC.CLIENO),e.isSearchGrid=!1,e.colDefName=n.name,"CEP_REC.CLIENO"!=n.name&&"data.CEP_REC.CLIENO"!=n.name||(e.beginEdit=!0),"hrs"!=n.name.substring(0,3).toLowerCase()&&"DES"!=n.name?e.gridCepComplete(a,null,a):u.gridrow=a,a.CEP_REC.CATID>0?e.isProjectTaskBegin=!0:e.isProjectTaskBegin=!1,e.showColViewMenu=!1,u.rowIndex=a}),e.cepMasking="?*?*?*?*?*?*?-?9?9?9?-?9?9?9",i.cellNav.on.navigate(e,function(t,i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.gridApi.cellNav.on.navigate"),e.gridApi.grid.options.prevEiditedRow=t.row.entity.rowId,St=t.col.name,e.gridApi.grid.isRowSet=!0,e.gridApi.selection.clearSelectedRows(),e.gridApi.selection.selectRow(e.gridOptions.data[e.gridOptions.data.indexOf(t.row.entity)]),"Y"!=t.row.entity.TIMSUB){if("CEP_REC.CLIENO"===t.col.colDef.name||"data.CEP_REC.CLIENO"===t.col.colDef.name){e.cepMasking="?*?*?*?*?*?*?-?9?9?9?-?9?9?9";var a=t.row.entity.CEP_REC.CLIENO;if(e.cepEditCodeWithoutMask=a.replace(/-/g,""),""!==a&&a.length>10&&a.length<14){var n=a.toUpperCase().trim().split("-");if(""!=n&&void 0!=n&&n.length>2){n=n[0]+n[1]+n[2];var r=_.isExcepCepCode(n);r.isExpCep&&(e.cepMasking=r.masking)}}}$(".searchCep.ng-scope").css("display","none")}else gi([dt])}),i.selection.on.rowSelectionChanged(e,function(t){var a=i.selection.getSelectedRows();0==a.length&&e.gridApi.selection.selectRow(e.gridOptions.data[e.gridOptions.data.indexOf(t.entity)]),a.filter(function(e){return"N"==e.TIMSUB.toUpperCase()}).length<1?u.isDeletedRightClickOff=!0:u.isDeletedRightClickOff=!1}),i.core.on.columnVisibilityChanged(e,function(t){e.columnChanged={name:t.colDef.name,visible:t.colDef.visible}}),e.$on("gridFocus",function(i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.gridFocus"),e.IsshowProjComponent=!1,e.getCurrentFocus(),e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity!=e.selctProjCmp&&e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity!=t("translate")("activity_Title")||(u.columnBlank=!0,u.columnBlankTEID=e.currentFocused.COLUMNTEID),"Scope"!=e.colDefname||!0!==e.saveOnCancelPopUp||u.columnBlank||c.notifyRefreshGrid(At()),"Scope"!=e.colDefname&&void 0!=e.currentFocused&&e.gridOptions.data[e.currentFocused.rowIndex].CEP_REC.CLIENO!=e.oldCepEntry&&""!=e.oldCepEntry&&("ProjectComponent"==a.value?!0!==e.saveOnCancelPopUp||u.columnBlank?(e.saveOnCancelPopUp=!1,e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=e.selctProjCmp,e.gridOptions.data[e.currentFocused.rowIndex].Component="",e.gridOptions.data[e.currentFocused.rowIndex].Scope="",e.gridOptions.data[e.currentFocused.rowIndex].Task="",u.isCategory=!0):c.notifyRefreshGrid(At()):!0!==e.saveOnCancelPopUp||u.columnBlank?(e.saveOnCancelPopUp=!1,e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=t("translate")("activity_Title"),e.gridOptions.data[e.currentFocused.rowIndex].Component="",e.gridOptions.data[e.currentFocused.rowIndex].Scope="",e.gridOptions.data[e.currentFocused.rowIndex].Task="",u.isCategory=!1):c.notifyRefreshGrid(kt()),u.columnBlank=!0,u.columnBlankTEID=e.currentFocused.COLUMNTEID),e.oldCepEntry="",e.isDescriptionPopupLoad=!1}),e.$on("CEPCodefavourite",function(i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.CEPCodefavourite");var n=a.value;l.loadCEPDetail(e.loginDetail.SESKEY,n.CLIEID,n.ENGID,n.PRJID,e.domainURL).then(function(n){if(0==parseInt(n.LOADCEP_OUT_OBJ.RETCD)&&u.IsshowCEPCodefavourite){u.IsshowCEPCodefavourite=!1;var r=angular.copy(n.LOADCEP_OUT_OBJ.CEP_REC),l=e.initialDetail.COMP_REC.BCHB;if(void 0!==l&&null!==l&&""!=l&&"NO"!=l.toUpperCase()&&"N"!=l.toUpperCase())for(var o=0;o<l.length;o++)if(r.CHARBASIS==l.charAt(o))return Yt([t("translate")("msg_CEPChargeBasisErr",{values:l})]),!1;if("Y"!=r.CLIEACTIVE||"Y"!=r.ENGACTIVE||"Y"!=r.PRJACTIVE)return Yt([t("translate")("msg_InActiveCep")],!1,t("translate")("lbl_Error")),!1;if("Y"!=r.ENGTIMFLAG)return Yt([t("translate")("msg_SelectAnotherEng")],!1,t("translate")("lbl_Error")),i.preventDefault(),!1;if("Y"!=r.PRJTIMFLAG)return Yt([t("translate")("msg_SelectAnotherPrj")],!1,t("translate")("lbl_Error")),!1;if(null!=r.RENPRJNO&&" "!=r.RENPRJNO&&void 0!==r.RENPRJNO){var s=parseInt(r.RENPRJNO)>99?parseInt(r.RENPRJNO).toString():parseInt(r.RENPRJNO)>9?"0"+parseInt(r.RENPRJNO).toString():"00"+parseInt(r.RENPRJNO).toString(),d=r.CLIENO+"-"+r.ENGNO+"-"+r.PRJNO;Yt([t("translate")("msg_ProjectRenewedPaste",{pName:s,cepProject:d})],"Warning","z"),r.IsProjRenewd=!0}e.getCurrentFocus(),e.isDailyMode?e.gridOptions.data[e.currentFocused.rowIndex].CEP_REC.CLIENO=a.value.cepCodeWithMask:e.gridOptions.data[e.currentFocused.rowIndex].data.CEP_REC.CLIENO=a.value.cepCodeWithMask,e.previousData=angular.copy(e.row),e.row=angular.copy(a.value),e.loadDesktopActivityProject(a.value)}})}),e.$on("refreshGrid",function(a,n){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.refreshGrid"),e.beginCellEditFlag&&(e.beginCellEditFlag=!1,e.IsshowProjComponent=!1,e.saveFlag=!0,void 0!=u.gridrow)){if(e.cepfavourite&&(u.gridrow.CEP_REC=angular.copy(e.row),delete u.gridrow.CEP_REC.CEPCODE,delete u.gridrow.CEP_REC.CEPFAV,delete u.gridrow.CEP_REC.RMGR,delete u.gridrow.CEP_REC.cepCodeWithMask,delete u.gridrow.CEP_REC.cepCodeWithOutMask,u.gridrow.CEP_REC.CATID>0?e.isProjectTask=!0:e.isProjectTask=!1),null===n.value&&!e.saveOnCancelPopUp)return;var r=null===n.value?null:n.value.valueOf(),l=u.gridrow.HRS,o=u.gridrow.TEID;if(e.isDailyMode||(l=[u.gridrow.Hrs1,u.gridrow.Hrs2,u.gridrow.Hrs3,u.gridrow.Hrs4,u.gridrow.Hrs5,u.gridrow.Hrs6,u.gridrow.Hrs7],(o=new Array(7))[0]=void 0!==u.gridrow.TEID1?u.gridrow.TEID1:0,o[1]=void 0!==u.gridrow.TEID2?u.gridrow.TEID2:0,o[2]=void 0!==u.gridrow.TEID3?u.gridrow.TEID3:0,o[3]=void 0!==u.gridrow.TEID4?u.gridrow.TEID4:0,o[4]=void 0!==u.gridrow.TEID5?u.gridrow.TEID5:0,o[5]=void 0!==u.gridrow.TEID6?u.gridrow.TEID6:0,o[6]=void 0!==u.gridrow.TEID7?u.gridrow.TEID7:0),null!==r&&void 0!=r&&null==r.scopeObj&&null==u.gridrow.SCOID&&(u.gridrow.SCOID=0),e.isProjectTask?e.time_record={teId:o,cepCode:u.gridrow.CEP_REC.CLIENO,hrs:l,description:null!==r&&void 0!=r?void 0!=r.componentTaskText?r.componentTaskText+" "+r.descriptionText:void 0!=r.data?r.data:r.DES:u.gridrow.DES,cepRec:u.gridrow.CEP_REC,actRec:null!==r&&void 0!=r&&void 0!=r.component?{ACTICD:r.component.selected.ACTICD,DES:r.descriptionText,STAT:u.gridrow.ACTI_REC.STAT}:u.gridrow.ACTI_REC,cmptId:null!==r&&void 0!=r&&void 0!=r.component?r.component.selected.CMPTID:u.gridrow.CMPTID,tskId:null!==r&&void 0!=r&&void 0!=r.component?r.task.selected.TSKID:u.gridrow.TSKID,scopId:null!==r&&void 0!=r&&void 0!=r.scopeObj?r.scopeObj.SCOPID:u.gridrow.SCOID,regFlag:e.isDailyMode?u.gridrow.REGFLAG:u.gridrow.data.REGFLAG,stateCode:e.isDailyMode?u.gridrow.PRSTCD:u.gridrow.data.PRSTCD,icrtcd:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.ICRTCD:u.gridrow.ICRTCD,icdesc:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.DES:u.gridrow.ICDESC,icchrge:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.CHRG:u.gridrow.ICCHRGE,CTDESC:null!==r&&void 0!=r&&void 0!==r.descriptionText?r.descriptionText:u.gridrow.CTDESC}:e.time_record={teId:o,DTE:e.currentDate,cepRec:u.gridrow.CEP_REC,actRec:null!==r&&void 0!=r&&void 0!=r.ACTICD?{ACTICD:r.ACTICD,DES:r.DES,STAT:r.STAT,COMPID:r.COMPID}:u.gridrow.ACTI_REC,icrtcd:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.ICRTCD:u.gridrow.ICRTCD,icdesc:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.DES:u.gridrow.ICDESC,icchrge:null!==r&&void 0!=r&&null!=r.ICRTCD&&""!=r.ICRTCD.trim()?r.CHRG:u.gridrow.ICCHRGE,cepCode:u.gridrow.CEP_REC.CLIENO,hrs:l,description:null!==r&&void 0!=r&&void 0!=r.data?r.data:u.gridrow.DES,CTDESC:"",cmptId:0,CATID:0,tskId:0,scopId:0,regFlag:e.isDailyMode?u.gridrow.REGFLAG:u.gridrow.data.REGFLAG,stateCode:e.isDailyMode?u.gridrow.PRSTCD:u.gridrow.data.PRSTCD},e.isDailyMode){var s=new Date(e.currentDate.valueOf()),d={DTE:s=t("date")(s,"yyyy-MM-dd"),HRS:e.time_record.hrs,CEP_REC:{CHARBASIS:null!=e.cepObj.selected&&void 0!=e.cepObj.selected?e.cepObj.selected.CHARBASIS:u.gridrow.CEP_REC.CHARBASIS}};(C=qt(d))&&(e.time_record.hrs=0)}else for(var c=new Date(e.weeklyStartDate.valueOf()),g=0;g<l.length;g++){var p=c.setDate(c.getDate()+g),d={DTE:p=t("date")(p,"yyyy-MM-dd"),HRS:e.time_record.hrs[g],CEP_REC:{CHARBASIS:null!=e.cepObj.selected&&void 0!=e.cepObj.selected?e.cepObj.selected.CHARBASIS:u.gridrow.CEP_REC.CHARBASIS}},C=qt(d);C&&null!=e.time_record.hrs[g]&&(e.time_record.hrs[g]=0)}e.cellNavigate=!1,e.isGridFocus=!0,Lt(e.time_record,e.isDailyMode),e.saveInlineEntry(e.time_record,i,-1,!0)}}),e.gridApi.core.on.sortChanged(e,function(e,t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.gridApi.core.on.sortChanged"),3==t.length)for(var i=0;i<3;i++)0==t[i].grouping.groupPriority?(0==t[i].visible&&(localStorage.UnsortApplied="0"),t[i].footerCellClass="removeSortClass"):t[i].footerCellClass="";if(0==t.length){var n=e.getColumn(localStorage.ungroupColumnName);n&&e.sortColumn(n,"desc"==localStorage.ungroupColSortDir?a.DESC:a.ASC,!1)}if(1==t.length&&(t[0].footerCellClass=""),t.length>1&&"1"!=localStorage.UnsortApplied){for(var r=null,l=null,o=0;o<t.length;o++)0==t[o].grouping.groupPriority&&(t[o].footerCellClass="removeSortClass",t[o].sort.priority=0,"1"==localStorage.GroupingCalled&&void 0!=t[o-1]&&null!=t[o-1]?(t[o-1].sort.priority=1,l=o-1):(t[t.length-1].sort.priority=1,l=t.length-1),r=o);if(null!=r)for(o=0;o<t.length;o++)o!=r&&o!=l&&(localStorage.UnsortApplied="1",t[o].unsort());else t[1].sort.priority=0,localStorage.UnsortApplied="1",t[0].unsort()}else localStorage.UnsortApplied="0"})}};var kt=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getActivityObj");var e={};return e.ACTICD=u.gridrow.ACTI_REC.ACTICD,e.DES=u.gridrow.ACTI_REC.DES,e.STAT=u.gridrow.ACTI_REC.STAT,e.COMPID=u.gridrow.ACTI_REC.COMPID,e},At=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getComponent");var e=!1;""!==u.gridrow.SCOPID&&"0"!==u.gridrow.SCOPID&&void 0!==u.gridrow.SCOPID&&(e=!0);var t={};return t.component={selected:{}},t.task={selected:{}},t.DES=u.gridrow.DES,t.scopeObj=e?{SCOPID:u.gridrow.SCOPID}:null,t.component.selected={ACTIVE:u.gridrow.ACTI_REC.STAT,ACTICD:u.gridrow.ACTI_REC.ACTICD,CMPTID:u.gridrow.CMPTID},t.task.selected={ACTIVE:u.gridrow.ACTI_REC.STAT,TSKID:u.gridrow.TSKID},t};e.currentFocused=[],e.getCurrentFocus=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.getCurrentFocus");var t=e.gridApi.cellNav.getFocusedCell();if(null!==t&&!u.columnBlank){e.isDailyMode||(t.row.entity.TEID=t.row.entity.TEID_data);var i=e.gridOptions.data.indexOf(t.row.entity);"-1"!=i&&(e.currentFocused={COLUMNTEID:t.row.entity.TEID,COLUMNNAME:t.col.colDef.name,rowIndex:i})}};var Lt=function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateHrsField"),i?e.dailyHour=Number(parseFloat(t.HRS).toFixed(2)):e.weeklyHours=t.hrs},Ft=function(e,t){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.updateTEIdToDelete");var i=null,a=0,n=e.toString().split(",");if(t||u.isPasteClicked||(n.sort().map(Number),a=n[n.length-1],n.splice(n.length-1,1),i=""),n.length>1)for(var i=n[0].toString(),r=1;r<n.length;r++)i=i+","+n[r].toString();else 1==n.length&&(i=n[0].toString());return null!=i&&(e=a),[e,i]},Nt=[{name:"Delete",cellClass:"gridMainGrid",headerCellClass:"monthendClass3",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1.5%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" value={{row.entity}} class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{field:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1.5%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents"  title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{name:"TYPE",suppressRemoveSort:!0,displayName:t("translate")("lbl_type"),enableHiding:!0,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!1,enableColumnResizing:!1,width:"*",enableCellEdit:!1,enableColumnResizing:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.TYPE}}"><span ng-if="!row.groupHeader">{{row.entity.TYPE}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{field:"CEP_REC.CLIENO",width:120,enableHiding:!1,enableAgg:!1,sort:{direction:a.ASC,priority:0},groupingShowAggregationMenu:!1,enableColumnResizing:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'T\') > -1" >{{::grid.appScope.BillableVar}}</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate }}:</span> <span class="flRight">{{row.entity.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity, \'txtgridcep\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\" ></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"CEP_REC.CHARBASIS",width:47,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEdit:!1,enableColumnResizing:!1,headerCellTemplate:ot,cellTemplate:'<div class="ui-grid-cell"  style="width:100%;height:100%"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.CEP_REC.CHARBASIS}}</div></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:"23%",suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),groupingShowAggregationMenu:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridact\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true' ><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.loadDesktopActivityProject(row,true)\" ></i></div>",cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridcomponent\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridtask\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),groupingShowAggregationMenu:!1,visible:!1,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridscope\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICDESC",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcItem"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-cell" ng-attr-title="{{row.entity.ICDESC == \' \'?\'\':row.entity.ICDESC}}" style="width:100%;height:100%"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ICDESC}}</div></div>',allowCellFocus:!0,editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridicdesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadICItems()" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICCHRGE",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcCharge"),enableHiding:!1,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableColumnResizing:!1,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig rightAligPadding" style="width:100%;height:100%"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{((row.entity.ICCHRGE.trim()==="")?(null):(row.entity.ICCHRGE |decimal))}}</div></div>',allowCellFocus:!0,editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",width:"*",suppressRemoveSort:!0,displayName:"Description",groupingShowAggregationMenu:!1,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.DES}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgriddesc\' + row.entity.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true\' ><i class=\'fa fa-star\'></i></button><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDescription(row.entity)"></i>\x3c!--<img ng-click="grid.appScope.showInfo(row)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}],$t=[{name:"Delete",cellClass:"gridMainGrid",headerCellClass:"monthendClass4",enableSorting:!1,enableColumnMenu:!1,displayName:"",width:"1.5%",enableFiltering:!1,enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" value={{row.entity}} class="icon-delete ui-grid-cell-contents" title="{{((row.entity.TIMSUB | uppercase) == \'Y\') ?grid.appScope.sbmtdTitle:grid.appScope.dltTitle}}"><input ng-class="(row.entity.TIMSUB | uppercase) == \'Y\' ?\'entry-submit\':\'entry-delete\'" ng-click="grid.appScope.deleteEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{field:"Edit",enableSorting:!1,enableColumnMenu:!1,displayName:"",enableFiltering:!1,width:"1.5%",enableHiding:!1,groupingShowAggregationMenu:!1,enableCellEdit:!1,enableColumnResizing:!1,cellTemplate:'<div ng-if="!row.groupHeader" class="icon-edit ui-grid-cell-contents"  title="{{::grid.appScope.openEntryTitle}}"><input class="entry-edit" ng-click="grid.appScope.editTimeEntry(row.entity)" type="image" id="imgGridDeleteEdit" /></div>',allowCellFocus:!1,enableColumnMoving:!1},{name:"TYPE",suppressRemoveSort:!0,displayName:t("translate")("lbl_type"),enableHiding:!0,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!1,enableColumnResizing:!1,width:"*",enableCellEdit:!1,enableColumnResizing:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.TYPE}}"><span ng-if="!row.groupHeader">{{row.entity.TYPE}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{field:"CEP_REC.CLIENO",width:120,enableHiding:!1,enableAgg:!1,groupingShowAggregationMenu:!1,sort:{direction:a.ASC,priority:0},enableColumnResizing:!1,suppressRemoveSort:!0,displayName:t("translate")("lbl_CepCode"),enableCellEdit:!0,cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}],enableCellEditOnFocus:!0,cellTemplate:'<div id="header" class="ui-grid-cell-contents ui-grid-cell" style="width:100%;height:100%"><div class="myTimeHeaderClass" ng-if="row.groupHeader">{{grid.appScope.getHeader(row)}}</div><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-mouseover="grid.appScope.xyPosition($event)" ng-if="!row.groupHeader"><div class="tooltip1 ui-grid-cell-contents"><div class="tooltiptext1"><div class="tooltip-heading"><ul><li><h4>{{row.entity.CEP_REC.CLIENAME}}</h4> <span class="flRight firstRight">{{row.entity.CEP_REC.OCOMP}}</span></li><li><span class="flLeft">{{row.entity.CEP_REC.CLIENO}}</span><span class="flRight"><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'C\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'S\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'R\') > -1"> Chargeable</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'N\') > -1"> Non {{::grid.appScope.BillableVar}}</span><span ng-if="row.entity.CEP_REC.CHARBASIS.indexOf(\'T\') > -1">{{::grid.appScope.BillableVar}}</span></span></li></ul></div> <div class="tooltip-desc"><ul><li><span class="flLeft">{{ ::"lbl_Project" | translate }}:</span> <span class="flRight">{{row.entity.CEP_REC.PRJNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_engmnt" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.ENGNAME}}</span></li><li><span class="flLeft">{{ ::"lbl_prgrm" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.PROG}}</span></li><li><span class="flLeft">{{ ::"lbl_bsns" | translate }}:</span><span class="flRight">{{row.entity.CEP_REC.GLOBBUSI}}</span></li></ul></div></div> {{COL_FIELD}} </div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-cepFav"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgridcep\' + row.entity.TEID}}" ui-mask="{{grid.appScope.cepMasking}}" placeholder="______-___-___" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridCepComplete(row.entity, \'txtgridcep\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV!=true && grid.appScope.isCepFavSet'><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeCepInlineFav(row)' ng-show='grid.appScope.ISINLINECEPFAV==true && grid.appScope.isCepFavSet' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.showCEPFavourites(row)\" ></i></div><div class=\"searchCep\" ng-click=\"grid.appScope.closeSearchGridCep(row.entity)\" style=\"position:absolute;z-index:5;background:#fff\" ng-if=\"grid.appScope.searchGridCep(row) == true\">"+lt+"</div>"},{name:"CEP_REC.CHARBASIS",width:47,groupingShowAggregationMenu:!1,suppressRemoveSort:!0,displayName:t("translate")("msg_CB"),enableCellEdit:!1,enableColumnResizing:!1,headerCellTemplate:ot,cellTemplate:'<div class="ui-grid-cell" style="width:100%;height:100%"><span ng-if="!row.groupHeader">{{row.entity.CEP_REC.CHARBASIS}}</span></div>',allowCellFocus:!1,menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ProjectActivity",width:"23%",suppressRemoveSort:!0,displayName:t("translate")("msg_activityProjCNT"),groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.ProjectActivity}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ProjectActivity}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-Act"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridact\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridact\' + row.entity.TEID)" />'+"<button class='star-fav star-icon' ng-mousedown='grid.appScope.addFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav!=true' ><i class='fa fa-star-o'></i></button><button class='star-fav star-icon' ng-mousedown='grid.appScope.removeFavActInline(row.entity.ACTI_REC)' ng-show='grid.appScope.isSameCompny && grid.appScope.IsInlineActFav==true' ><i class='fa fa-star'></i></button><i class=\"glyphicon glyphicon-triangle-bottom\" ng-click=\"grid.appScope.loadDesktopActivityProject(row,true)\" ></i></div>",cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Component",suppressRemoveSort:!0,displayName:t("translate")("lbl_Component"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Component}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Component}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridcomponent\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridcomponent\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Task",suppressRemoveSort:!0,displayName:t("translate")("lbl_Task"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit"  ng-attr-title="{{row.entity.Task}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Task}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridtask\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridtask\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"Scope",suppressRemoveSort:!0,displayName:t("translate")("lbl_Scope"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableCellEditOnFocus:!0,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.Scope}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.Scope}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;"  type="INPUT_TYPE" ng-attr-id="{{\'txtgridscope\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgridscope\' + row.entity.TEID)" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDesktopActivityProject(row,true)" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICDESC",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcItem"),groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,cellTemplate:'<div class="ui-grid-cell" ng-attr-title="{{row.entity.ICDESC == \' \'?\'\':row.entity.ICDESC}}" style="width:100%;height:100%"><div  ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.ICDESC}}</div></div>',allowCellFocus:!0,editableCellTemplate:'<div class="ui-grid-edit"><input style="width:100%;" readOnly type="INPUT_TYPE" ng-attr-id="{{\'txtgridicdesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" /><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadICItems()" ></i></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"ICCHRGE",suppressRemoveSort:!0,displayName:t("translate")("lbl_IcCharge"),enableHiding:!1,enableAgg:!1,groupingShowAggregationMenu:!1,visible:!0,enableCellEdit:!0,enableColumnResizing:!1,type:"number",cellTemplate:'<div class="ui-grid-cell rightAlig rightAligPadding" style="width:100%;height:100%"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{((row.entity.ICCHRGE.trim()==="")?(null):(row.entity.ICCHRGE |decimal))}}</div></div>',allowCellFocus:!0,editableCellTemplate:'<div class="ui-grid-edit"><input class="hrsInputGrid hrsTxt" style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txthrs\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keypress="grid.appScope.filterValue($event)"/></div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]},{name:"DES",suppressRemoveSort:!0,displayName:"Description",groupingShowAggregationMenu:!1,enableCellEdit:!0,visible:!1,cellTemplate:'<div class="ui-grid-edit" ng-attr-title="{{row.entity.DES}}"><div ng-click="grid.appScope.stopEditOnCtrlClick($event)" ng-if="!row.groupHeader">{{row.entity.DES}}</div></div>',editableCellTemplate:'<div class="ui-grid-edit ui-grid-inline-desc"><input style="width:100%;" type="INPUT_TYPE" ng-attr-id="{{\'txtgriddesc\' + row.entity.TEID}}" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD" ng-keyup="grid.appScope.gridActComplete(row.entity, \'txtgriddesc\' + row.entity.TEID)" /><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.addFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav!=true\' ><i class=\'fa fa-star-o\'></i></button><button class=\'star-fav star-icon\' ng-mousedown=\'grid.appScope.removeFavDescInline(row.entity.DES.trim())\' ng-show=\'row.entity.DES.trim().length>0 && grid.appScope.IsInlineDescFav==true\' ><i class=\'fa fa-star\'></i></button><i class="glyphicon glyphicon-triangle-bottom" ng-click="grid.appScope.loadDescription(row.entity)"></i>\x3c!--<img ng-click="grid.appScope.showInfo(row)" src="img/arrow.png" alt="" width="15" height="12">--\x3e</div>',cellEditableCondition:function(e){return"Y"==e.row.entity.TIMSUB?0:1},menuItems:[{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-ok",action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return this.grid.options.enableFiltering}},{title:t("translate")("msg_Filter"),icon:"ui-grid-icon-cancel",order:0,action:function(e){this.grid.options.enableFiltering=!this.grid.options.enableFiltering,this.grid.api.core.notifyDataChange(a.dataChange.COLUMN)},shown:function(){return!this.grid.options.enableFiltering}}]}],Ht=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.timePriorToBillingStartDate");var i=Ce(e.currentDate),a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6),n=e.isDailyMode?e.currentDate:a,r=t("date")(e.initialDetail.EMPL_REC.BRSTDTE,"yyyy-MM-dd");if(u.isDatePriorToBillingDate(r,n)){var l=r.split("-"),o=l[2].split(" "),s=new Date(l[0],l[1]-1,o[0]).toString().split(" "),d=s[2]+"-"+s[1]+"-"+s[3];return Yt([t("translate")("msg_TimePriorToBillingStartDate",{dateVal:d})],t("translate")("lbl_Error"),!1),!1}return!0};e.$on("rightPanelCEPCodefavourite",function(e,t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.rightPanelCEPCodefavourite");var i=t.value.valueOf();i.populateCepOnly=!0,xt(i)});var xt=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.openNewEntryWindowFromCEPFav"),e.checkRevMonthFlag){if(Ht()){var i=e.isDailyMode?e.currentDate:e.weeklyStartDate;t.HRS=0,t.weeklyHour=[0,0,0,0,0,0,0],Ut(i,e.isDailyMode,e.currentDate,t)}}else Yt([e.revClosed])};e.openNewEntryWind=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.openNewEntryWind"),e.checkRevMonthFlag)if(e.showNewFlag=!1,u.columnBlank){var a={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",a)}else{var n=e.isDailyMode?e.currentDate:e.weeklyStartDate;Ht()&&(u.showRightMenuFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,e.showEditFlag=!1,u.newEntryOpened=!0,e.beginEdit=!1,Ut(n,e.isDailyMode,e.currentDate,null))}else{var r=t("translate")("lbl_revClosed");gi([r])}};var Ut=function(i,a,n,r){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.loadNewEnteryWindow");var l=n;if(a||(l=i),!R.checkTerminationDate(e.initialDetail.EMPL_REC.TERMDTE,l)){var o=t("translate")("msg_InActiveDesignateSelected",{DOT:e.initialDetail.EMPL_REC.TERMDTE});return gi([o]),!1}var s=[0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0];a?(s[0]=parseFloat(e.ttlHrs),null!=r&&(d[0]=parseFloat(r.HRS))):(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(n,"yyyy-MM-dd"),s[0]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum1?0:e.itemsDataTotal.HrsTotalSum1),s[1]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum2?0:e.itemsDataTotal.HrsTotalSum2),s[2]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum3?0:e.itemsDataTotal.HrsTotalSum3),s[3]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum4?0:e.itemsDataTotal.HrsTotalSum4),s[4]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum5?0:e.itemsDataTotal.HrsTotalSum5),s[5]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum6?0:e.itemsDataTotal.HrsTotalSum6),s[6]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum7?0:e.itemsDataTotal.HrsTotalSum7),null!=r&&(d=r.weeklyHour.slice(0)));var c={startDate:i,isDailyMode:a,currentDate:n,editTEObj:r,isClosedRevMonth:!e.checkRevMonthFlag,hoursTotalDetail:{editEntryHrs:d,weeklyHrsSumDayWise:s}};e.openModalCtrl="newEntry",e.open("Desktop/NewEntry/templates/NewEntry.html","NewEntryCtrl",c)};e.editTimeEntry=function(i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.editTimeEntry");var a=e.gridApi.selection.getSelectedRows();if(u.rowIndex=a[0],a.length>1)gi([t("translate")("lbl_notMulEntries")]);else{u.newEntryOpened=!0;var n,r=e.isDailyMode;if(r)n=new Date(e.currentDate.valueOf()),i.isICEntry=!1,void 0!=i.ICRTCD&&null!=i.ICRTCD&&""!=i.ICRTCD.trim()&&i.ICRTCD.trim().length&&(i.isICEntry=!0);else{n=new Date(e.weeklyStartDate.valueOf()),i.weeklyHour=[i.Hrs1,i.Hrs2,i.Hrs3,i.Hrs4,i.Hrs5,i.Hrs6,i.Hrs7];var l=new Array(7);l[0]=void 0!==i.TEID1?i.TEID1:0,l[1]=void 0!==i.TEID2?i.TEID2:0,l[2]=void 0!==i.TEID3?i.TEID3:0,l[3]=void 0!==i.TEID4?i.TEID4:0,l[4]=void 0!==i.TEID5?i.TEID5:0,l[5]=void 0!==i.TEID6?i.TEID6:0,l[6]=void 0!==i.TEID7?i.TEID7:0,i.teIdData=l}Ut(n,r,e.currentDate,i)}},e.setMultiSelect=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.setMultiSelect"),$("#tab1List").multiSelect({actcls:"rowSelected",selector:".ui-grid-row",except:[""],statics:[".danger",'[data-no="1"]'],callback:function(t){e.selectedRows=t}})},e.selectedRows=[],e.cords={x:0,y:0},e.$on("bindGridEvents",function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.bindGridEvents"),s(function(){e.bindGridEvents()},1e3)});var Bt=null,Gt="",Jt="";e.bindGridEvents=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.bindGridEvents"),e.checkRevMonthFlag&&e.setDropable(),$(".ui-grid-row").draggable({helper:"clone",revert:"invalid",appendTo:".page-wrapper",start:function(i,a){$("#dpmytime td").addClass("highlightCls");var n="";Bt=null,e.isFromGrid=!1;try{try{(Bt=JSON.parse(i.target.childNodes[0].childNodes[1].childNodes[1].attributes.value.nodeValue)).isDroppable=!0,"T"!=Bt.CEP_REC.CHARBASIS&&"S"!=Bt.CEP_REC.CHARBASIS&&"C"!=Bt.CEP_REC.CHARBASIS||parseFloat(Bt.HRS)<0&&(Bt.isDroppable=!1)}catch(e){Bt={isDroppable:!0}}if(e.selectedRows=[],!e.isDailyMode)return!1;$(".page-wrapper").css("overflow","hidden"),n=e.checkRevMonthFlag&&Bt.isDroppable?"img/desktop/clone-icon.gif":"img/no-copy.png",$(".ui-grid-viewport").css("overflow","visible");var r=0;try{r=e.gridApi.selection.getSelectedRows()}catch(e){console.log("error in $scope.gridApi.selection.getSelectedRows()")}for(var l=0;l<r.length;l++)e.isFromGrid=!0,e.selectedRows.push(JSON.stringify(r[l]));null!=e.selectedRows&&0!=e.selectedRows.length||e.selectedRows.push(i.target);var o=e.selectedRows.length;e.cords.x=i.clientX-225,Gt='<div class="dragDrop" style=" z-index:1; font: 11px/16px Trebuchet Ms,tahoma,verdana,helvetica; color: #000;padding:2px 5px 2px 5px;display: inline-block; background:#fff; border: 1px solid #e2e2e2; box-shadow:2px 3px 1px #dddddd;left:'+e.cords.x+'px;position: relative;"><img id="imgUiHelper" src=img/no-copy.png /> <span>'+o+t("translate")("msg_slctdCpdEntry")+"</span></div>",Jt='<div class="dragDrop" style="position:relative; font: 11px/16px Trebuchet Ms,tahoma,verdana,helvetica; color: #000; display: inline-block; z-index:1;padding:2px 5px 2px 5px; background:#fff; border: 1px solid #e2e2e2; box-shadow:2px 3px 1px #dddddd;left:'+e.cords.x+'px;"><img  src='+n+" /> <span>"+o+t("translate")("msg_slctdCpdEntry")+"</span></div>",a.helper.html(Jt)}catch(e){return $(".page-wrapper").css("overflow","visible"),console.log(e.message),!0}},stop:function(t,i){try{$(".page-wrapper").css("overflow","visible"),$(".ui-grid-viewport").css("overflow","scroll"),e.isCalDrop=!1,e.draggedTimeEntry=null,e.selectedRows=[],$("#dpmytime td").removeClass("highlightCls")}catch(e){$("#dpmytime td").removeClass("highlightCls"),console.log("stop:drag error=="+e.message)}}})},e.gridOptions=angular.copy(e.gridOptions1);var Vt=function(i,a,n){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getNearestMultple"),"0"==a)return parseFloat(i).toFixed(2);if(0!=i%a){var r=t("translate")("msg_HoursRound",{TINT:a});-1==e.msgList.indexOf(r)&&-1==e.msgList.indexOf("-"+r)&&e.msgList.push(r)}return i>0?(Math.ceil(i/a)*a).toFixed(2):i<0?(Math.floor(i/a)*a).toFixed(2):parseFloat(i).toFixed(2)},Yt=function(t,i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.showValidationMsg");var n={errorList:t,title:i,isWarning:a};e.openModalCtrl="saveValidationAlert",e.open("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",n)},jt=function(i){return u.errorLogMethod("DailyTimeDesktopGridCtrl.var.get24HrsMassage"),e.isDailyMode?t("translate")("msg_24HrsDay",{dateVal:i}):t("translate")("msg_24HrsWeek",{dateVal:i})},Wt=function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.isDayHourSumExceed24Hour");var a=!1,n=[0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0];e.isDailyMode?(n[0]=parseFloat(e.ttlHrs),r[0]=parseFloat(e.oldRowEntry)):(n[0]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum1?0:e.itemsDataTotal.HrsTotalSum1),n[1]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum2?0:e.itemsDataTotal.HrsTotalSum2),n[2]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum3?0:e.itemsDataTotal.HrsTotalSum3),n[3]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum4?0:e.itemsDataTotal.HrsTotalSum4),n[4]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum5?0:e.itemsDataTotal.HrsTotalSum5),n[5]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum6?0:e.itemsDataTotal.HrsTotalSum6),n[6]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum7?0:e.itemsDataTotal.HrsTotalSum7),r=e.oldRowEntry);var l=[0,0,0,0,0,0,0];return e.isDailyMode&&(l[0]=t),hrsPerDay=parseFloat(t),n[i]-r[i]+hrsPerDay>24&&(a=!0),e.oldRowEntry="",a},Kt=function(i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.checkHours");var n=0,r="",l=!0,o=e.initialDetail.COMP_REC.TINT,s="",d="-",c=(e.startDate,new Date(e.currentDate)),g=t("date")(c,"dd-MMM-yyyy"),p=new Date(e.weeklyStartDate);p=t("date")(p,"dd-MMM-yyyy");var C=e.isDailyMode?i.hrs:i.hrs[a];if(n=e.isDailyMode?i.hrs:i.hrs[a],n=parseFloat(n),isNaN(n)){if(e.isDailyMode&&(l=!1),""===C||null==C||e.isDailyMode||(l=!1),!e.isDailyMode)for(var m=0;m<7;m++){if(""!==i.hrs[m]&&null!=i.hrs[m]){l=!0;break}l=!1}}else n>200?l=!1:n<-200&&(l=!1),r=Vt(n,o,e.msgList),e.isDailyMode?(weekDay=0,s=jt(g)):s=jt(p),d=e.msgList.length>=1?d:"",Wt(r,a)&&-1==e.msgList.indexOf(d+s)&&-1==e.msgList.indexOf(s)&&e.msgList.push(d+s),e.msgList.length>0&&(e.msgList[0]=e.msgList.length>1&&0!=e.msgList[0].indexOf("-")?d+e.msgList[0]:e.msgList[0]);return l&&(e.isDailyMode?i.hrs=r:i.hrs[a]=r),l},zt=function(i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.checkHoursAfterCellEdit");var n=0,r=!0,l=(e.initialDetail.COMP_REC.TINT,e.startDate,new Date(e.currentDate)),o=(t("date")(l,"dd-MMM-yyyy"),e.isDailyMode?i.hrs:i.hrs[a]);return n=e.isDailyMode?i.hrs:i.hrs[a],n=parseFloat(n),isNaN(n)?(e.isDailyMode&&(r=!1),""==o||e.isDailyMode||null==i.hrs[a]||(r=!1)):n>200?r=!1:n<-200&&(r=!1),r&&!e.isDailyMode&&(void 0===i.hrs[a]?(r=!1,i.hrs[a]=e.oldEntry):i.hrs.filter(function(e){return null==e}).length>=7&&(r=!1,i.hrs[a]=e.oldEntry)),r};e.finalSave=function(i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.finalSave"),e.saveFlag){_t();var n=JSON.parse(i[0]),o=n.HRSIndex;delete n.HRSIndex,l.saveTimeSheet(e.loginDetail.SESKEY,e.loginDetail.EMPLID,JSON.stringify(n),y.DOMAINURL).then(function(n){e.saveFlag=!1,null!==e.savedInlineRow&&(e.savedInlineRow.teIdDaywise[o]=n.SAVTIM_OUT_OBJ.TIMEID),0==parseInt(n.SAVTIM_OUT_OBJ.RETCD)?(u.countmove=0,e.cepfavourite=!1,u.popupload=!1,u.columnBlank=!1,i.splice(0,1),i.length>0?(e.saveFlag=!0,e.finalSave(i,a)):null!=a&&a.trim().length>0?null!=a&&a.trim().length>0&&r.deleteTimeEntries(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(i){0==parseInt(i.DELTIM_OUT_OBJ.RETCD)?e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate,!0):(Pt(),Yt([i.DELTIM_OUT_OBJ.ERRMSG],t("translate")("lbl_Error"),!1))}):e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate,!0)):(u.rowIndex=angular.copy(e.lastRowEntry),n.SAVTIM_OUT_OBJ.ERRMSG==t("translate")("msg_FutureTimeEntry")&&null!=a&&a.trim().length>0&&r.deleteTimeEntries(e.loginDetail.SESKEY,e.loginDetail.EMPLID,a).then(function(i){0==parseInt(i.DELTIM_OUT_OBJ.RETCD)?e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate):(Pt(),Yt([i.DELTIM_OUT_OBJ.ERRMSG],t("translate")("lbl_Error"),!1))}),e.cepfavourite=!1,""!=e.previousData&&void 0!=e.previousData.CLIENO?(void 0!=e.previousData.CLIENO&&14!=e.previousData.CLIENO.length&&(e.previousData.CLIENO=e.previousData.CLIENO+"-"+("0"+e.previousData.ENGNO).slice(-3).toString()+"-"+("0"+e.previousData.PRJNO).slice(-3).toString()),e.time_record.cepRec.CLIENO=e.previousData.CLIENO,u.columnBlank=!1):void 0!=e.previousData.cepRec?(14!=e.previousData.cepRec.CLIENO.length&&(e.previousData.cepRec.CLIENO=e.previousData.cepRec.CLIENO+"-"+("0"+e.previousData.cepRec.ENGNO).slice(-3).toString()+"-"+("0"+e.previousData.cepRec.PRJNO).slice(-3).toString()),e.time_record.cepRec.CLIENO=e.previousData.cepRec.CLIENO,u.columnBlank=!1):void 0!=e.previousData.CEP_REC&&(14!=e.previousData.CEP_REC.CLIENO.length&&(e.previousData.CEP_REC.CLIENO=e.previousData.CEP_REC.CLIENO+"-"+("0"+e.previousData.CEP_REC.ENGNO).slice(-3).toString()+"-"+("0"+e.previousData.CEP_REC.PRJNO).slice(-3).toString()),e.time_record.cepRec.CLIENO=e.previousData.CEP_REC.CLIENO,e.getCurrentFocus(),e.previousData.CEP_REC.CATID>0?e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=e.previousData.CTSDESC:e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=e.previousData.ACTI_REC.DES,u.columnBlank=!1),ui(n.SAVTIM_OUT_OBJ.ERRMSG,i,a)||(Pt(),Yt([n.SAVTIM_OUT_OBJ.ERRMSG],t("translate")("lbl_Error"),!1)),(1==e.isRowEditTemp||e.isDescriptionPopupLoad)&&e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate),e.isRowEditTemp=!1,e.previousData=""),e.gridApi.grid.isRowSet||(e.oldCepEntry="",e.savedInlineRow=null),0==i.length&&(e.previousData="",e.isRowEditTemp=!1,Xt()),e.isDescriptionPopupLoad=!1})}else e.isDescriptionPopupLoad=!1,Pt();e.oldRowEntry=""};var Xt=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.resetWindow"),e.cpeListData=[],e.IsActivity=!0,e.dailyHour=null,e.weeklyHours=[null,null,null,null,null,null,null]};e.loadDescription=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadDescription"),e.saveOnCancelPopUp=e.isRowEdit;var i=t.DES.trim(),a={IsActivity:e.IsActivity,desc:i,isBroadcast:!0};e.openModalCtrl="DescriptionCtrl",e.open("Desktop/NewEntry/templates//Description.html","DescriptionDesktopCtrl",a),e.isDescriptionPopupLoad=!0,e.saveFlag=!1},e.loadICItems=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadICItems");var t={sessionKey:e.loginDetail.SESKEY,compId:e.initialDetail.COMP_REC.COMPID,domainURL:e.domainURL,selectedICItem:null,isBroadcast:!0};e.openModalCtrl="ICItemCtrl",t.popUpName="ICItemCtrl",e.open("Desktop/NewEntry/templates/ICItem.html","ICItemCtrl",t)};var qt=function(e){return u.errorLogMethod("DailyTimeDesktopGridCtrl.var.isInvalidFutureEntry"),H.futureEntry(e)};e.saveInlineEntry=function(i,a,n,r){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.saveInlineEntry");var l=angular.copy(i);e.isContinue=!0;var o=!0,s="",d=[];e.msgList=[];try{if(n.length>0){for(b=0;b<n.length&&(T=Kt(l,n[b]));b++);e.msgList.length>0&&(Yt(e.msgList),e.msgList=[]),e.isContinue=T}if(Lt(l,e.isDailyMode),e.isContinue){e.cepfavourite&&(delete e.cepObj.selected.CEPCODE,delete e.cepObj.selected.CEPFAV,delete e.cepObj.selected.RMGR,delete e.cepObj.selected.cepCodeWithMask,delete e.cepObj.selected.cepCodeWithOutMask,delete e.cepObj.selected.PRJO,delete e.cepObj.selected.ENGCON,delete e.cepObj.selected.ENGO,delete e.cepObj.selected.PRJM,e.cepObj.selected.ENGNO=("00"+e.cepObj.selected.ENGNO).slice(-3).toString(),e.cepObj.selected.PRJNO=("00"+e.cepObj.selected.PRJNO).slice(-3).toString(),e.cepObj.selected={CLIEID:e.cepObj.selected.CLIEID,CLIENO:e.cepObj.selected.CLIENO,CLIENAME:e.cepObj.selected.CLIENAME,CLIEACTIVE:e.cepObj.selected.CLIEACTIVE,ENGID:e.cepObj.selected.ENGID,ENGNO:e.cepObj.selected.ENGNO,ENGNAME:e.cepObj.selected.ENGNAME,ENGACTIVE:e.cepObj.selected.ENGACTIVE,ENGTIMFLAG:e.cepObj.selected.ENGTIMFLAG,PRJID:e.cepObj.selected.PRJID,PRJNO:e.cepObj.selected.PRJNO,PRJNAME:e.cepObj.selected.PRJNAME,PRJACTIVE:e.cepObj.selected.PRJACTIVE,PRJTIMFLAG:e.cepObj.selected.PRJTIMFLAG,PROG:e.cepObj.selected.PROG,GLOBBUSI:e.cepObj.selected.GLOBBUSI,OCOMP:e.cepObj.selected.OCOMP,CHARBASIS:e.cepObj.selected.CHARBASIS,COMPID:e.cepObj.selected.COMPID,RENPRJNO:e.cepObj.selected.RENPRJNO,CRSBRD:e.cepObj.selected.CRSBRD,RECTIM:e.cepObj.selected.RECTIM,CATID:e.cepObj.selected.CATID}),l.cepRec.PROG="",l.cepRec.GLOBBUSI="",l.cepRec.CLIEID,enteries=e.isDailyMode?1:7;var c={};e.isProjectTask?(o=!1,c={ACTICD:l.actRec.ACTICD,DES:"",STAT:"Y",COMPID:0}):c=l.actRec;var g=l.cepRec.CLIENO;g.length>6&&(l.cepRec.CLIENO=g.substring(0,6),l.cepRec.ENGNO=g.substring(7,10),l.cepRec.PRJNO=g.substring(11,14));var p=[0,0,0,0,0,0,0];u.rowIndex.CEP_REC=null!=e.cepObj.selected&&1==e.isGridFocus?e.cepObj.selected:l.cepRec,u.rowIndex.ACTI_REC=c,u.rowIndex.DES=l.description,u.rowIndex.CEP_REC=JSON.parse(JSON.stringify(u.rowIndex.CEP_REC));var C=u.rowIndex.CEP_REC;for(u.rowIndex.CEP_REC.CLIENO=C.CLIENO+"-"+("0"+C.ENGNO).slice(-3).toString()+"-"+("0"+C.PRJNO).slice(-3).toString(),b=0;b<enteries;b++){var m,h=l.teId;if(e.isDailyMode){m=l.hrs;var E=new Date(e.currentDate.valueOf());D=t("date")(E,"yyyy-MM-dd")}else{var D=(E=new Date(e.weeklyStartDate.valueOf())).setDate(E.getDate()+b);D=t("date")(D,"yyyy-MM-dd"),""===e.weeklyHours[b]&&0!==e.weeklyHours[b]&&(e.weeklyHours[b]=null);var y=Ft(l.teId[b],null==e.weeklyHours[b]);if(h=y[0],""!=y[1]&&(s=""==s?y[1]:s+","+y[1]),null==e.weeklyHours[b])continue;m=parseFloat(e.weeklyHours[b]),p[b]=h}var v={HRSIndex:b,TEID:h,DTE:D,CEP_REC:null!=e.cepObj.selected&&1==e.isGridFocus?e.cepObj.selected:l.cepRec,ACTI_REC:c,ICRTCD:l.icrtcd,ICDESC:l.icdesc,ICCHRGE:l.icchrge,HRS:m,DES:l.description,CTDESC:l.CTDESC,CMPTID:o?0:l.cmptId,CATID:o?0:null!=e.cepObj.selected&&1==e.isGridFocus?e.cepObj.selected.CATID:l.cepRec.CATID,TSKID:o?0:l.tskId,SCOID:l.scopId,REGFLAG:l.regFlag,PRSTCD:l.stateCode},f=JSON.stringify(v,function(e,t){if("$$hashKey"!==e)return t});d.push(f)}var T=!0;e.saveInlineEntryFlag=!0;for(var b=0;b<d.length;b++){var S=[];if(S=[d[b]],!(T=e.validateEntries(e.isDailyMode,JSON.parse(d[b]),S,D,!1,!0)))break}e.saveInlineEntryFlag=!1,T?(e.savedInlineRow=null,r||(e.savedInlineRow={rowId:i.rowId,teIdDaywise:p}),e.finalSave(d,s)):(u.rowIndex=angular.copy(e.lastRowEntry),e.cnt=1,""!=e.previousData&&void 0!=e.previousData.CEP_REC&&(e.time_record.cepRec.CLIENO=e.previousData.CEP_REC.CLIENO,e.getCurrentFocus(),e.previousData.CEP_REC.CATID>0?e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=e.previousData.CTSDESC:e.gridOptions.data[e.currentFocused.rowIndex].ProjectActivity=e.previousData.ACTI_REC.DES,u.columnBlank=!1),(1==e.isRowEditTemp||e.isDescriptionPopupLoad)&&(e.GetData(e.isDailyMode,e.isDailyMode?e.currentDate:e.weeklyStartDate),e.isRowEditTemp=!1),e.isDescriptionPopupLoad=!1,Pt()),e.details=[]}else Pt()}catch(e){Pt(),console.log("error in $scope.saveInlineEntry=="+e.message)}},e.isCalDrop=!1,e.isDrop=!0,e.setDropable=function(){$(".tab1").droppable({accept:".ui-grid-row",tolerance:"pointer",over:function(t,i){var a=Gt;e.checkRevMonthFlag&&Bt.isDroppable&&(e.isDraggingFlag=!0,a=Jt),s(function(){i.helper.html(a)})},out:function(e,t){t.helper.html(Gt)},drop:function(t,i){try{e.loginDetail=u.GetLoginDetail(!1,!0),void 0==e.currentDate&&(alert(void 0),alert(u.$stateParams.currentDate));var a=[];if(null!=e.selectedRows){for(var n=0;n<e.selectedRows.length;n++){var r=null;r=e.isFromGrid?JSON.parse(e.selectedRows[n]):JSON.parse(e.selectedRows[n].childNodes[0].childNodes[1].childNodes[1].attributes.value.nodeValue),a.push(angular.copy(r))}e.pasteByDrag(a)}}catch(e){console.log("error on drop to tab1=="+e.message)}}}),$("#dvdatepicker").droppable({accept:".ui-grid-row",tolerance:"pointer",out:function(e,t){t.helper.html(Gt)}}),$("#dpmytime td button").droppable({accept:".ui-grid-row",tolerance:"pointer",over:function(t,i){e.isDrop=$(t.target).hasClass("dt-available"),Bt.isDroppable&&e.isDrop?i.helper.html(Jt):i.helper.html(Gt)},out:function(e,t){t.helper.html(Gt)},drop:function(t,i){try{if(e.isDrop){$(this);var a=localStorage.getItem("dragableCalDate");if(null!=a){a=JSON.parse(a),e.isCalDrop=!0,e.calDropDate=new Date(a.date),e.loginDetail=u.GetLoginDetail(!1,!0);var n=[];if(null!=e.selectedRows&&e.selectedRows.length>0){for(var r=0;r<e.selectedRows.length;r++){var l=null;l=e.isFromGrid?JSON.parse(e.selectedRows[r]):JSON.parse(e.selectedRows[r].childNodes[0].childNodes[1].childNodes[1].attributes.value.nodeValue),n.push(angular.copy(l))}e.pasteByDrag(n)}}}}catch(e){console.log("error on drop to calandar=="+e.message)}}})},e.pasteByDrag=function(i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteByDrag");for(var a=!0,n=0;n<i.length;n++){var r=i[n],l=JSON.parse(JSON.stringify(r)),o=JSON.parse(JSON.stringify(l));if(e.isDailyMode||(l=l.data),"T"==l.CEP_REC.CHARBASIS||"S"==l.CEP_REC.CHARBASIS||"C"==l.CEP_REC.CHARBASIS){if(e.isDailyMode&&parseFloat(l.HRS)<0){a=!1;break}if(!e.isDailyMode&&(parseFloat(o.Hrs1)<0||parseFloat(o.Hrs2)<0||parseFloat(o.Hrs3)<0||parseFloat(o.Hrs4)<0||parseFloat(o.Hrs5)<0||parseFloat(o.Hrs6)<0||parseFloat(o.Hrs7)<0)){a=!1;break}}}if(void 0!==e.initialDetail.EMPL_REC.TERMDTE&&null!==e.initialDetail.EMPL_REC.TERMDTE&&""!==e.initialDetail.EMPL_REC.TERMDTE.trim()){var s=null;if(s=e.isCalDrop?e.calDropDate:e.currentDate,!Qt(e.initialDetail.EMPL_REC.TERMDTE,s))return!1}a?(e.isPastebyDrag=!0,e.moveEntryToClipBoard(e.isDailyMode,i),e.pasteRecords(e.isDailyMode,1,!0),e.isPastebyDrag=!1):gi([t("translate")("msg_cpyNgtv")],t("translate")("lbl_Error"),!1)};var Qt=function(i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.validateTerminationDate"),R.checkTerminationDate(i,a))return!0;var n=t("translate")("msg_InActiveDesignateSelected",{DOT:e.initialDetail.EMPL_REC.TERMDTE});return gi([n],"",!1),!1};e.weekHrsTotal=function(e){var t=0;for(i=1;i<=7;i++)null!=e["Hrs"+i]&&(t+=e["Hrs"+i]);return e.HrsTotal=t.toFixed(2),e.HrsTotal},e.deleteEntry=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.deleteEntry"),e.isDailyMode){var i=[];i[0]=t.TEID,"Y"==t.TIMSUB?e.editTimeEntry(t):e.deleteTimeEntries(!0,i,0,1)}else{var a="";if("Y"!=t.data.TIMSUB.toUpperCase()){var n=0,r=0,l=t,o=new Date(e.weeklyStartDate.valueOf());o.setHours(0,0,0,0);var s=U.getWkDayOnOpenCloseRevStatus(o,l),d=U.getDeleteTeIdObj(l,s),c=d.isTEInOpenREVWeekExist;a=d.tEIdsStr,n=d.invalidCount,r=U.countNoOfTimeEntry(l),e.deleteTimeEntries(!1,a.split(","),n,r,c)}else e.editTimeEntry(t)}},e.getDeleteImageUrl=function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.getDeleteImageUrl");var a="";return"Y"===i.entity.TIMSUB?a+=e.lockImgurl:a+=e.deleteImgurl,a+=""},e.GetData=function(i,n,l){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.GetData"),l?_t():e.savedInlineRow=null,Qe&&(Xe(),Qe=!1),void 0!==e.gridApi&&(e.gridApi.grid.options.prevEiditedRow=-1);var o=q(new Date(e.currentDate).getDay()),g=Q(new Date(e.currentDate).getMonth());e.calDate=o.substring(0,3)+", "+g.substring(0,3)+" "+t("date")(new Date(e.currentDate),"dd, yyyy"),e.blankfiltermessage="",void 0==u.expandedEntries&&(u.expandedEntries=[]),void 0==u.collapsedEntries&&(u.collapsedEntries=[]),(u.weekStateCurrentDate!=t("date")(e.currentDate,"yyyy-MM-dd")||i)&&(1==u.isPasteClicked&&(u.isPasteClicked=!1),u.weeklyMaxTEID.length>0&&(u.weeklyMaxTEID=[])),void 0!=u.lastCurrentDate&&u.lastCurrentDate!=t("date")(e.currentDate,"yyyy-MM-dd")&&(u.expandedEntries=[],u.collapsedEntries=[],u.cntrExpandCollapse=0);try{Ae()}catch(e){}e.closedmonth="",e.selectedForDelete=!1,e.IsSelectedForAll=!1,e.IsTodayCopied=!1,e.IsWeekCopied=!1,e.IsClone=!1,e.IspasteAdvance=!1,e.gridNoEntryMessage=0,void 0==n&&(n=new Date);var p=t("date")(new Date(n.valueOf()),"yyyy-MM-dd HH:mm:ss"),C=new Date(n.valueOf());if(i)C=C.setDate(C.getDate()),e.blankfiltermessage=t("translate")("lbl_NoTEntryForDay");else{C.setDate(C.getDate()+7);for(var m=0;m<7&&6!=C.getDay();m++)C.setDate(C.getDate()-1);e.blankfiltermessage=t("translate")("lbl_NoTEntryForWeek")}e.checkRevMonthTime(e.currentDate),e.copytoTodayCuttOff=!1,e.afterTecuttOff=!1,checkAfterCuttOff(),C=t("date")(C,"yyyy-MM-dd HH:mm:ss");var h=u.GetLoginDetail(!1,!0),E=[],D=[],y=[];e.itemsDataFinal1="",e.itemsDataTotal="",h&&r.getData(h.SESKEY,h.EMPLID,p,C,t("date")(e.currentDate,"yyyy-MM-dd HH:mm:ss")).then(function(n){if(l?_t():e.savedInlineRow||c.notifyDateTimeSlider(e.currentDate),u.number=0,1==e.gridOptions.dicardTabNavigation&&s(function(){e.gridOptions.dicardTabNavigation=!1},200),e.refreshGridMain&&(e.isDailyMode?localStorage.gridViewportHeight=$(window).height()-("1"==localStorage.FilterFlag?261:235):localStorage.gridViewportHeight=$(window).height()-("1"==localStorage.FilterFlag?311:285),e.refreshGridMain=!1),e.multiSelectFlag=!1,0!=n.RETTIM_OUT_OBJ.RETCD||null!=n.RETTIM_OUT_OBJ.TIME_ARR&&0!=n.RETTIM_OUT_OBJ.TIME_ARR.length)if(2==n.RETTIM_OUT_OBJ.RETCD){e.gridNoEntryMessage=2,e.errorMessage="",e.monthlyTtlHrs=0;var n={RETCD:2,ERRMSG:t("translate")("msg_invalidSession")};u.sessionInvalid(n)}else{if(e.summaryGridData=n.RETTIM_OUT_OBJ.TIME_SUMM,u.summaryGridValue[0]=n.RETTIM_OUT_OBJ.TIME_SUMM.MBITMAP,u.summaryGridValue[1]=t("date")(e.currentDate,"yyyy-MM-dd"),u.summaryGridValue[2]=n.RETTIM_OUT_OBJ.TIME_SUMM.ICMBITMAP,e.monthlyTtlHrs=parseFloat(n.RETTIM_OUT_OBJ.TIME_SUMM.MTOTTIME),e.monthlyTtlHrs=e.monthlyTtlHrs.toFixed(2),e.nonSubmittedICEntries=n.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTEDIC,e.nonSubmittedEntries=n.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTED,n.RETTIM_OUT_OBJ.TIME_ARR.sort(function(e,t){var i=parseFloat(e.TEID),a=parseFloat(t.TEID);return i>a?1:i<a?-1:0}),i||(e.weeklyMaxTEIDCommon=n.RETTIM_OUT_OBJ.TIME_ARR[n.RETTIM_OUT_OBJ.TIME_ARR.length-1].TEID,u.isPasteClicked?u.weeklyMaxTEID[u.weeklyMaxTEID.length]=e.weeklyMaxTEIDCommon:(u.weeklyMaxTEID=[],u.weeklyMaxTEID[0]=e.weeklyMaxTEIDCommon)),i){D=[],n.RETTIM_OUT_OBJ.TIME_ARR.sort(function(e,t){var i=e.CEP_REC.CLIENO.toLowerCase(),a=t.CEP_REC.CLIENO.toLowerCase();if(i<a)return-1;if(i>a)return 1;if(i=a){if(e.CEP_REC.ENGNO<t.CEP_REC.ENGNO)return-1;if(e.CEP_REC.ENGNO>t.CEP_REC.ENGNO)return 1;if(e.CEP_REC.ENGNO=t.CEP_REC.ENGNO){if(e.CEP_REC.PRJNO<t.CEP_REC.PRJNO)return-1;if(e.CEP_REC.PRJNO>t.CEP_REC.PRJNO)return 1}}return 0}),e.gridData=JSON.parse(JSON.stringify(n.RETTIM_OUT_OBJ.TIME_ARR)),e.savedInlineRow||(e.gridOptions.data=e.gridData),e.clearGrouping&&(e.gridApi.grouping.clearGrouping(),e.clearGrouping=!1),e.gridOptions.showColumnFooter=!1,e.isAutoGroup=!1;for(var r={isTime:!1,isIc:!1},o=0;o<e.gridOptions.data.length;o++)e.gridOptions.data[o].rowId=o,null==e.gridOptions.data[o].ICRTCD||void 0===e.gridOptions.data[o].ICRTCD||" "==e.gridOptions.data[o].ICRTCD?(e.gridOptions.data[o].TYPE=t("translate")("lbl_Time"),e.gridOptions.data[o].ICCHRGE="",r.isTime=!0):(r.isIc=!0,localStorage.GroupingCalled="1",e.gridOptions.data[o].TYPE=t("translate")("lbl_IC"),e.gridOptions.data[o].ICCHRGE=Number(parseFloat(e.gridOptions.data[o].ICCHRGE).toFixed(2))),e.gridOptions.data[o].HRS=Number(parseFloat(e.gridOptions.data[o].HRS).toFixed(2));if((r.isTime&&r.isIc||r.isIc)&&(e.isAutoGroup=!0),s(function(){e.bindGridEvents()},2e3),u.pastedRecords){for(var g=e.gridData,p=0,C=0,o=0;o<g.length;o++)p<g[o].TEID&&(p=g[o].TEID,C=o);u.rowIndexNew=C,T(function(){try{e.gridApi.selection.selectRow(e.gridOptions.data[u.rowIndexNew])}catch(e){}},0,1)}else e.savedInlineRow||void 0==u.rowIndex||u.shiftFlag?e.savedInlineRow||T(function(){try{e.gridApi.grid.treeBase.tree instanceof Array&&e.gridApi.grid.treeBase.tree[0].aggregations.length>0?Z():e.gridApi.selection.selectRowByVisibleIndex(0)}catch(e){}},500,1):T(function(){try{for(var t,i=e.gridOptions.data,a=0;a<i.length;a++)if(u.rowIndex.TEID==i[a].TEID){t=a;break}e.gridApi.selection.selectRow(e.gridOptions.data[t])}catch(e){}},0,1)}else{e.gridData=[];var m=n.RETTIM_OUT_OBJ.TIME_ARR;void 0!=m&&(e.icChrge=0,$.each(m,function(t,i){e.icChrge+=parseFloat(m[t].ICCHRGE,10)})),e.chartDataNew=JSON.parse(JSON.stringify(n.RETTIM_OUT_OBJ.TIME_ARR));for(var h=[],o=0;o<m.length&&!(null!=m[o].ICRTCD&&""!=m[o].ICRTCD.trim()&&(m.splice(o,1),(o-=1)>m.length-1));o++);for(o=0;o<m.length;o++){var v,f=0,b=new Date(m[o].DTE.substring(0,m[o].DTE.indexOf(" "))),S=(b=new Date(b.getTime()+60*b.getTimezoneOffset()*1e3)).getDay()+1;v=0==m[o].CATID||void 0==m[o].CATID?m[o].ACTI_REC.DES:m[o].CTSDESC;var w=E.indexOf(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|0");if(-1==w&&parseFloat(m[o].TEID)<=parseFloat(u.weeklyMaxTEID[0]))f+=parseFloat(m[o].HRS,10),E.push(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|0"),D.push({rowId:D.length,CLIENO:m[o].CEP_REC.CLIENO,ENGNO:m[o].CEP_REC.ENGNO,PRJNO:m[o].CEP_REC.PRJNO,CTDESC:m[o].CTDESC,DES:m[o].DES,Hrs1:null,Hrs2:null,Hrs3:null,Hrs4:null,Hrs5:null,Hrs6:null,Hrs7:null,HrsTotal:f,TEID_data:m[o].TEID,data:m[o],TIMSUB:m[o].TIMSUB}),D[D.length-1]["Hrs"+S]=parseFloat(m[o].HRS,10),D[D.length-1]["TEID"+S]=m[o].TEID;else if(parseFloat(m[o].TEID)>parseFloat(u.weeklyMaxTEID[0])&&u.isPasteClicked&&u.weeklyMaxTEID.length>1){for(var O=u.weeklyMaxTEID[u.weeklyMaxTEID.length-2]+"--"+u.weeklyMaxTEID[u.weeklyMaxTEID.length-1],I=0;I<u.weeklyMaxTEID.length-1;I++)if(parseFloat(m[o].TEID)>parseFloat(u.weeklyMaxTEID[I])&&parseFloat(m[o].TEID)<=parseFloat(u.weeklyMaxTEID[I+1])){O=u.weeklyMaxTEID[I]+"--"+u.weeklyMaxTEID[I+1];break}for(var M=!1,R=h.length-1;R>-1;R--)if((w=E.indexOf(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|"+h[R]))>-1){M=!0;break}if(M||(w=E.indexOf(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|"+O)),-1==w)f+=parseFloat(m[o].HRS,10),E.push(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|"+O),D.push({rowId:D.length,CLIENO:m[o].CEP_REC.CLIENO,ENGNO:m[o].CEP_REC.ENGNO,PRJNO:m[o].CEP_REC.PRJNO,CTDESC:m[o].CTDESC,DES:m[o].DES,Hrs1:null,Hrs2:null,Hrs3:null,Hrs4:null,Hrs5:null,Hrs6:null,Hrs7:null,HrsTotal:f,TEID_data:m[o].TEID,data:m[o],TIMSUB:m[o].TIMSUB}),D[D.length-1]["Hrs"+S]=parseFloat(m[o].HRS,10),D[D.length-1]["TEID"+S]=m[o].TEID;else if(w>-1&&null!=D[w]["Hrs"+S]&&parseFloat(m[o].TEID)>parseFloat(u.weeklyMaxTEID[0])){var _=O+" -- "+o;h.push(_),f+=parseFloat(m[o].HRS,10),E.push(m[o].CEP_REC.CLIENO+"|"+m[o].CEP_REC.ENGNO+"|"+m[o].CEP_REC.PRJNO+"|"+v+"|"+m[o].DES+"|"+m[o].TIMSUB+"|"+m[o].REGFLAG+"|"+m[o].PRSTCD+"|"+_),D.push({rowId:D.length,CLIENO:m[o].CEP_REC.CLIENO,ENGNO:m[o].CEP_REC.ENGNO,PRJNO:m[o].CEP_REC.PRJNO,CTDESC:m[o].CTDESC,DES:m[o].DES,Hrs1:null,Hrs2:null,Hrs3:null,Hrs4:null,Hrs5:null,Hrs6:null,Hrs7:null,HrsTotal:f,TEID_data:m[o].TEID,data:m[o],TIMSUB:m[o].TIMSUB}),w=-1,D[D.length-1]["Hrs"+S]=parseFloat(m[o].HRS,10),D[D.length-1]["TEID"+S]=m[o].TEID}}w>-1&&(null==D[w]["Hrs"+S]&&(D[w]["Hrs"+S]=0),D[w]["Hrs"+S]=parseFloat(D[w]["Hrs"+S],10)+parseFloat(m[o].HRS,10),D[w].HrsTotal=parseFloat(D[w].HrsTotal,10)+parseFloat(m[o].HRS,10),D[w]["TEID"+S]=void 0!=D[w]["TEID"+S]?D[w]["TEID"+S]+","+parseInt(m[o].TEID,10):parseInt(m[o].TEID,10))}y.HrsGrandTotalSum=0;for(var P=1;P<=7;P++){for(var k=0,A=!1,o=0;o<D.length;o++)null!=D[o]["Hrs"+P]&&(A=!0,k+=parseFloat(D[o]["Hrs"+P],10),y["HrsTotalSum"+P]=k);A?y.HrsGrandTotalSum=parseFloat(y.HrsGrandTotalSum,10)+parseFloat(y["HrsTotalSum"+P],10):y["HrsTotalSum"+P]=0}if(D.sort(function(e,t){var i=e.CLIENO.toLowerCase(),a=t.CLIENO.toLowerCase();if(i<a)return-1;if(i>a)return 1;if(i=a){if(e.ENGNO<t.ENGNO)return-1;if(e.ENGNO>t.ENGNO)return 1;if(e.ENGNO=t.ENGNO){if(e.PRJNO<t.PRJNO)return-1;if(e.PRJNO>t.PRJNO)return 1}}return 0}),e.itemsDataFinal1=D,e.savedInlineRow)Zt();else{for(e.gridOptions.data=e.itemsDataFinal1,o=0;o<e.gridOptions.data.length;o++)e.gridOptions.data[o].Hrs1=null==e.gridOptions.data[o].Hrs1?e.gridOptions.data[o].Hrs1:Number(parseFloat(e.gridOptions.data[o].Hrs1).toFixed(2)),e.gridOptions.data[o].Hrs2=null==e.gridOptions.data[o].Hrs2?e.gridOptions.data[o].Hrs2:Number(parseFloat(e.gridOptions.data[o].Hrs2).toFixed(2)),e.gridOptions.data[o].Hrs3=null==e.gridOptions.data[o].Hrs3?e.gridOptions.data[o].Hrs3:Number(parseFloat(e.gridOptions.data[o].Hrs3).toFixed(2)),e.gridOptions.data[o].Hrs4=null==e.gridOptions.data[o].Hrs4?e.gridOptions.data[o].Hrs4:Number(parseFloat(e.gridOptions.data[o].Hrs4).toFixed(2)),e.gridOptions.data[o].Hrs5=null==e.gridOptions.data[o].Hrs5?e.gridOptions.data[o].Hrs5:Number(parseFloat(e.gridOptions.data[o].Hrs5).toFixed(2)),e.gridOptions.data[o].Hrs6=null==e.gridOptions.data[o].Hrs6?e.gridOptions.data[o].Hrs6:Number(parseFloat(e.gridOptions.data[o].Hrs6).toFixed(2)),e.gridOptions.data[o].Hrs7=null==e.gridOptions.data[o].Hrs7?e.gridOptions.data[o].Hrs7:Number(parseFloat(e.gridOptions.data[o].Hrs7).toFixed(2)),e.gridOptions.data[o].HrsTotal=null==e.gridOptions.data[o].HrsTotal?e.gridOptions.data[o].HrsTotal:Number(parseFloat(e.gridOptions.data[o].HrsTotal).toFixed(2));e.clearGrouping&&(e.gridApi.grouping.clearGrouping(),e.clearGrouping=!1),e.gridOptions.showColumnFooter=!0,s(function(){e.bindGridEvents()},2e3),u.pastedRecords?ti(e.itemsDataFinal1):void 0!=u.rowIndex?T(function(){ei(e.itemsDataFinal1)},0,1):T(function(){try{e.gridApi.selection.selectRow(e.gridOptions.data[0])}catch(e){}},0,1)}for(o=0;o<e.itemsDataFinal1.length;o++)if(e.itemsDataFinal1[o].data.CEP_REC.CLIENO=e.itemsDataFinal1[o].data.CEP_REC.CLIENO+"-"+("0"+e.itemsDataFinal1[o].data.CEP_REC.ENGNO).slice(-3).toString()+"-"+("0"+e.itemsDataFinal1[o].data.CEP_REC.PRJNO).slice(-3).toString(),null!=e.itemsDataFinal1[o].data.CTSDESC&&(F=e.itemsDataFinal1[o].data.CTSDESC.split(">"),e.itemsDataFinal1[o].Component=F[0],e.itemsDataFinal1[o].Task=F[1]),e.itemsDataFinal1[o].data.CATID>0?e.itemsDataFinal1[o].ProjectActivity=e.itemsDataFinal1[o].data.CTSDESC:e.itemsDataFinal1[o].ProjectActivity=e.itemsDataFinal1[o].data.ACTI_REC.DES,e.itemsDataFinal1[o].CEP_REC=e.itemsDataFinal1[o].data.CEP_REC,e.itemsDataFinal1[o].ACTI_REC=e.itemsDataFinal1[o].data.ACTI_REC,e.itemsDataFinal1[o].CMPTID=e.itemsDataFinal1[o].data.CMPTID,e.itemsDataFinal1[o].TSKID=e.itemsDataFinal1[o].data.TSKID,e.itemsDataFinal1[o].CTSDESC=e.itemsDataFinal1[o].data.CTSDESC,e.itemsDataFinal1[o].SCOID=e.itemsDataFinal1[o].data.SCOID,e.itemsDataFinal1[o].SCOID>0){var L=e.itemsDataFinal1[o].CTSDESC.split(">");e.itemsDataFinal1[o].Scope=L[2]}s(function(){e.gridApi.core.notifyDataChange(a.dataChange.ALL)}),e.itemsDataTotal=y,e.weeklyTtlHours=y.HrsGrandTotalSum,e.weeklyTtlHours=e.weeklyTtlHours.toFixed(2),isNaN(e.weeklyTtlHours)&&(e.weeklyTtlHours=0)}if(void 0!=e.gridData&&null!==e.gridData&&e.gridData.length>0)for(e.ttlHrs=0,e.icChrge=0,$.each(e.gridData,function(t,i){if(e.ttlHrs+=parseFloat(e.gridData[t].HRS),e.isDailyMode){var a=parseFloat(e.gridData[t].ICCHRGE,10);isNaN(a)||(e.icChrge+=a)}}),e.ttlHrs=e.ttlHrs.toFixed(2),e.isDailyMode||(e.icChrge=0),isNaN(e.ttlHrs)&&(e.ttlHrs=0),o=0;o<e.gridData.length;o++){if(e.gridData[o].CEP_REC.CLIENO=e.gridData[o].CEP_REC.CLIENO+"-"+("0"+e.gridData[o].CEP_REC.ENGNO).slice(-3).toString()+"-"+("0"+e.gridData[o].CEP_REC.PRJNO).slice(-3).toString(),null!=e.gridData[o].CTSDESC){var F=e.gridData[o].CTSDESC.split(">");e.gridData[o].Component=F[0],e.gridData[o].Task=F[1],e.gridData[o].SCOID>0&&(e.gridData[o].Scope=F[2])}e.gridData[o].CATID>0?e.gridData[o].ProjectActivity=e.gridData[o].CTSDESC:e.gridData[o].ProjectActivity=e.gridData[o].ACTI_REC.DES}}else e.summaryGridData=n.RETTIM_OUT_OBJ.TIME_SUMM,u.summaryGridValue[0]=n.RETTIM_OUT_OBJ.TIME_SUMM.MBITMAP,u.summaryGridValue[1]=t("date")(e.currentDate,"yyyy-MM-dd"),u.summaryGridValue[2]=n.RETTIM_OUT_OBJ.TIME_SUMM.ICMBITMAP,e.gridData=JSON.parse("[]"),e.gridOptions.data=JSON.parse("[]"),e.gridOptions.showColumnFooter=!i,e.gridNoEntryMessage=1,e.ttlHrs=0,e.ttlHrs=e.ttlHrs.toFixed(2),e.weeklyTtlHours=0,e.weeklyTtlHours=e.weeklyTtlHours.toFixed(2),e.monthlyTtlHrs=parseFloat(n.RETTIM_OUT_OBJ.TIME_SUMM.MTOTTIME),e.monthlyTtlHrs=e.monthlyTtlHrs.toFixed(2),e.nonSubmittedICEntries=n.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTEDIC,e.nonSubmittedEntries=n.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTED,0==u.cntrExpandCollapse&&(e.isDefaultExpanded?(e.expandAllText="Collapse All",e.expandClass="fa fa-minus",$(".weekly-details.task-container").css("padding-bottom","28px")):(e.expandAllText="Expand All",e.expandClass="fa fa-plus",$(".weekly-details.task-container").css("padding-bottom","11px")));s(function(){c.notifyRefreshCalendar()});var N=void 0,H=new Date,x=new Date(e.currentDate.valueOf());x=t("date")(new Date(x.getFullYear(),x.getMonth(),x.getDate()),"yyyy-MM-dd");var U=["January","February","March","April","May","June","July","August","September","October","November","December"],B=null,G=t("date")(e.currentDate.valueOf(),"yyyy-MM-dd"),J=new Date(e.currentDate.valueOf());if(G=re(G),null!=(B=u.chekRevDateInLocalStorage(G,t("translate")("msg_invalidSession"),!0)))si(B,H,U,J);else{var V=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(V.SESKEY,x,function(e){if(void 0!=(N=e.LOADREVM_OUT_OBJ.REVM_ARR)&&"undefined"!=N)for(var t=0;t<N.length;t++)if(null!=N[t]&&void 0!=N[t]&&void 0!=N[t].STRTDTE&&G>=re(N[t].STRTDTE)&&G<=re(N[t].ENDDTE)){B=N[t];break}null!=B&&si(B,H,U,J)})}$(".my-cloak").removeClass("my-cloak"),e.chartsRenderingFlag?(e.showCharts(),K(e.summaryGridData)):(e.showSummary(),K(e.summaryGridData)),l&&Pt(),e.savedInlineRow=null}).catch(function(e){Pt(),$(".my-cloak").removeClass("my-cloak"),gi([t("translate")("lbl_Error")+":"+e],t("translate")("lbl_Error"),!1)})};var Zt=function(i){var a=t("filter")(e.gridOptions.data,function(t){return t.rowId===e.savedInlineRow.rowId});if(a.length>0){a=a[0];for(var n=e.savedInlineRow.teIdDaywise,r=0;r<7;r++)0!=r?1!=r?2!=r?3!=r?4!=r?5!=r?6!=r||(a.TEID7=n[6]):a.TEID6=n[5]:a.TEID5=n[4]:a.TEID4=n[3]:a.TEID3=n[2]:a.TEID2=n[1]:a.TEID1=n[0]}console.log(a)},ei=function(t){try{for(var i,a=t,n=0;n<a.length;n++)if(a[n].CEP_REC.CLIEID==u.rowIndex.CEP_REC.CLIEID&&a[n].CEP_REC.CATID==u.rowIndex.CEP_REC.CATID&&a[n].CEP_REC.COMPID==u.rowIndex.CEP_REC.COMPID&&a[n].CEP_REC.ENGID==u.rowIndex.CEP_REC.ENGID&&a[n].CEP_REC.PRJID==u.rowIndex.CEP_REC.PRJID&&a[n].DES==u.rowIndex.DES&&a[n].Hrs1==u.rowIndex.Hrs1&&a[n].Hrs2==u.rowIndex.Hrs2&&a[n].Hrs3==u.rowIndex.Hrs3&&a[n].Hrs4==u.rowIndex.Hrs4&&a[n].Hrs5==u.rowIndex.Hrs5&&a[n].Hrs6==u.rowIndex.Hrs6&&a[n].Hrs7==u.rowIndex.Hrs7||a[n].ACTI_REC.STAT==u.rowIndex.ACTI_REC.STAT&&a[n].DES==u.rowIndex.DES&&a[n].Hrs1==u.rowIndex.Hrs1&&a[n].Hrs2==u.rowIndex.Hrs2&&a[n].Hrs3==u.rowIndex.Hrs3&&a[n].Hrs4==u.rowIndex.Hrs4&&a[n].Hrs5==u.rowIndex.Hrs5&&a[n].Hrs6==u.rowIndex.Hrs6&&a[n].Hrs7==u.rowIndex.Hrs7&&a[n].ACTI_REC.ACTICD==u.rowIndex.ACTI_REC.ACTICD){i=n;break}void 0!=i&&null!=i&&i>-1?e.gridApi.selection.selectRow(e.gridOptions.data[i]):ti(t)}catch(e){}},ti=function(t){for(var i=t,a=0,n=0,r=0;r<i.length;r++)a<i[r].data.TEID&&(a=i[r].data.TEID,n=r);u.rowIndexNew=n,T(function(){try{e.gridApi.selection.selectRow(e.gridOptions.data[u.rowIndexNew])}catch(e){}},0,1)},ii=function(i,a){gi(a?e.checkRevMonthFlag?[t("translate")("lbl_cantDlt")]:[t("translate")("msg_dltFaild")]:i?[t("translate")("lbl_cantDlt")]:[t("translate")("msg_dltFaild")])};e.deleteTimeEntries=function(i,a,n,l,o){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.deleteTimeEntries"),u.countmove=0;var d=0,c="",g=u.GetLoginDetail(!1,!0);r.deleteTimeEntries(g.SESKEY,g.EMPLID,'"'+a.join('","')+'"').then(function(a){if(0!=a.DELTIM_OUT_OBJ.RETCD)s(function(){gi([a.DELTIM_OUT_OBJ.ERRMSG],"Message",!0)},200);else if(u.columnBlank=!1,void 0!=a.DELTIM_OUT_OBJ.TEID_ARR&&null!=a.DELTIM_OUT_OBJ.TEID_ARR){var r=void 0!=a.DELTIM_OUT_OBJ.TEID_ARR.length?a.DELTIM_OUT_OBJ.TEID_ARR.length:1,g=0;(d=l-(g=i?l-r:n))>0&&(c+=t("translate")("msg_dltSucess",{dltSucessVar:d})),g>0&&(""!=c&&(c+="<br/>"),c+=g+" "+t("translate")("msg_dltUnSucess")),e.GetData(i,i?e.currentDate:e.weeklyStartDate),gi([c])}else ii(o,i)})},e.submitTimeEntries=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.submitTimeEntries"),e.checkRevMonthFlag){if(angular.isDefined(i)){if("222"==e.initialDetail.EMPL_REC.BRATE.toString())return Yt([t("translate")("msg_InvaildBillingRate")],t("translate")("lbl_Error"),!1),!1;if(u.columnBlank){var a={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",a)}else{var n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date,l=null,o=t("date")(i.valueOf(),"yyyy-MM-dd");if(o=re(o),null!=(l=u.chekRevDateInLocalStorage(o,t("translate")("msg_invalidSession"),!1)))ri(l,r,n,i);else{var s=void 0,c=new Date(i.valueOf());c=t("date")(new Date(c.getFullYear(),c.getMonth(),c.getDate()),"yyyy-MM-dd");var g=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(g.SESKEY,c,function(e){if(void 0!=(s=e.LOADREVM_OUT_OBJ.REVM_ARR)&&"undefined"!=s)for(var t=0;t<s.length;t++)if(null!=s[t]&&void 0!=s[t]&&void 0!=s[t].STRTDTE&&o>=re(s[t].STRTDTE)&&o<=re(s[t].ENDDTE)){l=s[t];break}null!=l&&ri(l,r,n,i)})}}}}else e.isShowSubmitMenu=!1};e.$on("SaveMainGridLayout",function(t,i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.$on.SaveMainGridLayout"),i.args.isSave)L.dismissAll(),void 0!=i.args.isOverride?e.overrideFlag=!0:e.overrideFlag=!1,"colViewToggle"==i.args.methodName&&ce(),e.saveLayout(),e.showColViewMenu=!1;else if("SaveBtn"!=i.args.methodName&&(localStorage.setItem("isMainGridLayoutChange",0),u.enableSaveLayout=!1),L.dismissAll(),"wkDayToggle"==i.args.methodName)e.weekDayToggle(!0,!e.isDailyMode,"N");else if("colViewToggle"==i.args.methodName)e.bottomColPrefMenu(i.args.option);else if("becomeDesignateOf"==i.args.methodName){var a=JSON.parse(localStorage.getItem("designateObj"));e.becomeDesignateOf(a),localStorage.removeItem("designateObj")}});var ai=function(t){return u.errorLogMethod("DailyTimeDesktopGridCtrl.var.SaveMainGridLayout"),t?e.isDailyMode&&5==e.optionDaily?te.daily.parentColumnViewId:e.isDailyMode||5!=e.optionWeekly?e.isDailyMode?e.optionDaily.toString():e.optionWeekly.toString():te.weekly.parentColumnViewId:e.isDailyMode?e.optionDaily.toString():e.optionWeekly.toString()};e.saveLayout=function(){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.saveLayout"),"1"==localStorage.getItem("isMainGridLayoutChange"))if(!u.dailyCustomFlag&&e.isDailyMode||!u.weeklyCustomFlag&&!e.isDailyMode||e.overrideFlag){var i=e.gridApi.saveState.save(),a=e.isDailyMode?y.LAYOUTMODE.Daily:y.LAYOUTMODE.Weekly,n=ai(e.overrideFlag),r=F.createLayoutObj(JSON.parse(JSON.stringify(i.columns))),l="";e.overrideFlag&&(l=e.isDailyMode?e.dailyViewCustomLayout:e.weeklyViewCustomLayout),o={layout:r.columns,layoutName:l,mode:a,parentId:n,layOutNames:layOutNameList},e.overrideFlag=!1,e.openModalCtrl="saveLayoutCtrl",w.openModalPopUp("Desktop/CustumLayout/templates/LayoutSave.html","LayoutSaveCtrl",o)}else{var o={msgList:[t("translate")("msg_overrideMainGridSveLayOut")],isCancelBtnOn:!0,okBtnText:t("translate")("btn_Yes"),noBtnTxt:t("translate")("btn_No"),popUpName:"OverrideSaveMainGrdLayout",methodName:"SaveBtn"};w.openModalPopUp("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",o)}};var ni=function(i,a,n,r,l){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.submitFinal");var o=null;i.TECUTTOFF.split(" ")&&(o=le(i.TECUTTOFF));var s=new Date(r.valueOf());if(s=t("date")(new Date(s.getFullYear(),s.getMonth(),s.getDate()),"yyyy-MM-dd"),new Date(o).setHours(0,0,0,0),a.getTime()>=o.getTime()&&s>=i.STRTDTE.substring(0,10)&&s<=i.ENDDTE.substring(0,10)&&chkcurdate>=i.STRTDTE.substring(0,10)&&chkcurdate<=i.ENDDTE.substring(0,10))e.closedmonth=n[o.getMonth()]+" "+o.getFullYear()+t("translate")("msg_nwClosed"),e.checkRevMonthFlag=!1,e.isSbmtOpen=!1;else{var d=u.GetInitialDetail(!1,!0),c=d.REVM_REC.STRTDTE.split("-"),g=d.REVM_REC.ENDDTE.valueOf().split("-"),p={THRS:"N",ENIC:"N"};p.THRS=d.COMP_REC.THRS,p.ENIC=d.COMP_REC.ENIC;var C=new Date(c[0],c[1]-1,c[2].split(" ")[0]),m=new Date(g[0],g[1]-1,g[2].split(" ")[0]);C=new Date(C.getTime()+60*C.getTimezoneOffset()*1e3),m=new Date(m.getTime()+60*m.getTimezoneOffset()*1e3);var h=new Date(r.valueOf());if(h.setHours(0,0,0,0),C.setHours(0,0,0,0),h>=C){var E=parseInt(l),D=u.GetLoginDetail(!1,!0);if(h=t("date")(new Date(h.valueOf()),"yyyy-MM-dd HH:mm:ss"),E>0){e.isShowSubmitMenu=!1;var y="",y=t("translate")("msg_SubmitTimeMsg",{date:t("date")(r.valueOf(),"dd-MMM-yyyy")});e.submitIfConfirm(D.SESKEY,D.EMPLID,h,y,"submitConfirm",0)}else e.isShowSubmitMenu=!1,gi([t("translate")("msg_NoTEntryToSubmit")])}}},ri=function(e,t,i,a){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.submitTimeEntriesCheck"),li(e,t,i,a)},li=function(e,i,a,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.submitAfterGetData");var l,o=0,s=t("date")(new Date(n.valueOf()),"yyyy-MM-dd HH:mm:ss"),d=new Date(n.valueOf());d=d.setDate(d.getDate()),d=t("date")(d,"yyyy-MM-dd HH:mm:ss");var c=u.GetLoginDetail(!1,!0);c&&r.getDataForSubmit(c.SESKEY,c.EMPLID,s,d,s).then(function(t){0==parseInt(t.RETTIM_OUT_OBJ.RETCD)&&(o=parseInt(t.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTED),l=parseInt(t.RETTIM_OUT_OBJ.TIME_SUMM.NONSUBMITTEDIC)),ni(e,i,a,n,o+l)})};e.loadErrorPopup=function(t,i,a,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.loadErrorPopup");var r={isError:t,message:i,isReloadPage:a,isCancelBtnOn:n};e.openModalCtrl="ErrorPopup",e.open("templates/ErrorPopup.html","ErrorPopup",r)},e.submitIfConfirm=function(i,a,n,r,l,o){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.submitIfConfirm");var s={msgList:[r],isSubmit:!0,empId:a,sesKey:i,selDte:n,isCancelBtnOn:!0};1===o&&(s.okBtnText=t("translate")("btn_Yes"),s.noBtnTxt=t("translate")("btn_No")),e.openModalCtrl=l,e.open("Desktop/Home/templates/ConfirmBox.html","ConfirmBoxCtrl",s)};var oi=function(t,i,a,n){var l=n?"Y":"N";u.errorLogMethod("DailyTimeDesktopGridCtrl.var.callApiToSubmitEntries"),r.submitTimeEntries(l,t,i,a,function(n){var r=parseInt(n.SUBTIM_OUT_OBJ.RETCD);0==r?(gi([n.SUBTIM_OUT_OBJ.ERRMSG]),e.isDailyMode?e.GetData(e.isDailyMode,e.currentDate):e.GetData(e.isDailyMode,e.weeklyStartDate)):2==r?gi([n.SUBTIM_OUT_OBJ.ERRMSG]):e.submitIfConfirm(t,i,a,n.SUBTIM_OUT_OBJ.ERRMSG,"submitAPIConfirm",1)})},si=function(i,a,n,r){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.checkCloseMonth");var l=null;i.TECUTTOFF.split(" ")&&(l=le(i.TECUTTOFF)),r=t("date")(new Date(r.getFullYear(),r.getMonth(),r.getDate()),"yyyy-MM-dd");var o=t("date")(new Date,"yyyy-MM-dd");new Date(l).setHours(0,0,0,0),a.getTime()>=l.getTime()&&r>=i.STRTDTE.substring(0,10)&&r<=i.ENDDTE.substring(0,10)&&o>=i.STRTDTE.substring(0,10)&&o<=i.ENDDTE.substring(0,10)&&(e.closedmonth=n[l.getMonth()]+" "+l.getFullYear()+t("translate")("msg_nwClosed"),e.checkRevMonthFlag=!1,e.isSbmtOpen=!1)},di=function(i,a,n,r,l,o,s){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.redirectToNewEntryPage");var d=v.DATETIME_FORMATS.MONTH;if(i.TECUTTOFF.split(" "))var c=le(i.TECUTTOFF);var g=t("date")(a,"yyyy-MM-dd"),p=t("date")(new Date,"yyyy-MM-dd");if(new Date(c).setHours(0,0,0,0),n.getTime()>=c.getTime()&&g>=i.STRTDTE.substring(0,10)&&g<=i.ENDDTE.substring(0,10)&&p>=i.STRTDTE.substring(0,10)&&p<=i.ENDDTE.substring(0,10)){if(e.checkRevMonthFlag=!1,e.closedmonth=d[c.getMonth()]+" "+c.getFullYear()+t("translate")("msg_nwClosed"),e.isSbmtOpen=!1,r){var m=JSON.parse(localStorage.getItem("Time_Entry"));m.TIMSUB="Y",localStorage.setItem("Time_Entry",JSON.stringify(m)),l&&C.go("mNewEntry",{startDate:o,isDailyMode:s,IsEditMode:l,currentDate:a})}}else(e.checkRevMonthFlag||l)&&C.go("mNewEntry",{startDate:o,isDailyMode:s,IsEditMode:l,currentDate:a})};e.NewClick=function(i,a,n,r){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.NewClick"),u.lastCurrentDate=t("date")(a,"yyyy-MM-dd"),u.lastExpandAllText=e.expandAllText,u.lastExpandClass=e.expandClass,u.cntrExpandCollapse=2,n||(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(a,"yyyy-MM-dd"));var l=void 0,o=null,s=new Date,c=t("date")(a,"yyyy-MM-dd"),g=(t("translate")("lbl_Mnth1"),t("translate")("lbl_Mnth2"),t("translate")("lbl_Mnth3"),t("translate")("lbl_Mnth4"),t("translate")("lbl_Mnth5"),t("translate")("lbl_Mnth6"),t("translate")("lbl_Mnth7"),t("translate")("lbl_Mnth8"),t("translate")("lbl_Mnth9"),t("translate")("lbl_Mnth10"),t("translate")("lbl_Mnth11"),t("translate")("lbl_Mnth12"),t("date")(a,"yyyy-MM-dd"));if(g=re(g),null!=(o=u.chekRevDateInLocalStorage(g,t("translate")("msg_invalidSession"),!1)))di(o,a,s,c,r,i,n);else{var p=u.GetLoginDetail(!1,!0);d.loadRevenueMonths(p.SESKEY,c,function(e){if(void 0!=(l=e.LOADREVM_OUT_OBJ.REVM_ARR)&&"undefined"!=l){var d=t("date")(a,"yyyy-MM-dd");d=re(d);for(var g=0;g<l.length;g++)if(null!=l[g]&&void 0!=l[g]&&void 0!=l[g].STRTDTE&&d>=re(l[g].STRTDTE)&&d<=re(l[g].ENDDTE)){o=l[g];break}}null!=o&&di(o,a,s,c,r,i,n)})}};var re=function(e){if(void 0!=e){var t=e.split("-"),i=t[2].split(" ");return new Date(t[0],t[1]-1,i[0])}return null},le=function(e){if(void 0!=e&&null!=e){var t=(e=e.trim()).split("-"),i=t[2].split(" "),a=i[1].split(":");return new Date(t[0],t[1]-1,i[0],a[0],a[1],a[2])}return new Date};e.copyRecords=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.copyRecords"),u.columnBlank){var a={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",a)}else{var n=[];if((n=angular.copy(e.gridApi.selection.getSelectedRows())).length>0){for(var r=!0,l=0;l<n.length;l++){if(e.showEditFlag||u.showRightMenuFlag||u.ctrlFlag||e.IsTodayCopied||e.IsWeekCopied)o=n[l];else var o=JSON.parse(n[l]);var s=JSON.parse(JSON.stringify(o)),d=JSON.parse(JSON.stringify(s));if(e.isDailyMode||(s=s.data),"T"==s.CEP_REC.CHARBASIS||"S"==s.CEP_REC.CHARBASIS||"C"==s.CEP_REC.CHARBASIS){if(e.isDailyMode&&parseFloat(s.HRS)<0){r=!1;break}if(!e.isDailyMode&&(parseFloat(d.Hrs1)<0||parseFloat(d.Hrs2)<0||parseFloat(d.Hrs3)<0||parseFloat(d.Hrs4)<0||parseFloat(d.Hrs5)<0||parseFloat(d.Hrs6)<0||parseFloat(d.Hrs7)<0)){r=!1;break}}}return r?(e.isNegativeAllowed=!0,e.moveEntryToClipBoard(e.isDailyMode,n),!0):($(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),e.isNegativeAllowed=!1,gi([t("translate")("msg_cpyNgtv")],t("translate")("lbl_Error"),!1),!1)}u.ctrlFlag&&(gi(["No entry selected."],"Message",!0),u.ctrlFlag=!1)}},e.SelectedID="",e.selectedTEIDs=[],e.entryCheckedUnchecked=function(t,i){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.entryCheckedUnchecked"),e.afterTecuttOff=!1,e.IsClone=!1,e.IsTodayCopied=!1,e.IsWeekCopied=!1;for(var a=document.getElementsByName("chkEntries"),n=!1,r=!1,l="",o=0;o<a.length;o++){if(l=t?JSON.parse(a[o].value).TIMSUB.toUpperCase():JSON.parse(a[o].value).data.TIMSUB.toUpperCase(),1==a[o].checked&&"N"==l){n=!0,r=!0;break}1!=a[o].checked||r||(r=!0)}e.selectedForDelete=n,e.IsSelectedForAll=r,checkAfterCuttOff();var d=document.getElementById(i);null!=d&&void 0!=d&&"undefined"!=d?(JSON.parse(d.value),e.SelectedID=i,t?$("#"+i).is(":checked")?$("#d"+i).addClass("selected"):$("#d"+i).removeClass("selected"):($("#"+i).is(":checked")?$("#week"+i.substring(1)).addClass("selected"):$("#week"+i.substring(1)).removeClass("selected"),i=i.substring(1)),e.selectedTEIDs.push(i)):s(function(){for(var t=document.getElementsByName("chkEntries"),i=0;i<t.length;i++)t[i].checked=!1;e.SelectedID=""},100),$(".dots").css("display","none"),$(".bottom-footer").css("display","none"),$(".sub_popup-action .show-dayWeek").css("display","block"),$(".content").css("padding-bottom","84px"),$(".sub_popup-action .cancel-cross").css("display","block"),$(".sub_popup-action .dots").css("display","none"),$(".expand-footer").css("display","none"),$(".sub_popup-action .cancel-cross-left").css("display","none"),u.isPanelOpen=!0,$(".sub_popup-action .cancel-cross").click(function(){u.isPanelOpen=!1,$(".sub_popup-action .show-dayWeek").css("display","none"),$(".content").css("padding-bottom","60px"),$(".task-container.selected").removeClass("selected"),$(".sub_popup-action .dots").css("display","block"),$("input:checkbox[class^=checked]").each(function(e){this.checked=!1}),e.IsSelectedForAll=!1,e.selectedForDelete=!1,$(".bottom-footer").css("display","block"),$(".sub_popup-action .cancel-cross").css("display","none"),$("#dv_sub_popup").remove(),$(".sub_popup-action").append('<div id=\'dv_sub_popup\' class=\'sub_popup-action-inner\' onclick=\'$(".sub_popup-action .show-dayWeek").css("display", "block");$(".sub_popup-action .cancel-cross").css("display", "block");$(".sub_popup-action .dots").css("display", "none");\'></div>')}),$(".sub_popup-action .more").click(function(){$(".show-dayWeek").css("display","none"),$(".expand-footer").css("display","block"),$(".cancel-cross").css("display","none"),$(".sub_popup-action .cancel-cross-left").css("display","block")}),$(".sub_popup-action .cancel-cross-left").click(function(){$(".show-dayWeek").css("display","block"),$(".expand-footer").css("display","none"),$(".cancel-cross").css("display","block"),$(".sub_popup-action .cancel-cross-left").css("display","none")})};var ci=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.var.chekCopyTodayWeekDate");var e=new Date,i=null,a=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-a);var n=u.chekRevDateInLocalStorage(e,t("translate")("msg_invalidSession"),!1);return null!=n&&(i=n.TECUTTOFF),i};checkAfterCuttOff=function(){u.errorLogMethod("DailyTimeDesktopGridCtrl.fn.checkAfterCuttOff");var t=le(ci()),i=angular.copy(t),a=new Date,n=new Date;(e.checkRevMonthFlag||e.isDailyMode&&t>a||!e.isDailyMode&&(t>a&&6==a.getDay()||6!=a.getDay()))&&(e.afterTecuttOff=!0),t>a||t.setHours(0,0,0,0)!=a.setHours(0,0,0,0)?e.afterTecuttOff=!0:e.afterTecuttOff=!1,new Date,e.copytoTodayCuttOff=i>n;var r=t.setHours(0,0,0,0),l=angular.copy(e.currentDate);l=l.setHours(0,0,0,0),e.afterTecuttOffWeek=l>r},e.checkPasteMulCnt=0,e.pasteRecords=function(i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteRecords"),u.pastedRecords=!1,u.countmove=0,e.totalDailyPastedHours=0,e.totalWeeklyPastedHours=[0,0,0,0,0,0,0],e.exceedHrs=[],u.totalPastedHrs=0,e.isDailyMode&&e.isDailyFlag||e.isWeeklyFlag&&!e.isDailyMode)if(u.columnBlank){var n={errorList:u.isCategory?[t("translate")("msg_invalidProjectComponent")]:[t("translate")("lbl_actvtyNoValid")],isProjectTaskInvalid:!0};e.openModalCtrl="showValidationMsg",w.openModalPopUp("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",n),isPasteOnProgress=!1}else{e.failedErrorMessage=[],e.prjRenewMessage=[],e.showEditFlag=!1,u.showRightMenuFlag=!1,e.showMenuOutsideGrid=!1;var r=0;e.highestWeekRecordNumber=0,e.IspasteAdvance||(e.renewalMessage=[]);var l="";u.isMobileOrTab?e.IsTodayCopied||e.IsWeekCopied?(l="Copy",t("translate")("msg_copied")):e.IsClone?(l="Clone",t("translate")("msg_cloned")):(l="Paste",t("translate")("msg_pasted")):t("translate")("msg_pasted"),e.checkDbPartition=0,$(".copy").removeClass("active");var s=le(ci()),d=new Date;if((e.checkRevMonthFlag||e.IsTodayCopied&&i&&s>d||e.IsWeekCopied&&!i&&(s>d&&6==d.getDay()||6!=d.getDay())||e.IspasteAdvance)&&((e.afterTecuttOff||!i&&(e.afterTecuttOff||e.afterTecuttOffWeek))&&(e.IsTodayCopied||e.IsWeekCopied)||!e.IsTodayCopied&&!e.IsWeekCopied)){e.IsTodayCopied||e.IsWeekCopied||e.IspasteAdvance||e.IsClone||!(null!==localStorage.getItem("DailyDataCopied")&&i||null!==localStorage.getItem("WeeklyDataCopied")&&!i)||$(".paste").addClass("active"),e.round=!1,e.IsSelectedForAll=!1,$(".task-container.selected").removeClass("selected");var c=0,g=u.GetInitialDetail(!1,!0);if(void 0==g||null==g)return $(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),void(isPasteOnProgress=!1);var p=new Date(g.REVM_REC.STRTDTE.split(" ")[0]),C=new Date(g.REVM_REC.ENDDTE.split(" ")[0]);if(p=new Date(p.getTime()+60*p.getTimezoneOffset()*1e3),C=new Date(C.getTime()+60*C.getTimezoneOffset()*1e3),p.setHours(0,0,0,0),i){var m=null;if(e.isCalDrop?m=e.calDropDate:e.IsTodayCopied?(k=(P=new Date).getTimezoneOffset(),P.setMinutes(P.getMinutes()-k),m=P):m=e.IspasteAdvance?e.pasteAdvanceDate:e.currentDate.valueOf(),null!==localStorage.getItem("DailyDataCopied")){for(var h=JSON.parse(localStorage.getItem("copiedRecordsDaily")),E=0;E<h.length;E++)h[E].DTE=t("date")(new Date(m),"yyyy-MM-dd HH:mm:ss"),new Date(m),(_=new Date).setHours(0,0,0,0),k=(P=new Date).getTimezoneOffset(),P.setMinutes(P.getMinutes()-k),P.setHours(0,0,0,0),qt(h[E])&&(h[E].HRS=0);if(1==h.length&&1==a)(A=e.validateEntries(i,h[0],null,m,!1))||($(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),e.IsClone=!1,e.IsTodayCopied=!1,e.IsWeekCopied=!1),L=h[0],o.searchPRCCode(e.loginDetail.SESKEY,L.CEP_REC.CATID,L.CEP_REC.PRJID).then(function(i){var n=!0;if(0==parseInt(i.LOADPCOMTSK_OUT_OBJ.RETCD)){var r=!1,l=!1,o=!1,s=null;for(s=i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM,c=0;c<s.length;c++){if(s[c].CMPTID==L.CMPTID){if("Y"!=s[c].ACTIVE){r=!0;break}if(void 0!==s[c].ARR_PTSK.PTSK_OBJ&&void 0!=s[c].ARR_PTSK.PTSK_OBJ&&null!=s[c].ARR_PTSK.PTSK_OBJ){if(s[c].ARR_PTSK.PTSK_OBJ.TSKID==L.TSKID&&"Y"!=s[c].ARR_PTSK.PTSK_OBJ.ACTIVE){l=!0;break}}else for(var d=0;d<s[c].ARR_PTSK.length;d++)if(s[c].ARR_PTSK[d].TSKID==L.TSKID&&"Y"!=s[c].ARR_PTSK[d].ACTIVE){l=!0;break}}if(l)break}if(void 0!=i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP&&null!=i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP)for(var c=0;c<i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP.length;c++)if(i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP[c].SCOPID==L.SCOID&&"Y"!=i.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP[c].ACTIVE){o=!0;break}r||l?A&&($(".copy").removeClass("active"),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),gi([t("translate")("msg_invalidProjectComponent")],t("translate")("lbl_Error"),!1),n=!1):o&&A&&($(".copy").removeClass("active"),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),gi([e.prjScopeNoValidMsg],t("translate")("lbl_Error"),!1),n=!1)}A&&n?(e.selectedRecordArray=[],e.highestRecordNum=null,e.highestRecordNumTemp=null,e.pasteSave(h,!1,a,0,0)):isPasteOnProgress=!1});else{e.selectedRecordArray=[],e.highestRecordNum=null,e.highestRecordNumTemp=null;var D=[],y=0,v=0;for(e.totalDailyPastedHours=0,e.exceedHrs=[],E=0;E<h.length;E++)e.validateEntries(i,h[E],null,m,!0)?(D[v]=JSON.parse(JSON.stringify(h[E])),v++):y++;y>0&&D.length<1?(messages=a*y+" "+l+t("translate")("msg_RcrdnoValidNewEntry"),0==e.checkPasteMulCnt&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),isPasteOnProgress=!1,$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")):D.length>0?e.pasteSave(D,!0,a,y,0):isPasteOnProgress=!1}e.SelectedID=""}else isPasteOnProgress=!1}else{var f=e.weeklyStartDate.valueOf();if(1==e.IsWeekCopied)for(k=(P=new Date).getTimezoneOffset(),P.setMinutes(P.getMinutes()-k),(f=P).setDate(f.getDate()+1),f.setDate(f.getDate()-7),E=0;E<7&&0!=f.getDay();E++)f.setDate(f.getDate()+1);var T=[],b=null;u.selRecordNumber=1;var S=angular.copy(p);if(null!==localStorage.getItem("WeeklyDataCopied")){for(var h=JSON.parse(localStorage.getItem("copiedRecordsWeekly")),O=0,I=0,E=0,M=0;E<h.length;E++){h[E].selectedRecordNumber>I&&(I=h[E].selectedRecordNumber,O++);var R=new Date(f);R=new Date(R.setDate(R.getDate()+h[E].DTECount));var _=new Date;_.setHours(0,0,0,0);var P=new Date,k=P.getTimezoneOffset();P.setMinutes(P.getMinutes()-k),P.setHours(0,0,0,0),h[E].DTE=t("date")(new Date(R.valueOf()),"yyyy-MM-dd HH:mm:ss"),qt(h[E])&&(h[E].HRS=0),S.setHours(R.getHours(),R.getMinutes(),R.getSeconds(),R.getMilliseconds()),b=x.timeEntryToNextRevenue(R,p,h,E,S),console.log("WEEKLY timeEntry--"+JSON.stringify(b)),null!=b&&(delete b.DTECount,T[M]=b,M++),R.setHours(0,0,0,0)<p.setHours(0,0,0,0)?r++:(delete h[E].DTECount,T[M]=h[E],M++)}if(c=T.length,T.length>0&&1==O){var A=e.validateEntries(i,T[0],T,f,!1);A||(e.IsClone=!1,e.IsTodayCopied=!1,e.IsWeekCopied=!1);var L=T[0];o.searchPRCCode(e.loginDetail.SESKEY,L.CEP_REC.CATID,L.CEP_REC.PRJID).then(function(n){var o=!0;if(0==parseInt(n.LOADPCOMTSK_OUT_OBJ.RETCD)){var s=!1,d=!1,c=!1,g=null;for(g=n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PCOM,E=0;E<g.length;E++){if(g[E].CMPTID==L.CMPTID){if("Y"!=g[E].ACTIVE){s=!0;break}if(void 0!==g[E].ARR_PTSK.PTSK_OBJ&&void 0!=g[E].ARR_PTSK.PTSK_OBJ&&null!=g[E].ARR_PTSK.PTSK_OBJ){if(g[E].ARR_PTSK.PTSK_OBJ.TSKID==L.TSKID&&"Y"!=g[E].ARR_PTSK.PTSK_OBJ.ACTIVE){d=!0;break}}else for(b=0;b<g[E].ARR_PTSK.length;b++)if(g[E].ARR_PTSK[b].TSKID==L.TSKID&&"Y"!=g[E].ARR_PTSK[b].ACTIVE){d=!0;break}}if(d)break}if(void 0!=n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP&&null!=n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP)for(E=0;E<n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP.length;E++)if(n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP[E].SCOPID==L.SCOID&&"Y"!=n.LOADPCOMTSK_OUT_OBJ.PCAT_ARR.PCAT_OBJ.ARR_PSCOP[E].ACTIVE){c=!0;break}s||d?A&&($(".copy").removeClass("active"),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),gi([t("translate")("msg_invalidProjectComponent")],t("translate")("lbl_Error"),!1),o=!1):c&&A&&($(".copy").removeClass("active"),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),gi([e.prjScopeNoValidMsg],t("translate")("lbl_Error"),!1),o=!1)}if(A&&o){e.selectedRecordArray=[],e.highestRecordNum=null,e.highestRecordNumTemp=null;var p=[],u=0,C=0,m=!0,h=0;e.totalWeeklyPastedHours=[0,0,0,0,0,0,0],e.exceedHrs=[];for(var E=0;E<T.length;E++){if(JSON.parse(JSON.stringify(T[E])).selectedRecordNumber!=u){for(var D=JSON.parse(JSON.stringify(T[E])).selectedRecordNumber,y=[],v=0,b=0;b<T.length;b++)D==JSON.parse(JSON.stringify(T[b])).selectedRecordNumber&&(y[v]=JSON.parse(JSON.stringify(T[b])),v++);e.validateEntries(i,T[E],y,f,!0)?m=!0:(C+=y.length,m=!1),u=JSON.parse(JSON.stringify(T[E])).selectedRecordNumber}m&&(p[h]=JSON.parse(JSON.stringify(T[E])),h++)}C>0&&p.length<1?(messages=a*C+" "+l+t("translate")("msg_RcrdnoValidNewEntry"),0==e.checkPasteMulCnt&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),isPasteOnProgress=!1):p.length>0&&e.pasteSave(p,!1,a,C,r)}else isPasteOnProgress=!1,$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")}),e.SelectedID=""}else if(T.length>0&&O>1){e.selectedRecordArray=[],e.highestRecordNum=null,e.highestRecordNumTemp=null;var D=[],F=0,y=0,N=!0,v=0;for(e.totalDailyPastedHours=0,e.totalWeeklyPastedHours=[0,0,0,0,0,0,0],e.exceedHrs=[],E=0;E<T.length;E++){if(JSON.parse(JSON.stringify(T[E])).selectedRecordNumber!=F){for(var H=JSON.parse(JSON.stringify(T[E])).selectedRecordNumber,U=[],B=0,M=0;M<T.length;M++)H==JSON.parse(JSON.stringify(T[M])).selectedRecordNumber&&(U[B]=JSON.parse(JSON.stringify(T[M])),B++);e.validateEntries(i,T[E],U,f,!0)?N=!0:(y+=U.length,N=!1),F=JSON.parse(JSON.stringify(T[E])).selectedRecordNumber}N&&(D[v]=JSON.parse(JSON.stringify(T[E])),v++)}y>0&&D.length<1?(messages=a*y+r+" "+l+t("translate")("msg_RcrdnoValidNewEntry"),0==e.checkPasteMulCnt&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),isPasteOnProgress=!1,$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")):D.length>0?e.pasteSave(D,!0,a,y,r):isPasteOnProgress=!1}else r>0&&(t("translate")("msg_RcrdnoValidNewEntry"),0!=c&&gi([e.failedErrorMessage],t("translate")("lbl_Error"),!1)),isPasteOnProgress=!1,$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")}else isPasteOnProgress=!1}}else $(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),gi(["Pasted 0 entry."],"Message",!0);0!=e.prjRenewMessage.length&&(gi(e.prjRenewMessage,"Message",!0),e.prjRenewMessage=[])}else isPasteOnProgress=!1},e.copyWeekTodayDate=t("date")(new Date("sessiontimeout"),"dd-MMM-yyyy"),e.moveEntryToClipBoard=function(t,i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.moveEntryToClipBoard"),t){for(var a=[],n=0;n<i.length;n++)e.showEditFlag||u.showRightMenuFlag||u.ctrlFlag||e.isPastebyDrag||e.IsTodayCopied?a[n]=i[n]:a[n]=JSON.parse(i[n]),a[n].TEID=0,a[n].TIMSUB="N";localStorage.setItem("copiedRecordsDaily",JSON.stringify(a)),localStorage.setItem("DailyDataCopied",!0),localStorage.setItem("WeeklyDataCopied",!1),e.DailyDataCopied=!0,e.WeeklyDataCopied=!1,e.isDailyFlag=!0,e.isWeeklyFlag=!1}else{for(var r=[],n=0,l=0;l<i.length;l++){if(e.showEditFlag||u.showRightMenuFlag||u.ctrlFlag||e.isPastebyDrag||e.IsTodayCopied||e.IsWeekCopied)o=i[l];else var o=JSON.parse(i[l]);null!=o.Hrs1&&(o.data.TEID=0,o.data.DTECount=0,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs1,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs2&&(o.data.TEID=0,o.data.DTECount=1,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs2,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs3&&(o.data.TEID=0,o.data.DTECount=2,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs3,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs4&&(o.data.TEID=0,o.data.DTECount=3,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs4,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs5&&(o.data.TEID=0,o.data.DTECount=4,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs5,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs6&&(o.data.TEID=0,o.data.DTECount=5,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs6,r[n]=JSON.parse(JSON.stringify(o.data)),n++),null!=o.Hrs7&&(o.data.TEID=0,o.data.DTECount=6,o.data.selectedRecordNumber=l+1,o.data.TIMSUB="N",o.data.HRS=o.Hrs7,r[n]=JSON.parse(JSON.stringify(o.data)),n++)}var d=JSON.parse(JSON.stringify(r));localStorage.setItem("copiedRecordsWeekly",JSON.stringify(d)),localStorage.setItem("WeeklyDataCopied",!0),localStorage.setItem("DailyDataCopied",!1),e.WeeklyDataCopied=!0,e.DailyDataCopied=!1,e.isWeeklyFlag=!0,e.isDailyFlag=!1}$(".copy").addClass("active"),s(function(){$(".copy").removeClass("active")},400),e.showEditFlag=!1,u.showRightMenuFlag=!1};var gi=function(t,i,a){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.showMessagePopUp"),0!=t.length){var n={errorList:t,title:i,isWarning:a};e.openModalCtrl="showMessagePopUp",e.open("Desktop/NewEntry/templates/AlertBoxSave.html","ErrorDesktopPopupCtrl",n)}},pi=function(i){var a=[],n=[];return e.exceedHrs.length>0?y.CURRENTLANGUAGE==y.FRENCHLANGUAGEKEY?(n=i[0].split(" "),i[0]=t("translate")("msg_pasteEntries"),i[0]=i[0].replace("#",n[2]),a.push(i[0])):("-1"!=i[0].indexOf(t("translate")("msg_entries"))?i[0]=i[0].replace(t("translate")("msg_entries"),t("translate")("msg_pasteEntries")):"-1"!=i[0].indexOf(t("translate")("msg_entry"))&&(i[0]=i[0].replace(t("translate")("msg_entry"),t("translate")("msg_pasteEntries"))),a.push(i[0]+" "+e.exceedHrs[0])):a.push(i[0]),a};e.pasteSave=function(i,a,n,r,o){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteSave");var s="";i.length>0&&(s=i[0].CEP_REC.CLIENO,delete i[0].Component,delete i[0].Task,delete i[0].ProjectActivity,delete i[0].TYPE,delete i[0].Scope,delete i[0].CTSDESC,delete i[0].isICEntry,delete i[0].isImportCal,i[0].CEP_REC.CLIENO=i[0].CEP_REC.CLIENO.substring(0,6),void 0!=i[0]["CEP_REC.CLIENO"]&&delete i[0]["CEP_REC.CLIENO"],i[0].CEP_REC.PROG="",i[0].CEP_REC.GLOBBUSI="");var d=1,c=r;e.IspasteAdvance&&r>0&&(c=r*n),null==e.highestRecordNum&&(e.highestRecordNum=0),null==e.highestRecordNumTemp&&(e.highestRecordNumTemp=0),(parseFloat(i.length)>parseFloat(e.highestRecordNum)||0==i.length&&c>0)&&(e.highestRecordNum=i.length),d=i.length,i.length>0&&delete i[0].selectedRecordNumber;var g="",p="";u.isMobileOrTab?e.IsTodayCopied||e.IsWeekCopied?(g="Copy",p=t("translate")("msg_copied"),e.pasteMultipleCount=0):e.IsClone?(g="Clone",p=t("translate")("msg_cloned"),e.pasteMultipleCount=0):(g="Paste",p=t("translate")("msg_pasted"),e.IspasteAdvance||(e.pasteMultipleCount=0)):(p=t("translate")("msg_pasted"),e.IsTodayCopied||e.IsWeekCopied||e.IsClone?e.pasteMultipleCount=0:e.IspasteAdvance||(e.pasteMultipleCount=0)),l.saveTimeSheet(e.loginDetail.SESKEY,e.loginDetail.EMPLID,JSON.stringify(i[0]),"").then(function(l){if(0==parseInt(l.SAVTIM_OUT_OBJ.RETCD)){if(i.splice(0,1),i.length>0&&e.pasteSave(i,a,n,r,o),0==i.length&&void 0!=e.pasteMultipleCount&&e.pasteMultipleCount>0&&e.pasteMultipleCount--,0==i.length&&(void 0==e.pasteMultipleCount||0==e.pasteMultipleCount)){var C=[],m="",h=(e.highestRecordNum+r-(void 0!=e.selectedRecordArray?e.selectedRecordArray.length:0))*(void 0!=n?n:1);h-=e.checkDbPartition,(h-=c)>0&&(m=p+" "+h+(h>1?t("translate")("msg_entries"):t("translate")("msg_entry"))+t("translate")("msg_success"),C.push(m)),y=e.selectedRecordArray.length*n,y+=e.checkDbPartition,y+=c,(y+=o)>0&&(m=y+" "+g+t("translate")("msg_RcrdnoValidNewEntry")),a&&e.failedErrorMessage.length>0&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),u.pastedRecords=!0,C.length>0&&0==e.failedErrorMessage.length&&gi(pi(C)),e.isDailyMode?e.GetData(e.isDailyMode,e.currentDate):(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(e.currentDate,"yyyy-MM-dd"),e.GetData(e.isDailyMode,e.weeklyStartDate)),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")}}else{var E=t("translate")("msg_cpyFaild")+s+":"+l.SAVTIM_OUT_OBJ.ERRMSG;if(""!=l.SAVTIM_OUT_OBJ.ERRMSG&&e.failedErrorMessage.indexOf(E)<0&&e.failedErrorMessage.push(E),0==i.length&&void 0!=e.pasteMultipleCount&&e.pasteMultipleCount>0&&e.pasteMultipleCount--,0==i.length&&(void 0==e.pasteMultipleCount||0==e.pasteMultipleCount)){var C=[],m="",h=(e.highestRecordNum+r-(void 0!=e.selectedRecordArray?e.selectedRecordArray.length:0))*(void 0!=n?n:1);(h-=c)>0&&(m=p+" "+h+(h>1?t("translate")("msg_entries"):t("translate")("msg_entry"))+t("translate")("msg_success"),C.push(m)),y=c,""!=C&&(C+="<br/>"),(y+=o)>0&&(m=y+" "+g+t("translate")("msg_RcrdnoValidNewEntry")),a&&e.failedErrorMessage.length>0&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),C.length>0&&0==e.failedErrorMessage.length&&gi(pi(C)),e.isDailyMode?e.GetData(e.isDailyMode,e.currentDate):(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(e.currentDate,"yyyy-MM-dd"),e.GetData(e.isDailyMode,e.weeklyStartDate)),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")}if(a){if(a&&(m="",Ci(l.SAVTIM_OUT_OBJ.ERRMSG,i)?e.checkDbPartition=e.checkDbPartition+1:"-1"==e.selectedRecordArray.indexOf(d)&&e.selectedRecordArray.push(d),i.splice(0,1),i.length>0&&e.pasteSave(i,a,n,r,o),0==i.length&&void 0!=e.pasteMultipleCount&&e.pasteMultipleCount>0&&e.pasteMultipleCount--,0==i.length&&0==e.round&&0!=e.highestRecordNum&&(void 0==e.pasteMultipleCount||0==e.pasteMultipleCount))){e.round=!0;var D=[],h=(e.highestRecordNum+r-(void 0!=e.selectedRecordArray?e.selectedRecordArray.length:0))*(void 0!=n?n:1);if(h-=e.checkDbPartition,(h-=c)>0&&(m=p+" "+h+(h>1?t("translate")("msg_entries"):t("translate")("msg_entry"))+t("translate")("msg_success"),D.push(m)),void 0!=e.selectedRecordArray&&e.selectedRecordArray.length>0||e.checkDbPartition>0){var y=e.selectedRecordArray.length*(void 0!=n?n:1);y+=e.checkDbPartition,y+=c,(y+=o)>0&&(m=y+" "+g+t("translate")("msg_RcrdnoValidNewEntry")),0==e.failedErrorMessage.length&&gi(D),a&&gi(e.failedErrorMessage,t("translate")("lbl_Error"),!1),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active")}e.isDailyMode?e.GetData(e.isDailyMode,e.currentDate):(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(e.currentDate,"yyyy-MM-dd"),e.GetData(e.isDailyMode,e.weeklyStartDate))}}else ui(l.SAVTIM_OUT_OBJ.ERRMSG,i)||(gi([l.SAVTIM_OUT_OBJ.ERRMSG],t("translate")("lbl_Error"),!1),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"))}})};var ui=function(i,a){var n=!1;if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.chekForDBPartitionError"),null!=i&&""!=i&&(i=i.toLowerCase()).indexOf("database partition")>0){for(var r="",l=0;l<a.length;l++){var o=a[l],s=D.createDate(o.DTE);s=t("date")(s,"dd-MMM-yyyy"),r=""==r?s:r+","+s}if(""!=r){n=!0;var d=t("translate")("msg_DBParttionEr",{dateValue:r});e.isDailyMode,gi([d],t("translate")("lbl_Error"),!1),$(".paste").removeClass("active"),$(".copyToday").removeClass("active"),$(".copyWeek").removeClass("active"),$(".clone").removeClass("active"),e.isDailyMode?e.GetData(e.isDailyMode,e.currentDate):e.isDailyMode||(u.isPasteClicked=!0,u.weekStateCurrentDate=t("date")(e.currentDate,"yyyy-MM-dd"),e.GetData(e.isDailyMode,e.weeklyStartDate))}}return n},Ci=function(e,i){var a=!1;if(u.errorLogMethod("DailyTimeDesktopGridCtrl.var.chekForDBPartitionErrorPasteAdvance"),null!=e&&""!=e&&(e=e.toLowerCase()).indexOf("database partition")>0){for(var n="",r=0;r<i.length;r++){var l=i[r],o=D.createDate(l.DTE);o=t("date")(o,"dd-MMM-yyyy"),n=""==n?o:n+","+o}""!=n&&(a=!0)}return a},mi=function(e,i){return u.errorLogMethod("DailyTimeDesktopGridCtrl.var.getErrorMessage"),t("translate")("msg_cpyFaild")+" "+e.CEP_REC.CLIENO+": "+i},hi=function(){var e=new Date,t=[],i=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-i),e.setDate(e.getDate()+1),e.setDate(e.getDate()-7);for(var a=0;a<7&&0!=e.getDay();a++)e.setDate(e.getDate()+1);return t[0]=new Date(e.valueOf()),e.setDate(e.getDate()+6),t[1]=e,t},Ei=function(t,i){var a=!1;if(e.IsTodayCopied||e.IsWeekCopied||e.isPastebyDrag||e.IspasteAdvance)if(e.IsTodayCopied)e.totalTodayHrs=parseFloat(e.totalTodayHrs)+parseFloat(t),e.totalTodayHrs>24&&(a=!0),console.log("DESKTOP today HOURS--"+e.totalTodayHrs);else if(e.IsWeekCopied){var n=hi(),r=angular.copy(n[0]);r.setHours(0,0,0,0),(i=re(i)).setHours(0,0,0,0),o=parseInt((i-r)/864e5),e.totalWeeklyPastedHours[o]=(0==parseFloat(e.totalWeeklyPastedHours[o])?parseFloat(e.weekTotalHrs[o]):parseFloat(e.totalWeeklyPastedHours[o]))+parseFloat(t),e.totalWeeklyPastedHours[o]>24&&(a=!0),console.log("DESKTOP COPY TO THIS WEEK $scope.totalWeeklyPastedHours[dayDiff]--"+e.totalWeeklyPastedHours[o]+"--dayDiff--"+o)}else e.isPastebyDrag&&(a=U.pasteByDragService(i,i,t));else if(e.isDailyMode)t>24?a=!0:e.saveInlineEntryFlag||(e.totalDailyPastedHours=(0==parseFloat(e.totalDailyPastedHours)?parseFloat(e.ttlHrs):parseFloat(e.totalDailyPastedHours))+parseFloat(t),console.log("DESKTOP DAILY HOURS--"+e.totalDailyPastedHours),e.totalDailyPastedHours>24&&(a=!0));else{var l=[0,0,0,0,0,0,0];if((r=angular.copy(e.weeklyStartDate)).setHours(0,0,0,0),(i=re(i)).setHours(0,0,0,0),t>24)a=!0,console.log("DESKTOP WEEKLY HOURS--"+t+" entryDate--"+i);else if(!e.saveInlineEntryFlag){l[0]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum1?0:e.itemsDataTotal.HrsTotalSum1),l[1]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum2?0:e.itemsDataTotal.HrsTotalSum2),l[2]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum3?0:e.itemsDataTotal.HrsTotalSum3),l[3]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum4?0:e.itemsDataTotal.HrsTotalSum4),l[4]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum5?0:e.itemsDataTotal.HrsTotalSum5),l[5]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum6?0:e.itemsDataTotal.HrsTotalSum6),l[6]=parseFloat(void 0==e.itemsDataTotal.HrsTotalSum7?0:e.itemsDataTotal.HrsTotalSum7);var o=parseInt((i-r)/864e5);e.totalWeeklyPastedHours[o]=(0==parseFloat(e.totalWeeklyPastedHours[o])?parseFloat(l[o]):parseFloat(e.totalWeeklyPastedHours[o]))+parseFloat(t),e.totalWeeklyPastedHours[o]>24&&(a=!0),console.log("DESKTOP WEEKLY HOURS--"+e.totalWeeklyPastedHours[o]+"--dayDiff--"+o)}}return a},Di=function(i,a,n,r,l){if(D=u.GetInitialDetail(!1,!0),"Y"!=a.CEP_REC.CLIEACTIVE||"Y"!=a.CEP_REC.ENGACTIVE||"Y"!=a.CEP_REC.PRJACTIVE)return gi([t("translate")("msg_InActiveCep")],t("translate")("lbl_Error"),!1),!1;"Y"!=a.CEP_REC.ENGTIMFLAG&&e.msgEr.push(t("translate")("msg_SelectAnotherEng")),"Y"!=a.CEP_REC.PRJTIMFLAG&&e.msgEr.push(t("translate")("msg_SelectAnotherPrj"));var o=angular.copy(a.CEP_REC),s=e.initialDetail.COMP_REC.BCHB;if(void 0!==s&&null!==s&&""!=s&&"NO"!=s.toUpperCase()&&"N"!=s.toUpperCase())for(f=0;f<s.length;f++)o.CHARBASIS==s.charAt(f)&&e.msgEr.push(t("translate")("msg_CEPChargeBasisErr"));"Y"!=a.ACTI_REC.STAT&&0==parseInt(a.CEP_REC.CATID)&&e.msgEr.push(t("translate")("msg_InActiveActivity"));var d=t("date")(e.initialDetail.EMPL_REC.BRSTDTE,"yyyy-MM-dd").split("-"),c=d[2].split(" "),g=new Date(d[0],d[1]-1,c[0]),p=a.DTE.split("-"),C=p[2].split(" "),m=new Date(p[0],p[1]-1,C[0]);if(new Date(m.valueOf())<new Date(g.valueOf())&&!e.isPriorToBillingDate){var h=g.toString().split(" "),E=h[2]+"-"+h[1]+"-"+h[3];e.msgEr.push(t("translate")("msg_TimePriorToBillingStartDate",{dateVal:E}))}0!=e.msgFutureTime.length&&e.msgEr.push(e.msgFutureTime[0]),e.msgFutureTime=[];var D=null;u.GetLoginDetail(!1,!0),D=u.GetInitialDetail(!1,!0);var y=!1,v=void 0==a.ICRTCD||null==a.ICRTCD||""==a.ICRTCD.trim();if(i)parseFloat(a.HRS)<0||parseFloat(a.ICCHRGE)<0?""!=(T=U.validateTENegValue(a,D,v))&&e.msgEr.push(T):Ei(parseFloat(a.HRS),a.DTE)&&(y=!0);else if(null!=n)for(var f=0;f<n.length;f++)if(void 0==n[f].HRS&&(n[f]=JSON.parse(n[f])),parseFloat(n[f].HRS)<0||parseFloat(n[f].ICCHRGE)<0){var T=U.validateTENegValue(n[f],D,v);if(""!=T){e.msgEr.push(T);break}}else Ei(parseFloat(n[f].HRS),n[f].DTE)&&(y=!0);if(y&&!e.saveInlineEntryFlag&&0==e.exceedHrs.length&&(maxHourMsg=t("translate")("msg_24HrsPaste"),e.exceedHrs.push(maxHourMsg)),e.msgEr.length>0)return e.msgEr.length>2&&(e.msgEr=e.msgEr.slice(0,2),e.msgEr[2]=t("translate")("msg_TEMultipleErr")),e.msgEr.length>1&&(e.msgEr[0]='<span class="floatLeftSide">- </span><span class="floatRightSide">'+e.msgEr[0]+"</span>",e.msgEr[1]='<span class="floatLeftSide">- </span><span class="floatRightSide">'+e.msgEr[1]+"</span>"),gi(e.msgEr,t("translate")("lbl_Error"),!1),e.msgEr=[],!1;if(null!=a.CEP_REC.RENPRJNO&&" "!=a.CEP_REC.RENPRJNO&&void 0!==a.CEP_REC.RENPRJNO){var b=parseInt(a.CEP_REC.RENPRJNO)>99?parseInt(a.CEP_REC.RENPRJNO).toString():parseInt(a.CEP_REC.RENPRJNO)>9?"0"+parseInt(a.CEP_REC.RENPRJNO).toString():"00"+parseInt(a.CEP_REC.RENPRJNO).toString();if(14!=a.CEP_REC.CLIENO.length)S=a.CEP_REC.CLIENO+"-"+a.CEP_REC.ENGNO+"-"+a.CEP_REC.PRJNO;else var S=a.CEP_REC.CLIENO;-1==e.renewalMessage.indexOf(S)&&(e.renewalMessage.push(S),gi([t("translate")("msg_ProjectRenewedPaste",{pName:b,cepProject:S})],"Warning","z"))}return!0};e.validateEntries=function(i,a,n,r,l,o){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.validateEntries"),o)return Di(i,a,n);if("Y"!=a.CEP_REC.CLIEACTIVE||"Y"!=a.CEP_REC.ENGACTIVE||"Y"!=a.CEP_REC.PRJACTIVE)return l?e.failedErrorMessage.indexOf(mi(a,t("translate")("msg_InActiveCep")))<0&&e.failedErrorMessage.push(mi(a,t("translate")("msg_InActiveCep"))):gi([t("translate")("msg_InActiveCep")],t("translate")("lbl_Error"),!1),!1;if("Y"!=a.CEP_REC.ENGTIMFLAG)return l?e.failedErrorMessage.indexOf(mi(a,t("translate")("msg_SelectAnotherEng")))<0&&e.failedErrorMessage.push(mi(a,t("translate")("msg_SelectAnotherEng"))):gi([t("translate")("msg_SelectAnotherEng")],t("translate")("lbl_Error"),!1),!1;if(E=u.GetInitialDetail(!1,!0),"Y"!=a.ACTI_REC.STAT&&0==parseInt(a.CEP_REC.CATID))return l?e.failedErrorMessage.indexOf(mi(a,t("translate")("msg_InActiveActivity")))<0&&e.failedErrorMessage.push(mi(a,t("translate")("msg_InActiveActivity"))):gi([t("translate")("msg_InActiveActivity")],t("translate")("lbl_Error"),!1),!1;if("Y"!=a.CEP_REC.PRJTIMFLAG)return l?e.failedErrorMessage.indexOf(mi(a,t("translate")("msg_SelectAnotherPrj")))<0&&e.failedErrorMessage.push(mi(a,t("translate")("msg_SelectAnotherPrj"))):gi([t("translate")("msg_SelectAnotherPrj")],t("translate")("lbl_Error"),!1),!1;var s=t("date")(e.initialDetail.EMPL_REC.BRSTDTE,"yyyy-MM-dd").split("-"),d=s[2].split(" "),c=new Date(s[0],s[1]-1,d[0]),g=a.DTE.split("-"),p=g[2].split(" "),C=new Date(g[0],g[1]-1,p[0]);if(new Date(C.valueOf())<new Date(c.valueOf())&&!e.isPriorToBillingDate){var m=c.toString().split(" "),h=m[2]+"-"+m[1]+"-"+m[3];return l?e.failedErrorMessage.indexOf(mi(a,[t("translate")("msg_TimePriorToBillingStartDate",{dateVal:h})]))<0&&e.failedErrorMessage.push(mi(a,[t("translate")("msg_TimePriorToBillingStartDate",{dateVal:h})])):gi([t("translate")("msg_TimePriorToBillingStartDate",{dateVal:h})],t("translate")("lbl_Error"),!1),e.IspasteAdvance&&(e.isPriorToBillingDate=!0),!1}var E=null;u.GetLoginDetail(!1,!0),E=u.GetInitialDetail(!1,!0);var D=!1;if(i)if(parseFloat(a.HRS)<0||parseFloat(a.ICCHRGE)<0){if(!(v=e.validateEntryHours(a,E,l)))return!1}else Ei(parseFloat(a.HRS),a.DTE)&&(D=!0);else if(null!=n)for(var y=0;y<n.length;y++)if(void 0==n[y].HRS&&(n[y]=JSON.parse(n[y])),parseFloat(n[y].HRS)<0||parseFloat(n[y].ICCHRGE)<0){var v=e.validateEntryHours(n[y],E,l);if(!v)return!1}else Ei(parseFloat(n[y].HRS),n[y].DTE)&&(D=!0);if(D&&!e.saveInlineEntryFlag&&0==e.exceedHrs.length&&(maxHourMsg=t("translate")("msg_24HrsPaste"),e.exceedHrs.push(maxHourMsg)),null!=a.CEP_REC.RENPRJNO&&" "!=a.CEP_REC.RENPRJNO&&void 0!==a.CEP_REC.RENPRJNO){var f=parseInt(a.CEP_REC.RENPRJNO)>99?parseInt(a.CEP_REC.RENPRJNO).toString():parseInt(a.CEP_REC.RENPRJNO)>9?"0"+parseInt(a.CEP_REC.RENPRJNO).toString():"00"+parseInt(a.CEP_REC.RENPRJNO).toString();if(14!=a.CEP_REC.CLIENO.length)T=a.CEP_REC.CLIENO+"-"+a.CEP_REC.ENGNO+"-"+a.CEP_REC.PRJNO;else var T=a.CEP_REC.CLIENO;-1==e.renewalMessage.indexOf(T)&&(e.renewalMessage.push(T),l?e.prjRenewMessage.indexOf(t("translate")("msg_ProjectRenewedPasteMultiple",{pName:f,cepProject:T}))<0&&e.prjRenewMessage.push(t("translate")("msg_ProjectRenewedPasteMultiple",{pName:f,cepProject:T})):gi([t("translate")("msg_ProjectRenewedPaste",{pName:f,cepProject:T})],"Warning","z"))}return!0},e.validateEntryHours=function(i,a,n){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.validateEntryHours");var r="";switch(i.CEP_REC.CHARBASIS){case"N":if("Y"!=a.COMP_REC.NTIM)return r=void 0==i.ICRTCD||null==i.ICRTCD||""==i.ICRTCD.trim()?"msg_NegativeHrs":"msg_NegICCharge",n?e.failedErrorMessage.indexOf(mi(i,t("translate")(r)))<0&&e.failedErrorMessage.push(mi(i,t("translate")(r))):gi([t("translate")(r)],t("translate")("lbl_Error"),!1),!1;break;case"T":if("Y"!=a.COMP_REC.NBTM)return r=void 0==i.ICRTCD||null==i.ICRTCD||""==i.ICRTCD.trim()?"msg_BillingNegativeHrs":"msg_NegICCharge",n?e.failedErrorMessage.indexOf(mi(i,t("translate")(r)))<0&&e.failedErrorMessage.push(mi(i,t("translate")(r))):gi([t("translate")(r)],t("translate")("lbl_Error"),!1),!1;break;case"S":case"C":if("Y"!=e.initialDetail.COMP_REC.NBTM)return r=void 0==i.ICRTCD||null==i.ICRTCD||""==i.ICRTCD.trim()?"msg_NegativeHrs":"msg_NegICCharge",n?e.failedErrorMessage.indexOf(mi(i,t("translate")(r)))<0&&e.failedErrorMessage.push(mi(i,t("translate")(r))):gi([t("translate")(r)],t("translate")("lbl_Error"),!1),!1}return!0},e.deleteTimeEntriesConfirm=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.deleteTimeEntriesConfirm");for(var i=0,a=!1,n=document.getElementsByName("chkEntries"),r=0;r<n.length;r++)if(1==n[r].checked&&(i++,!a)){var l=JSON.parse(n[r].value);(t&&"N"==l.TIMSUB||!t&&"N"==l.data.TIMSUB)&&(JSON.parse(n[r].value),a=!0)}if(i>0&&a){var o={message:"Do you wish to delete "+i+" records?",isCancelBtnOn:!0,isDailyModeOption:t};e.openModalCtrl="deleteConfirm",e.open("templates/ConfirmMessage.html","ConfirmMessage",o)}},e.pasteAdvance=function(t){if(e.DailyDataCopied||e.WeeklyDataCopied){u.showRightMenuFlag=!1,e.renewalMessage=[];var i=u.GetLoginDetail(!1,!0);if(null!=i&&void 0!=i){u.pasteAdvancePopup=!0,e.showEditFlag=!1,e.showMenuOutsideGrid=!1,e.isShowSubmitMenu=!1,u.showRightMenuFlag=!1,e.showNewFlag=!1,e.round=!1,u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteAdvance");var a={currentDateValue:e.currentDate};e.openModalCtrl="pasteAdvanced",e.open("templates/Multidatepicker.html","multidatepickerCtrlDesktop",a),localStorage.setItem("includeweekend","0")}}else gi([e.noPaste],"Message",!0)},e.CopytoToday=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.CopytoToday"),$(".copyToday").addClass("active"),i){e.IsTodayCopied=!0,e.totalTodayHrs=0;var a=u.GetLoginDetail(!1,!0),n=new Date,r=n.getTimezoneOffset();n.setMinutes(n.getMinutes()-r),n=t("date")(n,"yyyy-MM-dd HH:mm:ss"),U.copyToTodayCopyToWeekService(a.SESKEY,a.EMPLID,n,n,t("date")(e.currentDate,"yyyy-MM-dd HH:mm:ss")).then(function(t){if(0==t.RETTIM_OUT_OBJ.RETCD){for(var a=0;a<t.RETTIM_OUT_OBJ.TIME_ARR.length;a++)e.totalTodayHrs=parseFloat(e.totalTodayHrs)+parseFloat(t.RETTIM_OUT_OBJ.TIME_ARR[a].HRS);e.copyRecords(i)?e.pasteRecords(i,1):e.IsTodayCopied=!1}})}},e.CopytoThisWeek=function(i){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.CopytoThisWeek"),$(".copyWeek").addClass("active"),!i){var a=u.GetLoginDetail(!1,!0);e.IsWeekCopied=!0,e.weekTotalHrs=[0,0,0,0,0,0,0];var n=hi();e.currentWeekStartDate=n[0],U.copyToTodayCopyToWeekService(a.SESKEY,a.EMPLID,t("date")(n[0],"yyyy-MM-dd HH:mm:ss"),t("date")(n[1],"yyyy-MM-dd HH:mm:ss"),t("date")(e.currentDate,"yyyy-MM-dd HH:mm:ss")).then(function(a){if(0==a.RETTIM_OUT_OBJ.RETCD){for(var r=0;r<7;r++){for(var l=0;l<a.RETTIM_OUT_OBJ.TIME_ARR.length;l++)n[0].setHours(0,0,0,0),t("date")(n[0],"yyyy-MM-dd HH:mm:ss")==t("date")(a.RETTIM_OUT_OBJ.TIME_ARR[l].DTE,"yyyy-MM-dd")&&(e.weekTotalHrs[r]=parseFloat(e.weekTotalHrs[r])+parseFloat(a.RETTIM_OUT_OBJ.TIME_ARR[l].HRS));n[0].setDate(n[0].getDate()+1)}console.log("$scope.weekTotalHrs--"+JSON.stringify(e.weekTotalHrs)),e.copyRecords(i)?e.pasteRecords(i,1):e.IsWeekCopied=!1}})}},e.Clone=function(t){u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.Clone"),$(".clone").addClass("active"),e.checkRevMonthFlag&&(e.IsClone=!0,e.copyRecords(t)?e.pasteRecords(t,1):e.IsClone=!1)},e.pasteMultiple=function(t){if(u.errorLogMethod("DailyTimeDesktopGridCtrl.$scope.pasteMultiple"),void 0!=t){var i=new Date("1900-01-01"),a=t.indexOf(i.setHours(0,0,0,0));a>-1&&t.splice(a,1);var n=(t=ee(t)).length;e.pasteMultipleCount=n,e.isPriorToBillingDate=!1;for(var r=0;r<n;r++)e.isPriorToBillingDate||(i=new Date(t[r]),e.IspasteAdvance=!0,e.pasteAdvanceDate=i,e.pasteRecords(!0,n),e.checkPasteMulCnt=r+1);e.checkPasteMulCnt=0,e.isPriorToBillingDate=!1}},e.showWeeks=!1,e.calYearSelclose=function(){localStorage.isReportPopUpOpen="false",$(".DailyTimeDesktopGridCtrl").fadeOut()},e.calDateSelclose=function(){localStorage.isReportPopUpOpen="false",$(".DailyTimeDesktopCtrlSubmit").fadeOut()}}]);